var Jb=Object.defineProperty,ew=Object.defineProperties;var tw=Object.getOwnPropertyDescriptors;var Qf=Object.getOwnPropertySymbols,nw=Object.getPrototypeOf,rw=Object.prototype.hasOwnProperty,iw=Object.prototype.propertyIsEnumerable,sw=Reflect.get;var Jf=(r,t)=>(t=Symbol[r])?t:Symbol.for("Symbol."+r);var ep=(r,t,e)=>t in r?Jb(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,A=(r,t)=>{for(var e in t||={})rw.call(t,e)&&ep(r,e,t[e]);if(Qf)for(var e of Qf(t))iw.call(t,e)&&ep(r,e,t[e]);return r},ae=(r,t)=>ew(r,tw(t));var on=(r,t,e)=>sw(nw(r),e,t);var I=(r,t,e)=>new Promise((n,i)=>{var s=l=>{try{a(e.next(l))}catch(c){i(c)}},o=l=>{try{a(e.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((e=e.apply(r,t)).next())});var tp=(r,t,e)=>(t=r[Jf("asyncIterator")])?t.call(r):(r=r[Jf("iterator")](),t={},e=(n,i)=>(i=r[n])&&(t[n]=s=>new Promise((o,a,l)=>(s=i.call(r,s),l=s.done,Promise.resolve(s.value).then(c=>o({value:c,done:l}),a)))),e("next"),e("return"),t);function np(r,t){return Object.is(r,t)}var Ne=null,no=!1,ic=1,_r=Symbol("SIGNAL");function se(r){let t=Ne;return Ne=r,t}function sc(){return Ne}var ro={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oc(r){if(no)throw new Error("");if(Ne===null)return;Ne.consumerOnSignalRead(r);let t=Ne.nextProducerIndex++;if(so(Ne),t<Ne.producerNode.length&&Ne.producerNode[t]!==r&&Ti(Ne)){let e=Ne.producerNode[t];io(e,Ne.producerIndexOfThis[t])}Ne.producerNode[t]!==r&&(Ne.producerNode[t]=r,Ne.producerIndexOfThis[t]=Ti(Ne)?ap(r,Ne,t):0),Ne.producerLastReadVersion[t]=r.version}function rp(){ic++}function ip(r){if(!(Ti(r)&&!r.dirty)&&!(!r.dirty&&r.lastCleanEpoch===ic)){if(!r.producerMustRecompute(r)&&!cc(r)){rc(r);return}r.producerRecomputeValue(r),rc(r)}}function ac(r){if(r.liveConsumerNode===void 0)return;let t=no;no=!0;try{for(let e of r.liveConsumerNode)e.dirty||ow(e)}finally{no=t}}function sp(){return Ne?.consumerAllowSignalWrites!==!1}function ow(r){r.dirty=!0,ac(r),r.consumerMarkedDirty?.(r)}function rc(r){r.dirty=!1,r.lastCleanEpoch=ic}function lc(r){return r&&(r.nextProducerIndex=0),se(r)}function op(r,t){if(se(t),!(!r||r.producerNode===void 0||r.producerIndexOfThis===void 0||r.producerLastReadVersion===void 0)){if(Ti(r))for(let e=r.nextProducerIndex;e<r.producerNode.length;e++)io(r.producerNode[e],r.producerIndexOfThis[e]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function cc(r){so(r);for(let t=0;t<r.producerNode.length;t++){let e=r.producerNode[t],n=r.producerLastReadVersion[t];if(n!==e.version||(ip(e),n!==e.version))return!0}return!1}function uc(r){if(so(r),Ti(r))for(let t=0;t<r.producerNode.length;t++)io(r.producerNode[t],r.producerIndexOfThis[t]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function ap(r,t,e){if(lp(r),r.liveConsumerNode.length===0&&cp(r))for(let n=0;n<r.producerNode.length;n++)r.producerIndexOfThis[n]=ap(r.producerNode[n],r,n);return r.liveConsumerIndexOfThis.push(e),r.liveConsumerNode.push(t)-1}function io(r,t){if(lp(r),r.liveConsumerNode.length===1&&cp(r))for(let n=0;n<r.producerNode.length;n++)io(r.producerNode[n],r.producerIndexOfThis[n]);let e=r.liveConsumerNode.length-1;if(r.liveConsumerNode[t]=r.liveConsumerNode[e],r.liveConsumerIndexOfThis[t]=r.liveConsumerIndexOfThis[e],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,t<r.liveConsumerNode.length){let n=r.liveConsumerIndexOfThis[t],i=r.liveConsumerNode[t];so(i),i.producerIndexOfThis[n]=t}}function Ti(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function so(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function lp(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function cp(r){return r.producerNode!==void 0}function aw(){throw new Error}var up=aw;function lw(r){up(r)}function dc(r){up=r}var cw=null;function hc(r,t){sp()||lw(r),r.equal(r.value,t)||(r.value=t,uw(r))}var fc=ae(A({},ro),{equal:np,value:void 0,kind:"signal"});function uw(r){r.version++,rp(),ac(r),cw?.()}var pc;function Mi(){return pc}function an(r){let t=pc;return pc=r,t}var oo=Symbol("NotFound");function q(r){return typeof r=="function"}function Er(r){let e=r(n=>{Error.call(n),n.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ao=Er(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((n,i)=>`${i+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Ri(r,t){if(r){let e=r.indexOf(t);0<=e&&r.splice(e,1)}}var Ce=class r{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:n}=this;if(q(n))try{n()}catch(s){t=s instanceof ao?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{dp(s)}catch(o){t=t??[],o instanceof ao?t=[...t,...o.errors]:t.push(o)}}if(t)throw new ao(t)}}add(t){var e;if(t&&t!==this)if(this.closed)dp(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ri(e,t)}remove(t){let{_finalizers:e}=this;e&&Ri(e,t),t instanceof r&&t._removeParent(this)}};Ce.EMPTY=(()=>{let r=new Ce;return r.closed=!0,r})();var gc=Ce.EMPTY;function lo(r){return r instanceof Ce||r&&"closed"in r&&q(r.remove)&&q(r.add)&&q(r.unsubscribe)}function dp(r){q(r)?r():r.unsubscribe()}var At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Dr={setTimeout(r,t,...e){let{delegate:n}=Dr;return n?.setTimeout?n.setTimeout(r,t,...e):setTimeout(r,t,...e)},clearTimeout(r){let{delegate:t}=Dr;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function co(r){Dr.setTimeout(()=>{let{onUnhandledError:t}=At;if(t)t(r);else throw r})}function Ni(){}var hp=mc("C",void 0,void 0);function fp(r){return mc("E",void 0,r)}function pp(r){return mc("N",r,void 0)}function mc(r,t,e){return{kind:r,value:t,error:e}}var Un=null;function Cr(r){if(At.useDeprecatedSynchronousErrorHandling){let t=!Un;if(t&&(Un={errorThrown:!1,error:null}),r(),t){let{errorThrown:e,error:n}=Un;if(Un=null,e)throw n}}else r()}function gp(r){At.useDeprecatedSynchronousErrorHandling&&Un&&(Un.errorThrown=!0,Un.error=r)}var zn=class extends Ce{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,lo(t)&&t.add(this)):this.destination=ww}static create(t,e,n){return new Sr(t,e,n)}next(t){this.isStopped?yc(pp(t),this):this._next(t)}error(t){this.isStopped?yc(fp(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?yc(hp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yw=Function.prototype.bind;function vc(r,t){return yw.call(r,t)}var bc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){uo(n)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){uo(n)}else uo(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){uo(e)}}},Sr=class extends zn{constructor(t,e,n){super();let i;if(q(t)||!t)i={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&vc(t.next,s),error:t.error&&vc(t.error,s),complete:t.complete&&vc(t.complete,s)}):i=t}this.destination=new bc(i)}};function uo(r){At.useDeprecatedSynchronousErrorHandling?gp(r):co(r)}function bw(r){throw r}function yc(r,t){let{onStoppedNotification:e}=At;e&&Dr.setTimeout(()=>e(r,t))}var ww={closed:!0,next:Ni,error:bw,complete:Ni};var Ar=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(r){return r}function wc(...r){return _c(r)}function _c(r){return r.length===0?ot:r.length===1?r[0]:function(e){return r.reduce((n,i)=>i(n),e)}}var he=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){let n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,i){let s=Ew(e)?e:new Sr(e,n,i);return Cr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return n=mp(n),new n((i,s)=>{let o=new Sr({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)}[Ar](){return this}pipe(...e){return _c(e)(this)}toPromise(e){return e=mp(e),new e((n,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>n(s))})}}return r.create=t=>new r(t),r})();function mp(r){var t;return(t=r??At.Promise)!==null&&t!==void 0?t:Promise}function _w(r){return r&&q(r.next)&&q(r.error)&&q(r.complete)}function Ew(r){return r&&r instanceof zn||_w(r)&&lo(r)}function Ec(r){return q(r?.lift)}function ne(r){return t=>{if(Ec(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(r,t,e,n,i){return new Dc(r,t,e,n,i)}var Dc=class extends zn{constructor(t,e,n,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ir(){return ne((r,t)=>{let e=null;r._refCount++;let n=re(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){e=null;return}let i=r._connection,s=e;e=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});r.subscribe(n),n.closed||(e=r.connect())})}var xr=class extends he{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ec(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ce;let e=this.getSubject();t.add(this.source.subscribe(re(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ce.EMPTY)}return t}refCount(){return Ir()(this)}};var vp=Er(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class r extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let n=new ho(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new vp}next(e){Cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(e)}})}error(e){Cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:n,isStopped:i,observers:s}=this;return n||i?gc:(this.currentObservers=null,s.push(e),new Ce(()=>{this.currentObservers=null,Ri(s,e)}))}_checkFinalizedStatuses(e){let{hasError:n,thrownError:i,isStopped:s}=this;n?e.error(i):s&&e.complete()}asObservable(){let e=new he;return e.source=this,e}}return r.create=(t,e)=>new ho(t,e),r})(),ho=class extends ke{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.next)===null||n===void 0||n.call(e,t)}error(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.error)===null||n===void 0||n.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,n;return(n=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&n!==void 0?n:gc}};var Be=class extends ke{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var Qe=new he(r=>r.complete());function yp(r){return r&&q(r.schedule)}function bp(r){return r[r.length-1]}function wp(r){return q(bp(r))?r.pop():void 0}function Sn(r){return yp(bp(r))?r.pop():void 0}function Ep(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})}function _p(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gn(r){return this instanceof Gn?(this.v=r,this):new Gn(r)}function Dp(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){n[f]&&(i[f]=function(g){return new Promise(function(v,m){s.push([f,g,v,m])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(n[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof Gn?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Cp(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof _p=="function"?_p(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var fo=r=>r&&typeof r.length=="number"&&typeof r!="function";function po(r){return q(r?.then)}function go(r){return q(r[Ar])}function mo(r){return Symbol.asyncIterator&&q(r?.[Symbol.asyncIterator])}function vo(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Dw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yo=Dw();function bo(r){return q(r?.[yo])}function wo(r){return Dp(this,arguments,function*(){let e=r.getReader();try{for(;;){let{value:n,done:i}=yield Gn(e.read());if(i)return yield Gn(void 0);yield yield Gn(n)}}finally{e.releaseLock()}})}function _o(r){return q(r?.getReader)}function Fe(r){if(r instanceof he)return r;if(r!=null){if(go(r))return Cw(r);if(fo(r))return Sw(r);if(po(r))return Aw(r);if(mo(r))return Sp(r);if(bo(r))return Iw(r);if(_o(r))return xw(r)}throw vo(r)}function Cw(r){return new he(t=>{let e=r[Ar]();if(q(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sw(r){return new he(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function Aw(r){return new he(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,co)})}function Iw(r){return new he(t=>{for(let e of r)if(t.next(e),t.closed)return;t.complete()})}function Sp(r){return new he(t=>{Tw(r,t).catch(e=>t.error(e))})}function xw(r){return Sp(wo(r))}function Tw(r,t){var e,n,i,s;return Ep(this,void 0,void 0,function*(){try{for(e=Cp(r);n=yield e.next(),!n.done;){let o=n.value;if(t.next(o),t.closed)return}}catch(o){i={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}t.complete()})}function Je(r,t,e,n=0,i=!1){let s=t.schedule(function(){e(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!i)return s}function Eo(r,t=0){return ne((e,n)=>{e.subscribe(re(n,i=>Je(n,r,()=>n.next(i),t),()=>Je(n,r,()=>n.complete(),t),i=>Je(n,r,()=>n.error(i),t)))})}function Do(r,t=0){return ne((e,n)=>{n.add(r.schedule(()=>e.subscribe(n),t))})}function Ap(r,t){return Fe(r).pipe(Do(t),Eo(t))}function Ip(r,t){return Fe(r).pipe(Do(t),Eo(t))}function xp(r,t){return new he(e=>{let n=0;return t.schedule(function(){n===r.length?e.complete():(e.next(r[n++]),e.closed||this.schedule())})})}function Tp(r,t){return new he(e=>{let n;return Je(e,t,()=>{n=r[yo](),Je(e,t,()=>{let i,s;try{({value:i,done:s}=n.next())}catch(o){e.error(o);return}s?e.complete():e.next(i)},0,!0)}),()=>q(n?.return)&&n.return()})}function Co(r,t){if(!r)throw new Error("Iterable cannot be null");return new he(e=>{Je(e,t,()=>{let n=r[Symbol.asyncIterator]();Je(e,t,()=>{n.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Mp(r,t){return Co(wo(r),t)}function Rp(r,t){if(r!=null){if(go(r))return Ap(r,t);if(fo(r))return xp(r,t);if(po(r))return Ip(r,t);if(mo(r))return Co(r,t);if(bo(r))return Tp(r,t);if(_o(r))return Mp(r,t)}throw vo(r)}function be(r,t){return t?Rp(r,t):Fe(r)}function $(...r){let t=Sn(r);return be(r,t)}function Tr(r,t){let e=q(r)?r:()=>r,n=i=>i.error(e());return new he(t?i=>t.schedule(n,0,i):n)}function Cc(r){return!!r&&(r instanceof he||q(r.lift)&&q(r.subscribe))}var ln=Er(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(r,t){return ne((e,n)=>{let i=0;e.subscribe(re(n,s=>{n.next(r.call(t,s,i++))}))})}var{isArray:Mw}=Array;function Rw(r,t){return Mw(t)?r(...t):r(t)}function Np(r){return oe(t=>Rw(r,t))}var{isArray:Nw}=Array,{getPrototypeOf:kw,prototype:Pw,keys:Ow}=Object;function kp(r){if(r.length===1){let t=r[0];if(Nw(t))return{args:t,keys:null};if(Lw(t)){let e=Ow(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:r,keys:null}}function Lw(r){return r&&typeof r=="object"&&kw(r)===Pw}function Pp(r,t){return r.reduce((e,n,i)=>(e[n]=t[i],e),{})}function ki(...r){let t=Sn(r),e=wp(r),{args:n,keys:i}=kp(r);if(n.length===0)return be([],t);let s=new he(Fw(n,t,i?o=>Pp(i,o):ot));return e?s.pipe(Np(e)):s}function Fw(r,t,e=ot){return n=>{Op(t,()=>{let{length:i}=r,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)Op(t,()=>{let c=be(r[l],t),u=!1;c.subscribe(re(n,d=>{s[l]=d,u||(u=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}function Op(r,t,e){r?Je(e,r,t):t()}function Lp(r,t,e,n,i,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},f=g=>c<n?p(g):l.push(g),p=g=>{s&&t.next(g),c++;let v=!1;Fe(e(g,u++)).subscribe(re(t,m=>{i?.(m),s?f(m):t.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<n;){let m=l.shift();o?Je(t,o,()=>p(m)):p(m)}h()}catch(m){t.error(m)}}))};return r.subscribe(re(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Ee(r,t,e=1/0){return q(t)?Ee((n,i)=>oe((s,o)=>t(n,s,i,o))(Fe(r(n,i))),e):(typeof t=="number"&&(e=t),ne((n,i)=>Lp(n,i,r,e)))}function An(r=1/0){return Ee(ot,r)}function Fp(){return An(1)}function Mr(...r){return Fp()(be(r,Sn(r)))}function So(r){return new he(t=>{Fe(r()).subscribe(t)})}function at(r,t){return ne((e,n)=>{let i=0;e.subscribe(re(n,s=>r.call(t,s,i++)&&n.next(s)))})}function cn(r){return ne((t,e)=>{let n=null,i=!1,s;n=t.subscribe(re(e,void 0,void 0,o=>{s=Fe(r(o,cn(r)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):i=!0})),i&&(n.unsubscribe(),n=null,s.subscribe(e))})}function jp(r,t,e,n,i){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(re(o,u=>{let d=c++;l=a?r(l,u,d):(a=!0,u),n&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function In(r,t){return q(t)?Ee(r,t,1):Ee(r,1)}function xn(r){return ne((t,e)=>{let n=!1;t.subscribe(re(e,i=>{n=!0,e.next(i)},()=>{n||e.next(r),e.complete()}))})}function un(r){return r<=0?()=>Qe:ne((t,e)=>{let n=0;t.subscribe(re(e,i=>{++n<=r&&(e.next(i),r<=n&&e.complete())}))})}function Ao(r=jw){return ne((t,e)=>{let n=!1;t.subscribe(re(e,i=>{n=!0,e.next(i)},()=>n?e.complete():e.error(r())))})}function jw(){return new ln}function Pi(r){return ne((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}function dn(r,t){let e=arguments.length>=2;return n=>n.pipe(r?at((i,s)=>r(i,s,n)):ot,un(1),e?xn(t):Ao(()=>new ln))}function Rr(r){return r<=0?()=>Qe:ne((t,e)=>{let n=[];t.subscribe(re(e,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(let i of n)e.next(i);e.complete()},void 0,()=>{n=null}))})}function Sc(r,t){let e=arguments.length>=2;return n=>n.pipe(r?at((i,s)=>r(i,s,n)):ot,Rr(1),e?xn(t):Ao(()=>new ln))}function Ac(r,t){return ne(jp(r,t,arguments.length>=2,!0))}function Ic(...r){let t=Sn(r);return ne((e,n)=>{(t?Mr(r,e,t):Mr(r,e)).subscribe(n)})}function yt(r,t){return ne((e,n)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&n.complete();e.subscribe(re(n,l=>{i?.unsubscribe();let c=0,u=s++;Fe(r(l,u)).subscribe(i=re(n,d=>n.next(t?t(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xc(r){return ne((t,e)=>{Fe(r).subscribe(re(e,()=>e.complete(),Ni)),!e.closed&&t.subscribe(e)})}function Ve(r,t,e){let n=q(r)||t||e?{next:r,error:t,complete:e}:r;return n?ne((i,s)=>{var o;(o=n.subscribe)===null||o===void 0||o.call(n);let a=!0;i.subscribe(re(s,l=>{var c;(c=n.next)===null||c===void 0||c.call(n,l),s.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),s.complete()},l=>{var c;a=!1,(c=n.error)===null||c===void 0||c.call(n,l),s.error(l)},()=>{var l,c;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):ot}var Ag="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(t,e){super(Ig(t,e)),this.code=t}};function Bw(r){return`NG0${Math.abs(r)}`}function Ig(r,t){return`${Bw(r)}${t?": "+t:""}`}var xg=Symbol("InputSignalNode#UNSET"),Vw=ae(A({},fc),{transformFn:void 0,applyValueToInputSignal(r,t){hc(r,t)}});function Tg(r,t){let e=Object.create(Vw);e.value=r,e.transformFn=t?.transform;function n(){if(oc(e),e.value===xg){let i=null;throw new L(-950,i)}return e.value}return n[_r]=e,n}function Gi(r){return{toString:r}.toString()}var Io="__parameters__";function Hw(r){return function(...e){if(r){let n=r(...e);for(let i in n)this[i]=n[i]}}}function Mg(r,t,e){return Gi(()=>{let n=Hw(t);function i(...s){if(this instanceof i)return n.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Io)?l[Io]:Object.defineProperty(l,Io,{value:[]})[Io];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return i.prototype.ngMetadataName=r,i.annotationCls=i,i})}var Lc=globalThis;function ge(r){for(let t in r)if(r[t]===ge)return t;throw Error("Could not find renamed property on target object.")}function lt(r){if(typeof r=="string")return r;if(Array.isArray(r))return`[${r.map(lt).join(", ")}]`;if(r==null)return""+r;let t=r.overriddenName||r.name;if(t)return`${t}`;let e=r.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n>=0?e.slice(0,n):e}function Bp(r,t){return r?t?`${r} ${t}`:r:t||""}var $w=ge({__forward_ref__:ge});function Rg(r){return r.__forward_ref__=Rg,r.toString=function(){return lt(this())},r}function wt(r){return Ng(r)?r():r}function Ng(r){return typeof r=="function"&&r.hasOwnProperty($w)&&r.__forward_ref__===Rg}function F(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Wr(r){return{providers:r.providers||[],imports:r.imports||[]}}function sa(r){return Vp(r,Pg)||Vp(r,Og)}function kg(r){return sa(r)!==null}function Vp(r,t){return r.hasOwnProperty(t)?r[t]:null}function Uw(r){let t=r&&(r[Pg]||r[Og]);return t||null}function Hp(r){return r&&(r.hasOwnProperty($p)||r.hasOwnProperty(zw))?r[$p]:null}var Pg=ge({\u0275prov:ge}),$p=ge({\u0275inj:ge}),Og=ge({ngInjectableDef:ge}),zw=ge({ngInjectorDef:ge}),V=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=F({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Lg(r){return r&&!!r.\u0275providers}var Gw=ge({\u0275cmp:ge}),Ww=ge({\u0275dir:ge}),qw=ge({\u0275pipe:ge}),Yw=ge({\u0275mod:ge}),Oo=ge({\u0275fac:ge}),ji=ge({__NG_ELEMENT_ID__:ge}),Up=ge({__NG_ENV_ID__:ge});function Ft(r){return typeof r=="string"?r:r==null?"":String(r)}function Xw(r){return typeof r=="function"?r.name||r.toString():typeof r=="object"&&r!=null&&typeof r.type=="function"?r.type.name||r.type.toString():Ft(r)}function Fg(r,t){throw new L(-200,r)}function Iu(r,t){throw new L(-201,!1)}var Z=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(Z||{}),Fc;function jg(){return Fc}function bt(r){let t=Fc;return Fc=r,t}function Bg(r,t,e){let n=sa(r);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(e&Z.Optional)return null;if(t!==void 0)return t;Iu(r,"Injector")}var Kw={},Wn=Kw,jc="__NG_DI_FLAG__",Lo=class{injector;constructor(t){this.injector=t}retrieve(t,e){let n=e;return this.injector.get(t,n.optional?oo:Wn,n)}},Fo="ngTempTokenPath",Zw="ngTokenPath",Qw=/\n/gm,Jw="\u0275",zp="__source";function e0(r,t=Z.Default){if(Mi()===void 0)throw new L(-203,!1);if(Mi()===null)return Bg(r,void 0,t);{let e=Mi(),n;return e instanceof Lo?n=e.injector:n=e,n.get(r,t&Z.Optional?null:void 0,t)}}function U(r,t=Z.Default){return(jg()||e0)(wt(r),t)}function C(r,t=Z.Default){return U(r,oa(t))}function oa(r){return typeof r>"u"||typeof r=="number"?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Bc(r){let t=[];for(let e=0;e<r.length;e++){let n=wt(r[e]);if(Array.isArray(n)){if(n.length===0)throw new L(900,!1);let i,s=Z.Default;for(let o=0;o<n.length;o++){let a=n[o],l=t0(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}t.push(U(i,s))}else t.push(U(n))}return t}function Vg(r,t){return r[jc]=t,r.prototype[jc]=t,r}function t0(r){return r[jc]}function n0(r,t,e,n){let i=r[Fo];throw t[zp]&&i.unshift(t[zp]),r.message=r0(`
`+r.message,i,e,n),r[Zw]=i,r[Fo]=null,r}function r0(r,t,e,n=null){r=r&&r.charAt(0)===`
`&&r.charAt(1)==Jw?r.slice(2):r;let i=lt(t);if(Array.isArray(t))i=t.map(lt).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}i=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${i}]: ${r.replace(Qw,`
  `)}`}var i0=Vg(Mg("Optional"),8);var s0=Vg(Mg("SkipSelf"),4);function jr(r,t){let e=r.hasOwnProperty(Oo);return e?r[Oo]:null}function o0(r,t,e){if(r.length!==t.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],s=t[n];if(e&&(i=e(i),s=e(s)),s!==i)return!1}return!0}function a0(r){return r.flat(Number.POSITIVE_INFINITY)}function xu(r,t){r.forEach(e=>Array.isArray(e)?xu(e,t):t(e))}function Hg(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function jo(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}var Br={},jt=[],Bi=new V(""),$g=new V("",-1),Ug=new V(""),Bo=class{get(t,e=Wn){if(e===Wn){let n=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw n.name="NullInjectorError",n}return e}};function zg(r,t){let e=r[Yw]||null;if(!e&&t===!0)throw new Error(`Type ${lt(r)} does not have '\u0275mod' property.`);return e}function Yn(r){return r[Gw]||null}function l0(r){return r[Ww]||null}function c0(r){return r[qw]||null}function Tu(r){return{\u0275providers:r}}function u0(...r){return{\u0275providers:Gg(!0,r),\u0275fromNgModule:!0}}function Gg(r,...t){let e=[],n=new Set,i,s=o=>{e.push(o)};return xu(t,o=>{let a=o;Vc(a,s,[],n)&&(i||=[],i.push(a))}),i!==void 0&&Wg(i,s),e}function Wg(r,t){for(let e=0;e<r.length;e++){let{ngModule:n,providers:i}=r[e];Mu(i,s=>{t(s,n)})}}function Vc(r,t,e,n){if(r=wt(r),!r)return!1;let i=null,s=Hp(r),o=!s&&Yn(r);if(!s&&!o){let l=r.ngModule;if(s=Hp(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=r}let a=n.has(i);if(o){if(a)return!1;if(n.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Vc(c,t,e,n)}}else if(s){if(s.imports!=null&&!a){n.add(i);let c;try{xu(s.imports,u=>{Vc(u,t,e,n)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Wg(c,t)}if(!a){let c=jr(i)||(()=>new i);t({provide:i,useFactory:c,deps:jt},i),t({provide:Ug,useValue:i,multi:!0},i),t({provide:Bi,useValue:()=>U(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=r;Mu(l,u=>{t(u,c)})}}else return!1;return i!==r&&r.providers!==void 0}function Mu(r,t){for(let e of r)Lg(e)&&(e=e.\u0275providers),Array.isArray(e)?Mu(e,t):t(e)}var d0=ge({provide:String,useValue:ge});function qg(r){return r!==null&&typeof r=="object"&&d0 in r}function h0(r){return!!(r&&r.useExisting)}function f0(r){return!!(r&&r.useFactory)}function Hc(r){return typeof r=="function"}var aa=new V(""),To={},Gp={},Tc;function Ru(){return Tc===void 0&&(Tc=new Bo),Tc}var et=class{},Vi=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,n,i){super(),this.parent=e,this.source=n,this.scopes=i,Uc(t,o=>this.processProvider(o)),this.records.set($g,Nr(void 0,this)),i.has("environment")&&this.records.set(et,Nr(void 0,this));let s=this.records.get(aa);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ug,jt,Z.Self))}retrieve(t,e){let n=e;return this.get(t,n.optional?oo:Wn,n)}destroy(){Li(this),this._destroyed=!0;let t=se(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(t)}}onDestroy(t){return Li(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Li(this);let e=an(this),n=bt(void 0),i;try{return t()}finally{an(e),bt(n)}}get(t,e=Wn,n=Z.Default){if(Li(this),t.hasOwnProperty(Up))return t[Up](this);n=oa(n);let i,s=an(this),o=bt(void 0);try{if(!(n&Z.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=b0(t)&&sa(t);c&&this.injectableDefInScope(c)?l=Nr($c(t),To):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=n&Z.Self?Ru():this.parent;return e=n&Z.Optional&&e===Wn?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Fo]=a[Fo]||[]).unshift(lt(t)),s)throw a;return n0(a,t,"R3InjectorError",this.source)}else throw a}finally{bt(o),an(s)}}resolveInjectorInitializers(){let t=se(null),e=an(this),n=bt(void 0),i;try{let s=this.get(Bi,jt,Z.Self);for(let o of s)o()}finally{an(e),bt(n),se(t)}}toString(){let t=[],e=this.records;for(let n of e.keys())t.push(lt(n));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=wt(t);let e=Hc(t)?t:wt(t&&t.provide),n=g0(t);if(!Hc(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Nr(void 0,To,!0),i.factory=()=>Bc(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,n)}hydrate(t,e){let n=se(null);try{return e.value===Gp?Fg(lt(t)):e.value===To&&(e.value=Gp,e.value=e.factory()),typeof e.value=="object"&&e.value&&y0(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{se(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=wt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function $c(r){let t=sa(r),e=t!==null?t.factory:jr(r);if(e!==null)return e;if(r instanceof V)throw new L(204,!1);if(r instanceof Function)return p0(r);throw new L(204,!1)}function p0(r){if(r.length>0)throw new L(204,!1);let e=Uw(r);return e!==null?()=>e.factory(r):()=>new r}function g0(r){if(qg(r))return Nr(void 0,r.useValue);{let t=m0(r);return Nr(t,To)}}function m0(r,t,e){let n;if(Hc(r)){let i=wt(r);return jr(i)||$c(i)}else if(qg(r))n=()=>wt(r.useValue);else if(f0(r))n=()=>r.useFactory(...Bc(r.deps||[]));else if(h0(r))n=()=>U(wt(r.useExisting));else{let i=wt(r&&(r.useClass||r.provide));if(v0(r))n=()=>new i(...Bc(r.deps));else return jr(i)||$c(i)}return n}function Li(r){if(r.destroyed)throw new L(205,!1)}function Nr(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function v0(r){return!!r.deps}function y0(r){return r!==null&&typeof r=="object"&&typeof r.ngOnDestroy=="function"}function b0(r){return typeof r=="function"||typeof r=="object"&&r instanceof V}function Uc(r,t){for(let e of r)Array.isArray(e)?Uc(e,t):e&&Lg(e)?Uc(e.\u0275providers,t):t(e)}function Et(r,t){let e;r instanceof Vi?(Li(r),e=r):e=new Lo(r);let n,i=an(e),s=bt(void 0);try{return t()}finally{an(i),bt(s)}}function Yg(){return jg()!==void 0||Mi()!=null}function w0(r){if(!Yg())throw new L(-203,!1)}function _0(r){return typeof r=="function"}var gn=0,J=1,W=2,ze=3,xt=4,Mt=5,Vo=6,Ho=7,tt=8,Vr=9,hn=10,He=11,Hi=12,Wp=13,qr=14,Vt=15,Xn=16,kr=17,fn=18,la=19,Xg=20,Tn=21,Mc=22,$o=23,_t=24,Lr=25,pn=26,Kg=1;var Kn=7,Uo=8,Hr=9,ct=10;function Mn(r){return Array.isArray(r)&&typeof r[Kg]=="object"}function mn(r){return Array.isArray(r)&&r[Kg]===!0}function Zg(r){return(r.flags&4)!==0}function Yr(r){return r.componentOffset>-1}function Nu(r){return(r.flags&1)===1}function tr(r){return!!r.template}function zo(r){return(r[W]&512)!==0}function Wi(r){return(r[W]&256)===256}var zc=class{previousValue;currentValue;firstChange;constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}};function Qg(r,t,e,n){t!==null?t.applyValueToInputSignal(t,n):r[e]=n}var Xr=(()=>{let r=()=>Jg;return r.ngInherit=!0,r})();function Jg(r){return r.type.prototype.ngOnChanges&&(r.setInput=D0),E0}function E0(){let r=tm(this),t=r?.current;if(t){let e=r.previous;if(e===Br)r.previous=t;else for(let n in t)e[n]=t[n];r.current=null,this.ngOnChanges(t)}}function D0(r,t,e,n,i){let s=this.declaredInputs[n],o=tm(r)||C0(r,{previous:Br,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new zc(c&&c.currentValue,e,l===Br),Qg(r,t,i,e)}var em="__ngSimpleChanges__";function tm(r){return r[em]||null}function C0(r,t){return r[em]=t}var qp=null;var fe=function(r,t=null,e){qp?.(r,t,e)},S0="svg",A0="math";function Ht(r){for(;Array.isArray(r);)r=r[gn];return r}function I0(r,t){return Ht(t[r])}function Gt(r,t){return Ht(t[r.index])}function nm(r,t){return r.data[t]}function $t(r,t){let e=t[r];return Mn(e)?e:e[gn]}function x0(r){return(r[W]&4)===4}function ku(r){return(r[W]&128)===128}function T0(r){return mn(r[ze])}function Go(r,t){return t==null?null:r[t]}function rm(r){r[kr]=0}function im(r){r[W]&1024||(r[W]|=1024,ku(r)&&qi(r))}function M0(r,t){for(;r>0;)t=t[qr],r--;return t}function ca(r){return!!(r[W]&9216||r[_t]?.dirty)}function Gc(r){r[hn].changeDetectionScheduler?.notify(8),r[W]&64&&(r[W]|=1024),ca(r)&&qi(r)}function qi(r){r[hn].changeDetectionScheduler?.notify(0);let t=Zn(r);for(;t!==null&&!(t[W]&8192||(t[W]|=8192,!ku(t)));)t=Zn(t)}function sm(r,t){if(Wi(r))throw new L(911,!1);r[Tn]===null&&(r[Tn]=[]),r[Tn].push(t)}function R0(r,t){if(r[Tn]===null)return;let e=r[Tn].indexOf(t);e!==-1&&r[Tn].splice(e,1)}function Zn(r){let t=r[ze];return mn(t)?t[ze]:t}function Pu(r){return r[Ho]??=[]}function Ou(r){return r.cleanup??=[]}function N0(r,t,e,n){let i=Pu(t);i.push(e),r.firstCreatePass&&Ou(r).push(n,i.length-1)}var Q={lFrame:gm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wc=!1;function k0(){return Q.lFrame.elementDepthCount}function P0(){Q.lFrame.elementDepthCount++}function O0(){Q.lFrame.elementDepthCount--}function om(){return Q.bindingsEnabled}function L0(){return Q.skipHydrationRootTNode!==null}function F0(r){return Q.skipHydrationRootTNode===r}function j0(){Q.skipHydrationRootTNode=null}function ue(){return Q.lFrame.lView}function Dt(){return Q.lFrame.tView}function Kr(r){return Q.lFrame.contextLView=r,r[tt]}function Zr(r){return Q.lFrame.contextLView=null,r}function ut(){let r=am();for(;r!==null&&r.type===64;)r=r.parent;return r}function am(){return Q.lFrame.currentTNode}function B0(){let r=Q.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}function Yi(r,t){let e=Q.lFrame;e.currentTNode=r,e.isParent=t}function lm(){return Q.lFrame.isParent}function V0(){Q.lFrame.isParent=!1}function cm(){return Wc}function Yp(r){let t=Wc;return Wc=r,t}function H0(){let r=Q.lFrame,t=r.bindingRootIndex;return t===-1&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function um(){return Q.lFrame.bindingIndex}function $0(r){return Q.lFrame.bindingIndex=r}function Lu(){return Q.lFrame.bindingIndex++}function dm(r){let t=Q.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function U0(){return Q.lFrame.inI18n}function z0(r,t){let e=Q.lFrame;e.bindingIndex=e.bindingRootIndex=r,qc(t)}function G0(){return Q.lFrame.currentDirectiveIndex}function qc(r){Q.lFrame.currentDirectiveIndex=r}function hm(){return Q.lFrame.currentQueryIndex}function Fu(r){Q.lFrame.currentQueryIndex=r}function W0(r){let t=r[J];return t.type===2?t.declTNode:t.type===1?r[Mt]:null}function fm(r,t,e){if(e&Z.SkipSelf){let i=t,s=r;for(;i=i.parent,i===null&&!(e&Z.Host);)if(i=W0(s),i===null||(s=s[qr],i.type&10))break;if(i===null)return!1;t=i,r=s}let n=Q.lFrame=pm();return n.currentTNode=t,n.lView=r,!0}function ju(r){let t=pm(),e=r[J];Q.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function pm(){let r=Q.lFrame,t=r===null?null:r.child;return t===null?gm(r):t}function gm(r){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return r!==null&&(r.child=t),t}function mm(){let r=Q.lFrame;return Q.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}var vm=mm;function Bu(){let r=mm();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function q0(r){return(Q.lFrame.contextLView=M0(r,Q.lFrame.contextLView))[tt]}function Xi(){return Q.lFrame.selectedIndex}function Qn(r){Q.lFrame.selectedIndex=r}function Vu(){let r=Q.lFrame;return nm(r.tView,r.selectedIndex)}function Y0(){return Q.lFrame.currentNamespace}var ym=!0;function Hu(){return ym}function $u(r){ym=r}function X0(r,t,e){let{ngOnChanges:n,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(n){let o=Jg(t);(e.preOrderHooks??=[]).push(r,o),(e.preOrderCheckHooks??=[]).push(r,o)}i&&(e.preOrderHooks??=[]).push(0-r,i),s&&((e.preOrderHooks??=[]).push(r,s),(e.preOrderCheckHooks??=[]).push(r,s))}function bm(r,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){let s=r.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(r.contentHooks??=[]).push(-e,o),a&&((r.contentHooks??=[]).push(e,a),(r.contentCheckHooks??=[]).push(e,a)),l&&(r.viewHooks??=[]).push(-e,l),c&&((r.viewHooks??=[]).push(e,c),(r.viewCheckHooks??=[]).push(e,c)),u!=null&&(r.destroyHooks??=[]).push(e,u)}}function Mo(r,t,e){wm(r,t,3,e)}function Ro(r,t,e,n){(r[W]&3)===e&&wm(r,t,e,n)}function Rc(r,t){let e=r[W];(e&3)===t&&(e&=16383,e+=1,r[W]=e)}function wm(r,t,e,n){let i=n!==void 0?r[kr]&65535:0,s=n??-1,o=t.length-1,a=0;for(let l=i;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],n!=null&&a>=n)break}else t[l]<0&&(r[kr]+=65536),(a<s||s==-1)&&(K0(r,e,t,l),r[kr]=(r[kr]&4294901760)+l+2),l++}function Xp(r,t){fe(4,r,t);let e=se(null);try{t.call(r)}finally{se(e),fe(5,r,t)}}function K0(r,t,e,n){let i=e[n]<0,s=e[n+1],o=i?-e[n]:e[n],a=r[o];i?r[W]>>14<r[kr]>>16&&(r[W]&3)===t&&(r[W]+=16384,Xp(a,s)):Xp(a,s)}var Fr=-1,$i=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,n){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=n}};function Z0(r){return(r.flags&8)!==0}function Q0(r){return(r.flags&16)!==0}function J0(r,t,e){let n=0;for(;n<e.length;){let i=e[n];if(typeof i=="number"){if(i!==0)break;n++;let s=e[n++],o=e[n++],a=e[n++];r.setAttribute(t,o,a,s)}else{let s=i,o=e[++n];e_(s)?r.setProperty(t,s,o):r.setAttribute(t,s,o),n++}}return n}function _m(r){return r===3||r===4||r===6}function e_(r){return r.charCodeAt(0)===64}function Uu(r,t){if(!(t===null||t.length===0))if(r===null||r.length===0)r=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){let i=t[n];typeof i=="number"?e=i:e===0||(e===-1||e===2?Kp(r,e,i,null,t[++n]):Kp(r,e,i,null,null))}}return r}function Kp(r,t,e,n,i){let s=0,o=r.length;if(t===-1)o=-1;else for(;s<r.length;){let a=r[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<r.length;){let a=r[s];if(typeof a=="number")break;if(a===e){i!==null&&(r[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(r.splice(o,0,t),s=o+1),r.splice(s++,0,e),i!==null&&r.splice(s++,0,i)}function Em(r){return r!==Fr}function Wo(r){return r&32767}function t_(r){return r>>16}function qo(r,t){let e=t_(r),n=t;for(;e>0;)n=n[qr],e--;return n}var Yc=!0;function Zp(r){let t=Yc;return Yc=r,t}var n_=256,Dm=n_-1,Cm=5,r_=0,Bt={};function i_(r,t,e){let n;typeof e=="string"?n=e.charCodeAt(0)||0:e.hasOwnProperty(ji)&&(n=e[ji]),n==null&&(n=e[ji]=r_++);let i=n&Dm,s=1<<i;t.data[r+(i>>Cm)]|=s}function Sm(r,t){let e=Am(r,t);if(e!==-1)return e;let n=t[J];n.firstCreatePass&&(r.injectorIndex=t.length,Nc(n.data,r),Nc(t,null),Nc(n.blueprint,null));let i=zu(r,t),s=r.injectorIndex;if(Em(i)){let o=Wo(i),a=qo(i,t),l=a[J].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=i,s}function Nc(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Am(r,t){return r.injectorIndex===-1||r.parent&&r.parent.injectorIndex===r.injectorIndex||t[r.injectorIndex+8]===null?-1:r.injectorIndex}function zu(r,t){if(r.parent&&r.parent.injectorIndex!==-1)return r.parent.injectorIndex;let e=0,n=null,i=t;for(;i!==null;){if(n=Rm(i),n===null)return Fr;if(e++,i=i[qr],n.injectorIndex!==-1)return n.injectorIndex|e<<16}return Fr}function s_(r,t,e){i_(r,t,e)}function o_(r,t){if(t==="class")return r.classes;if(t==="style")return r.styles;let e=r.attrs;if(e){let n=e.length,i=0;for(;i<n;){let s=e[i];if(_m(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<n&&typeof e[i]=="string";)i++;else{if(s===t)return e[i+1];i=i+2}}}return null}function Im(r,t,e){if(e&Z.Optional||r!==void 0)return r;Iu(t,"NodeInjector")}function xm(r,t,e,n){if(e&Z.Optional&&n===void 0&&(n=null),(e&(Z.Self|Z.Host))===0){let i=r[Vr],s=bt(void 0);try{return i?i.get(t,n,e&Z.Optional):Bg(t,n,e&Z.Optional)}finally{bt(s)}}return Im(n,t,e)}function Tm(r,t,e,n=Z.Default,i){if(r!==null){if(t[W]&2048&&!(n&Z.Self)){let o=u_(r,t,e,n,Bt);if(o!==Bt)return o}let s=Mm(r,t,e,n,Bt);if(s!==Bt)return s}return xm(t,e,n,i)}function Mm(r,t,e,n,i){let s=l_(e);if(typeof s=="function"){if(!fm(t,r,n))return n&Z.Host?Im(i,e,n):xm(t,e,n,i);try{let o;if(o=s(n),o==null&&!(n&Z.Optional))Iu(e);else return o}finally{vm()}}else if(typeof s=="number"){let o=null,a=Am(r,t),l=Fr,c=n&Z.Host?t[Vt][Mt]:null;for((a===-1||n&Z.SkipSelf)&&(l=a===-1?zu(r,t):t[a+8],l===Fr||!Jp(n,!1)?a=-1:(o=t[J],a=Wo(l),t=qo(l,t)));a!==-1;){let u=t[J];if(Qp(s,a,u.data)){let d=a_(a,t,e,o,n,c);if(d!==Bt)return d}l=t[a+8],l!==Fr&&Jp(n,t[J].data[a+8]===c)&&Qp(s,a,t)?(o=u,a=Wo(l),t=qo(l,t)):a=-1}}return i}function a_(r,t,e,n,i,s){let o=t[J],a=o.data[r+8],l=n==null?Yr(a)&&Yc:n!=o&&(a.type&3)!==0,c=i&Z.Host&&s===a,u=No(a,o,e,l,c);return u!==null?Yo(t,o,u,a):Bt}function No(r,t,e,n,i){let s=r.providerIndexes,o=t.data,a=s&1048575,l=r.directiveStart,c=r.directiveEnd,u=s>>20,d=n?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(i){let f=o[l];if(f&&tr(f)&&f.type===e)return l}return null}function Yo(r,t,e,n){let i=r[e],s=t.data;if(i instanceof $i){let o=i;o.resolving&&Fg(Xw(s[e]));let a=Zp(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?bt(o.injectImpl):null,u=fm(r,n,Z.Default);try{i=r[e]=o.factory(void 0,s,r,n),t.firstCreatePass&&e>=n.directiveStart&&X0(e,s[e],t)}finally{c!==null&&bt(c),Zp(a),o.resolving=!1,vm()}}return i}function l_(r){if(typeof r=="string")return r.charCodeAt(0)||0;let t=r.hasOwnProperty(ji)?r[ji]:void 0;return typeof t=="number"?t>=0?t&Dm:c_:t}function Qp(r,t,e){let n=1<<r;return!!(e[t+(r>>Cm)]&n)}function Jp(r,t){return!(r&Z.Self)&&!(r&Z.Host&&t)}var qn=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Tm(this._tNode,this._lView,t,oa(n),e)}};function c_(){return new qn(ut(),ue())}function Gu(r){return Gi(()=>{let t=r.prototype.constructor,e=t[Oo]||Xc(t),n=Object.prototype,i=Object.getPrototypeOf(r.prototype).constructor;for(;i&&i!==n;){let s=i[Oo]||Xc(i);if(s&&s!==e)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Xc(r){return Ng(r)?()=>{let t=Xc(wt(r));return t&&t()}:jr(r)}function u_(r,t,e,n,i){let s=r,o=t;for(;s!==null&&o!==null&&o[W]&2048&&!zo(o);){let a=Mm(s,o,e,n|Z.Self,Bt);if(a!==Bt)return a;let l=s.parent;if(!l){let c=o[Xg];if(c){let u=c.get(e,Bt,n);if(u!==Bt)return u}l=Rm(o),o=o[qr]}s=l}return i}function Rm(r){let t=r[J],e=t.type;return e===2?t.declTNode:e===1?r[Mt]:null}function Wu(r){return o_(ut(),r)}function eg(r,t=null,e=null,n){let i=Nm(r,t,e,n);return i.resolveInjectorInitializers(),i}function Nm(r,t=null,e=null,n,i=new Set){let s=[e||jt,u0(r)];return n=n||(typeof r=="object"?void 0:lt(r)),new Vi(s,t||Ru(),n||null,i)}var Tt=class r{static THROW_IF_NOT_FOUND=Wn;static NULL=new Bo;static create(t,e){if(Array.isArray(t))return eg({name:""},e,t,"");{let n=t.name??"";return eg({name:n},t.parent,t.providers,n)}}static \u0275prov=F({token:r,providedIn:"any",factory:()=>U($g)});static __NG_ELEMENT_ID__=-1};var d_=new V("");d_.__NG_ELEMENT_ID__=r=>{let t=ut();if(t===null)throw new L(204,!1);if(t.type&2)return t.value;if(r&Z.Optional)return null;throw new L(204,!1)};var km=!1,Ki=(()=>{class r{static __NG_ELEMENT_ID__=h_;static __NG_ENV_ID__=e=>e}return r})(),Kc=class extends Ki{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return sm(this._lView,t),()=>R0(this._lView,t)}};function h_(){return new Kc(ue())}var $r=class{},Pm=new V("",{providedIn:"root",factory:()=>!1});var Om=new V(""),Lm=new V(""),Qr=(()=>{class r{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Be(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=F({token:r,providedIn:"root",factory:()=>new r})}return r})();var Zc=class extends ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Yg()&&(this.destroyRef=C(Ki,{optional:!0})??void 0,this.pendingTasks=C(Qr,{optional:!0})??void 0)}emit(t){let e=se(null);try{super.next(t)}finally{se(e)}}subscribe(t,e,n){let i=t,s=e||(()=>null),o=n;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return t instanceof Ce&&t.add(a),a}wrapInTimeout(t){return e=>{let n=this.pendingTasks?.add();setTimeout(()=>{t(e),n!==void 0&&this.pendingTasks?.remove(n)})}}},Ke=Zc;function Xo(...r){}function Fm(r){let t,e;function n(){r=Xo;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{r(),n()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{r(),n()})),()=>n()}function tg(r){return queueMicrotask(()=>r()),()=>{r=Xo}}var qu="isAngularZone",Ko=qu+"_ID",f_=0,Se=class r{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ke(!1);onMicrotaskEmpty=new Ke(!1);onStable=new Ke(!1);onError=new Ke(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=km}=t;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&n,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,m_(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qu)===!0}static assertInAngularZone(){if(!r.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(r.isInAngularZone())throw new L(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,p_,Xo,Xo);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}},p_={};function Yu(r){if(r._nesting==0&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function g_(r){if(r.isCheckStableRunning||r.callbackScheduled)return;r.callbackScheduled=!0;function t(){Fm(()=>{r.callbackScheduled=!1,Qc(r),r.isCheckStableRunning=!0,Yu(r),r.isCheckStableRunning=!1})}r.scheduleInRootZone?Zone.root.run(()=>{t()}):r._outer.run(()=>{t()}),Qc(r)}function m_(r){let t=()=>{g_(r)},e=f_++;r._inner=r._inner.fork({name:"angular",properties:{[qu]:!0,[Ko]:e,[Ko+e]:!0},onInvokeTask:(n,i,s,o,a,l)=>{if(v_(l))return n.invokeTask(s,o,a,l);try{return ng(r),n.invokeTask(s,o,a,l)}finally{(r.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||r.shouldCoalesceRunChangeDetection)&&t(),rg(r)}},onInvoke:(n,i,s,o,a,l,c)=>{try{return ng(r),n.invoke(s,o,a,l,c)}finally{r.shouldCoalesceRunChangeDetection&&!r.callbackScheduled&&!y_(l)&&t(),rg(r)}},onHasTask:(n,i,s,o)=>{n.hasTask(s,o),i===s&&(o.change=="microTask"?(r._hasPendingMicrotasks=o.microTask,Qc(r),Yu(r)):o.change=="macroTask"&&(r.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,s,o)=>(n.handleError(s,o),r.runOutsideAngular(()=>r.onError.emit(o)),!1)})}function Qc(r){r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&r.callbackScheduled===!0?r.hasPendingMicrotasks=!0:r.hasPendingMicrotasks=!1}function ng(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function rg(r){r._nesting--,Yu(r)}var Jc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ke;onMicrotaskEmpty=new Ke;onStable=new Ke;onError=new Ke;run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}};function v_(r){return jm(r,"__ignore_ng_zone__")}function y_(r){return jm(r,"__scheduler_tick__")}function jm(r,t){return!Array.isArray(r)||r.length!==1?!1:r[0]?.data?.[t]===!0}var Ut=class{_console=console;handleError(t){this._console.error("ERROR",t)}},b_=new V("",{providedIn:"root",factory:()=>{let r=C(Se),t=C(Ut);return e=>r.runOutsideAngular(()=>t.handleError(e))}});function ig(r,t){return Tg(r,t)}function w_(r){return Tg(xg,r)}var Bm=(ig.required=w_,ig);function __(){return Jr(ut(),ue())}function Jr(r,t){return new Wt(Gt(r,t))}var Wt=(()=>{class r{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=__}return r})();function E_(r){return r instanceof Wt?r.nativeElement:r}function D_(){return this._results[Symbol.iterator]()}var eu=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ke}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let n=a0(t);(this._changesDetected=!o0(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=D_};function Vm(r){return(r.flags&128)===128}var Hm=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(Hm||{}),$m=new Map,C_=0;function S_(){return C_++}function A_(r){$m.set(r[la],r)}function tu(r){$m.delete(r[la])}var sg="__ngContext__";function Zi(r,t){Mn(t)?(r[sg]=t[la],A_(t)):r[sg]=t}function Um(r){return Gm(r[Hi])}function zm(r){return Gm(r[xt])}function Gm(r){for(;r!==null&&!mn(r);)r=r[xt];return r}var nu;function Wm(r){nu=r}function I_(){if(nu!==void 0)return nu;if(typeof document<"u")return document;throw new L(210,!1)}var Xu=new V("",{providedIn:"root",factory:()=>x_}),x_="ng",Ku=new V(""),ei=new V("",{providedIn:"platform",factory:()=>"unknown"});var Zu=new V("",{providedIn:"root",factory:()=>I_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var T_="h",M_="b";var qm=!1,R_=new V("",{providedIn:"root",factory:()=>qm});var Qu=function(r){return r[r.CHANGE_DETECTION=0]="CHANGE_DETECTION",r[r.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",r}(Qu||{}),ti=new V(""),og=new Set;function Qi(r){og.has(r)||(og.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}var Ym=(()=>{class r{view;node;constructor(e,n){this.view=e,this.node=n}static __NG_ELEMENT_ID__=N_}return r})();function N_(){return new Ym(ue(),ut())}var Pr=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(Pr||{}),Xm=(()=>{class r{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:r,providedIn:"root",factory:()=>new r})}return r})(),k_=[Pr.EarlyRead,Pr.Write,Pr.MixedReadWrite,Pr.Read],P_=(()=>{class r{ngZone=C(Se);scheduler=C($r);errorHandler=C(Ut,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){C(ti,{optional:!0})}execute(){let e=this.sequences.size>0;e&&fe(16),this.executing=!0;for(let n of k_)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[n]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[n];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&fe(17)}register(e){let{view:n}=e;n!==void 0?((n[Lr]??=[]).push(e),qi(n),n[W]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,n){return n?n.run(Qu.AFTER_NEXT_RENDER,e):e()}static \u0275prov=F({token:r,providedIn:"root",factory:()=>new r})}return r})(),ru=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,n,i,s,o=null){this.impl=t,this.hooks=e,this.view=n,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Lr];t&&(this.view[Lr]=t.filter(e=>e!==this))}};function Ju(r,t){!t?.injector&&w0(Ju);let e=t?.injector??C(Tt);return Qi("NgAfterNextRender"),L_(r,e,t,!0)}function O_(r,t){if(r instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=r,e}else return[r.earlyRead,r.write,r.mixedReadWrite,r.read]}function L_(r,t,e,n){let i=t.get(Xm);i.impl??=t.get(P_);let s=t.get(ti,null,{optional:!0}),o=e?.phase??Pr.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Ki):null,l=t.get(Ym,null,{optional:!0}),c=new ru(i.impl,O_(r,o),l?.view,n,a,s?.snapshot(null));return i.impl.register(c),c}var F_=()=>null;function Km(r,t,e=!1){return F_(r,t,e)}function Zm(r,t){let e=r.contentQueries;if(e!==null){let n=se(null);try{for(let i=0;i<e.length;i+=2){let s=e[i],o=e[i+1];if(o!==-1){let a=r.data[o];Fu(s),a.contentQueries(2,t[o],o)}}}finally{se(n)}}}function iu(r,t,e){Fu(0);let n=se(null);try{t(r,e)}finally{se(n)}}function Qm(r,t,e){if(Zg(t)){let n=se(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let o=i;o<s;o++){let a=r.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{se(n)}}}var zt=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(zt||{});var xo;function j_(){if(xo===void 0&&(xo=null,Lc.trustedTypes))try{xo=Lc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return xo}function ag(r){return j_()?.createScriptURL(r)||r}var Zo=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ag})`}};function ed(r){return r instanceof Zo?r.changingThisBreaksApplicationSecurity:r}function Jm(r,t){let e=B_(r);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Ag})`)}return e===t}function B_(r){return r instanceof Zo&&r.getTypeName()||null}var V_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function H_(r){return r=String(r),r.match(V_)?r:"unsafe:"+r}var td=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(td||{});function Ct(r){let t=tv();return t?t.sanitize(td.URL,r)||"":Jm(r,"URL")?ed(r):H_(Ft(r))}function $_(r){let t=tv();if(t)return ag(t.sanitize(td.RESOURCE_URL,r)||"");if(Jm(r,"ResourceURL"))return ag(ed(r));throw new L(904,!1)}function U_(r,t){return t==="src"&&(r==="embed"||r==="frame"||r==="iframe"||r==="media"||r==="script")||t==="href"&&(r==="base"||r==="link")?$_:Ct}function ev(r,t,e){return U_(t,e)(r)}function tv(){let r=ue();return r&&r[hn].sanitizer}function nv(r){return r instanceof Function?r():r}function z_(r,t,e){let n=r.length;for(;;){let i=r.indexOf(t,e);if(i===-1)return i;if(i===0||r.charCodeAt(i-1)<=32){let s=t.length;if(i+s===n||r.charCodeAt(i+s)<=32)return i}e=i+1}}var rv="ng-template";function G_(r,t,e,n){let i=0;if(n){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&z_(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(nd(r))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===e)return!0}return!1}function nd(r){return r.type===4&&r.value!==rv}function W_(r,t,e){let n=r.type===4&&!e?rv:r.value;return t===n}function q_(r,t,e){let n=4,i=r.attrs,s=i!==null?K_(i):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!It(n)&&!It(l))return!1;if(o&&It(l))continue;o=!1,n=l|n&1;continue}if(!o)if(n&4){if(n=2|n&1,l!==""&&!W_(r,l,e)||l===""&&t.length===1){if(It(n))return!1;o=!0}}else if(n&8){if(i===null||!G_(r,i,l,e)){if(It(n))return!1;o=!0}}else{let c=t[++a],u=Y_(l,i,nd(r),e);if(u===-1){if(It(n))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),n&2&&c!==d){if(It(n))return!1;o=!0}}}}return It(n)||o}function It(r){return(r&1)===0}function Y_(r,t,e,n){if(t===null)return-1;let i=0;if(n||!e){let s=!1;for(;i<t.length;){let o=t[i];if(o===r)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Z_(t,r)}function X_(r,t,e=!1){for(let n=0;n<t.length;n++)if(q_(r,t[n],e))return!0;return!1}function K_(r){for(let t=0;t<r.length;t++){let e=r[t];if(_m(e))return t}return r.length}function Z_(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){let n=r[e];if(typeof n=="number")return-1;if(n===t)return e;e++}return-1}function lg(r,t){return r?":not("+t.trim()+")":t}function Q_(r){let t=r[0],e=1,n=2,i="",s=!1;for(;e<r.length;){let o=r[e];if(typeof o=="string")if(n&2){let a=r[++e];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else n&8?i+="."+o:n&4&&(i+=" "+o);else i!==""&&!It(o)&&(t+=lg(s,i),i=""),n=o,s=s||!It(n);e++}return i!==""&&(t+=lg(s,i)),t}function J_(r){return r.map(Q_).join(",")}function eE(r){let t=[],e=[],n=1,i=2;for(;n<r.length;){let s=r[n];if(typeof s=="string")i===2?s!==""&&t.push(s,r[++n]):i===8&&e.push(s);else{if(!It(i))break;i=s}n++}return e.length&&t.push(1,...e),t}var qt={};function tE(r,t){return r.createText(t)}function nE(r,t,e){r.setValue(t,e)}function iv(r,t,e){return r.createElement(t,e)}function Qo(r,t,e,n,i){r.insertBefore(t,e,n,i)}function sv(r,t,e){r.appendChild(t,e)}function cg(r,t,e,n,i){n!==null?Qo(r,t,e,n,i):sv(r,t,e)}function rE(r,t,e){r.removeChild(null,t,e)}function iE(r,t,e){r.setAttribute(t,"style",e)}function sE(r,t,e){e===""?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function ov(r,t,e){let{mergedAttrs:n,classes:i,styles:s}=e;n!==null&&J0(r,t,n),i!==null&&sE(r,t,i),s!==null&&iE(r,t,s)}function rd(r,t,e,n,i,s,o,a,l,c,u){let d=pn+n,h=d+i,f=oE(d,h),p=typeof c=="function"?c():c;return f[J]={type:r,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function oE(r,t){let e=[];for(let n=0;n<t;n++)e.push(n<r?null:qt);return e}function aE(r){let t=r.tView;return t===null||t.incompleteFirstPass?r.tView=rd(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):t}function id(r,t,e,n,i,s,o,a,l,c,u){let d=t.blueprint.slice();return d[gn]=i,d[W]=n|4|128|8|64|1024,(c!==null||r&&r[W]&2048)&&(d[W]|=2048),rm(d),d[ze]=d[qr]=r,d[tt]=e,d[hn]=o||r&&r[hn],d[He]=a||r&&r[He],d[Vr]=l||r&&r[Vr]||null,d[Mt]=s,d[la]=S_(),d[Vo]=u,d[Xg]=c,d[Vt]=t.type==2?r[Vt]:d,d}function lE(r,t,e){let n=Gt(t,r),i=aE(e),s=r[hn].rendererFactory,o=sd(r,id(r,i,null,av(e),n,t,null,s.createRenderer(n,e),null,null,null));return r[t.index]=o}function av(r){let t=16;return r.signals?t=4096:r.onPush&&(t=64),t}function lv(r,t,e,n){if(e===0)return-1;let i=t.length;for(let s=0;s<e;s++)t.push(n),r.blueprint.push(n),r.data.push(null);return i}function sd(r,t){return r[Hi]?r[Wp][xt]=t:r[Hi]=t,r[Wp]=t,t}function z(r=1){cv(Dt(),ue(),Xi()+r,!1)}function cv(r,t,e,n){if(!n)if((t[W]&3)===3){let s=r.preOrderCheckHooks;s!==null&&Mo(t,s,e)}else{let s=r.preOrderHooks;s!==null&&Ro(t,s,0,e)}Qn(e)}var ua=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(ua||{});function su(r,t,e,n){let i=se(null);try{let[s,o,a]=r.inputs[e],l=null;(o&ua.SignalBased)!==0&&(l=t[s][_r]),l!==null&&l.transformFn!==void 0?n=l.transformFn(n):a!==null&&(n=a.call(t,n)),r.setInput!==null?r.setInput(t,l,n,e,s):Qg(t,l,s,n)}finally{se(i)}}function uv(r,t,e,n,i){let s=Xi(),o=n&2;try{Qn(-1),o&&t.length>pn&&cv(r,t,pn,!1),fe(o?2:0,i),e(n,i)}finally{Qn(s),fe(o?3:1,i)}}function od(r,t,e){pE(r,t,e),(e.flags&64)===64&&gE(r,t,e)}function dv(r,t,e=Gt){let n=t.localNames;if(n!==null){let i=t.index+1;for(let s=0;s<n.length;s+=2){let o=n[s+1],a=o===-1?e(t,r):r[o];r[i++]=a}}}function cE(r,t,e,n){let s=n.get(R_,qm)||e===zt.ShadowDom,o=r.selectRootElement(t,s);return uE(o),o}function uE(r){dE(r)}var dE=()=>null;function hE(r){return r==="class"?"className":r==="for"?"htmlFor":r==="formaction"?"formAction":r==="innerHtml"?"innerHTML":r==="readonly"?"readOnly":r==="tabindex"?"tabIndex":r}function hv(r,t,e,n,i,s,o,a){if(!a&&ad(t,r,e,n,i)){Yr(t)&&fE(e,t.index);return}if(t.type&3){let l=Gt(t,e);n=hE(n),i=o!=null?o(i,t.value||"",n):i,s.setProperty(l,n,i)}else t.type&12}function fE(r,t){let e=$t(t,r);e[W]&16||(e[W]|=64)}function pE(r,t,e){let n=e.directiveStart,i=e.directiveEnd;Yr(e)&&lE(t,e,r.data[n+e.componentOffset]),r.firstCreatePass||Sm(e,t);let s=e.initialInputs;for(let o=n;o<i;o++){let a=r.data[o],l=Yo(t,r,o,e);if(Zi(l,t),s!==null&&bE(t,o-n,l,a,e,s),tr(a)){let c=$t(e.index,t);c[tt]=Yo(t,r,o,e)}}}function gE(r,t,e){let n=e.directiveStart,i=e.directiveEnd,s=e.index,o=G0();try{Qn(s);for(let a=n;a<i;a++){let l=r.data[a],c=t[a];qc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&mE(l,c)}}finally{Qn(-1),qc(o)}}function mE(r,t){r.hostBindings!==null&&r.hostBindings(1,t)}function fv(r,t){let e=r.directiveRegistry,n=null;if(e)for(let i=0;i<e.length;i++){let s=e[i];X_(t,s.selectors,!1)&&(n??=[],tr(s)?n.unshift(s):n.push(s))}return n}function vE(r,t,e,n,i,s){let o=Gt(r,t);yE(t[He],o,s,r.value,e,n,i)}function yE(r,t,e,n,i,s,o){if(s==null)r.removeAttribute(t,i,e);else{let a=o==null?Ft(s):o(s,n||"",i);r.setAttribute(t,i,a,e)}}function bE(r,t,e,n,i,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];su(n,e,l,c)}}function wE(r,t){let e=r[Vr],n=e?e.get(Ut,null):null;n&&n.handleError(t)}function ad(r,t,e,n,i){let s=r.inputs?.[n],o=r.hostDirectiveInputs?.[n],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=t.data[c];su(d,e[c],u,i),a=!0}if(s)for(let l of s){let c=e[l],u=t.data[l];su(u,c,n,i),a=!0}return a}function _E(r,t){let e=$t(t,r),n=e[J];EE(n,e);let i=e[gn];i!==null&&e[Vo]===null&&(e[Vo]=Km(i,e[Vr])),fe(18),ld(n,e,e[tt]),fe(19,e[tt])}function EE(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])}function ld(r,t,e){ju(t);try{let n=r.viewQuery;n!==null&&iu(1,n,e);let i=r.template;i!==null&&uv(r,t,i,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),t[fn]?.finishViewCreation(r),r.staticContentQueries&&Zm(r,t),r.staticViewQueries&&iu(2,r.viewQuery,e);let s=r.components;s!==null&&DE(t,s)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{t[W]&=-5,Bu()}}function DE(r,t){for(let e=0;e<t.length;e++)_E(r,t[e])}function CE(r,t,e,n){let i=se(null);try{let s=t.tView,a=r[W]&4096?4096:16,l=id(r,s,e,a,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),c=r[t.index];l[Xn]=c;let u=r[fn];return u!==null&&(l[fn]=u.createEmbeddedView(s)),ld(s,l,e),l}finally{se(i)}}function ug(r,t){return!t||t.firstChild===null||Vm(r)}var SE;function cd(r,t){return SE(r,t)}var nr=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(nr||{});function pv(r){return(r.flags&32)===32}function Or(r,t,e,n,i){if(n!=null){let s,o=!1;mn(n)?s=n:Mn(n)&&(o=!0,n=n[gn]);let a=Ht(n);r===0&&e!==null?i==null?sv(t,e,a):Qo(t,e,a,i||null,!0):r===1&&e!==null?Qo(t,e,a,i||null,!0):r===2?rE(t,a,o):r===3&&t.destroyNode(a),s!=null&&FE(t,r,s,e,i)}}function AE(r,t){gv(r,t),t[gn]=null,t[Mt]=null}function IE(r,t,e,n,i,s){n[gn]=i,n[Mt]=t,da(r,n,e,1,i,s)}function gv(r,t){t[hn].changeDetectionScheduler?.notify(9),da(r,t,t[He],2,null,null)}function xE(r){let t=r[Hi];if(!t)return kc(r[J],r);for(;t;){let e=null;if(Mn(t))e=t[Hi];else{let n=t[ct];n&&(e=n)}if(!e){for(;t&&!t[xt]&&t!==r;)Mn(t)&&kc(t[J],t),t=t[ze];t===null&&(t=r),Mn(t)&&kc(t[J],t),e=t&&t[xt]}t=e}}function ud(r,t){let e=r[Hr],n=e.indexOf(t);e.splice(n,1)}function mv(r,t){if(Wi(t))return;let e=t[He];e.destroyNode&&da(r,t,e,3,null,null),xE(t)}function kc(r,t){if(Wi(t))return;let e=se(null);try{t[W]&=-129,t[W]|=256,t[_t]&&uc(t[_t]),ME(r,t),TE(r,t),t[J].type===1&&t[He].destroy();let n=t[Xn];if(n!==null&&mn(t[ze])){n!==t[ze]&&ud(n,t);let i=t[fn];i!==null&&i.detachView(r)}tu(t)}finally{se(e)}}function TE(r,t){let e=r.cleanup,n=t[Ho];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?n[a]():n[-a].unsubscribe(),o+=2}else{let a=n[e[o+1]];e[o].call(a)}n!==null&&(t[Ho]=null);let i=t[Tn];if(i!==null){t[Tn]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=t[$o];if(s!==null){t[$o]=null;for(let o of s)o.destroy()}}function ME(r,t){let e;if(r!=null&&(e=r.destroyHooks)!=null)for(let n=0;n<e.length;n+=2){let i=t[e[n]];if(!(i instanceof $i)){let s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];fe(4,a,l);try{l.call(a)}finally{fe(5,a,l)}}else{fe(4,i,s);try{s.call(i)}finally{fe(5,i,s)}}}}}function RE(r,t,e){return NE(r,t.parent,e)}function NE(r,t,e){let n=t;for(;n!==null&&n.type&168;)t=n,n=t.parent;if(n===null)return e[gn];if(Yr(n)){let{encapsulation:i}=r.data[n.directiveStart+n.componentOffset];if(i===zt.None||i===zt.Emulated)return null}return Gt(n,e)}function kE(r,t,e){return OE(r,t,e)}function PE(r,t,e){return r.type&40?Gt(r,e):null}var OE=PE,dg;function dd(r,t,e,n){let i=RE(r,n,t),s=t[He],o=n.parent||t[Mt],a=kE(o,n,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)cg(s,i,e[l],a,!1);else cg(s,i,e,a,!1);dg!==void 0&&dg(s,n,t,e,i)}function Fi(r,t){if(t!==null){let e=t.type;if(e&3)return Gt(t,r);if(e&4)return ou(-1,r[t.index]);if(e&8){let n=t.child;if(n!==null)return Fi(r,n);{let i=r[t.index];return mn(i)?ou(-1,i):Ht(i)}}else{if(e&128)return Fi(r,t.next);if(e&32)return cd(t,r)()||Ht(r[t.index]);{let n=vv(r,t);if(n!==null){if(Array.isArray(n))return n[0];let i=Zn(r[Vt]);return Fi(i,n)}else return Fi(r,t.next)}}}return null}function vv(r,t){if(t!==null){let n=r[Vt][Mt],i=t.projection;return n.projection[i]}return null}function ou(r,t){let e=ct+r+1;if(e<t.length){let n=t[e],i=n[J].firstChild;if(i!==null)return Fi(n,i)}return t[Kn]}function hd(r,t,e,n,i,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=n[e.index],l=e.type;if(o&&t===0&&(a&&Zi(Ht(a),n),e.flags|=2),!pv(e))if(l&8)hd(r,t,e.child,n,i,s,!1),Or(t,r,i,a,s);else if(l&32){let c=cd(e,n),u;for(;u=c();)Or(t,r,i,u,s);Or(t,r,i,a,s)}else l&16?LE(r,t,n,e,i,s):Or(t,r,i,a,s);e=o?e.projectionNext:e.next}}function da(r,t,e,n,i,s){hd(e,n,r.firstChild,t,i,s,!1)}function LE(r,t,e,n,i,s){let o=e[Vt],l=o[Mt].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Or(t,r,i,u,s)}else{let c=l,u=o[ze];Vm(n)&&(c.flags|=128),hd(r,t,c,u,i,s,!0)}}function FE(r,t,e,n,i){let s=e[Kn],o=Ht(e);s!==o&&Or(t,r,n,s,i);for(let a=ct;a<e.length;a++){let l=e[a];da(l[J],l,r,t,n,s)}}function Jo(r,t,e,n,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&n.push(Ht(s)),mn(s)&&jE(s,n);let o=e.type;if(o&8)Jo(r,t,e.child,n);else if(o&32){let a=cd(e,t),l;for(;l=a();)n.push(l)}else if(o&16){let a=vv(t,e);if(Array.isArray(a))n.push(...a);else{let l=Zn(t[Vt]);Jo(l[J],l,a,n,!0)}}e=i?e.projectionNext:e.next}return n}function jE(r,t){for(let e=ct;e<r.length;e++){let n=r[e],i=n[J].firstChild;i!==null&&Jo(n[J],n,i,t)}r[Kn]!==r[gn]&&t.push(r[Kn])}function yv(r){if(r[Lr]!==null){for(let t of r[Lr])t.impl.addSequence(t);r[Lr].length=0}}var bv=[];function BE(r){return r[_t]??VE(r)}function VE(r){let t=bv.pop()??Object.create($E);return t.lView=r,t}function HE(r){r.lView[_t]!==r&&(r.lView=null,bv.push(r))}var $E=ae(A({},ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:r=>{qi(r.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function UE(r){let t=r[_t]??Object.create(zE);return t.lView=r,t}var zE=ae(A({},ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:r=>{let t=Zn(r.lView);for(;t&&!wv(t[J]);)t=Zn(t);t&&im(t)},consumerOnSignalRead(){this.lView[_t]=this}});function wv(r){return r.type!==2}function _v(r){if(r[$o]===null)return;let t=!0;for(;t;){let e=!1;for(let n of r[$o])n.dirty&&(e=!0,n.zone===null||Zone.current===n.zone?n.run():n.zone.run(()=>n.run()));t=e&&!!(r[W]&8192)}}var GE=100;function Ev(r,t=!0,e=0){let i=r[hn].rendererFactory,s=!1;s||i.begin?.();try{WE(r,e)}catch(o){throw t&&wE(r,o),o}finally{s||i.end?.()}}function WE(r,t){let e=cm();try{Yp(!0),au(r,t);let n=0;for(;ca(r);){if(n===GE)throw new L(103,!1);n++,au(r,1)}}finally{Yp(e)}}function qE(r,t,e,n){if(Wi(t))return;let i=t[W],s=!1,o=!1;ju(t);let a=!0,l=null,c=null;s||(wv(r)?(c=BE(t),l=lc(c)):sc()===null?(a=!1,c=UE(t),l=lc(c)):t[_t]&&(uc(t[_t]),t[_t]=null));try{rm(t),$0(r.bindingStartIndex),e!==null&&uv(r,t,e,2,n);let u=(i&3)===3;if(!s)if(u){let f=r.preOrderCheckHooks;f!==null&&Mo(t,f,null)}else{let f=r.preOrderHooks;f!==null&&Ro(t,f,0,null),Rc(t,0)}if(o||YE(t),_v(t),Dv(t,0),r.contentQueries!==null&&Zm(r,t),!s)if(u){let f=r.contentCheckHooks;f!==null&&Mo(t,f)}else{let f=r.contentHooks;f!==null&&Ro(t,f,1),Rc(t,1)}KE(r,t);let d=r.components;d!==null&&Sv(t,d,0);let h=r.viewQuery;if(h!==null&&iu(2,h,n),!s)if(u){let f=r.viewCheckHooks;f!==null&&Mo(t,f)}else{let f=r.viewHooks;f!==null&&Ro(t,f,2),Rc(t,2)}if(r.firstUpdatePass===!0&&(r.firstUpdatePass=!1),t[Mc]){for(let f of t[Mc])f();t[Mc]=null}s||(yv(t),t[W]&=-73)}catch(u){throw s||qi(t),u}finally{c!==null&&(op(c,l),a&&HE(c)),Bu()}}function Dv(r,t){for(let e=Um(r);e!==null;e=zm(e))for(let n=ct;n<e.length;n++){let i=e[n];Cv(i,t)}}function YE(r){for(let t=Um(r);t!==null;t=zm(t)){if(!(t[W]&2))continue;let e=t[Hr];for(let n=0;n<e.length;n++){let i=e[n];im(i)}}}function XE(r,t,e){fe(18);let n=$t(t,r);Cv(n,e),fe(19,n[tt])}function Cv(r,t){ku(r)&&au(r,t)}function au(r,t){let n=r[J],i=r[W],s=r[_t],o=!!(t===0&&i&16);if(o||=!!(i&64&&t===0),o||=!!(i&1024),o||=!!(s?.dirty&&cc(s)),o||=!1,s&&(s.dirty=!1),r[W]&=-9217,o)qE(n,r,n.template,r[tt]);else if(i&8192){_v(r),Dv(r,1);let a=n.components;a!==null&&Sv(r,a,1),yv(r)}}function Sv(r,t,e){for(let n=0;n<t.length;n++)XE(r,t[n],e)}function KE(r,t){let e=r.hostBindingOpCodes;if(e!==null)try{for(let n=0;n<e.length;n++){let i=e[n];if(i<0)Qn(~i);else{let s=i,o=e[++n],a=e[++n];z0(o,s);let l=t[s];fe(24,l),a(2,l),fe(25,l)}}}finally{Qn(-1)}}function fd(r,t){let e=cm()?64:1088;for(r[hn].changeDetectionScheduler?.notify(t);r;){r[W]|=e;let n=Zn(r);if(zo(r)&&!n)return r;r=n}return null}function Av(r,t,e,n){return[r,!0,0,t,null,n,null,e,null,null]}function ZE(r,t,e,n=!0){let i=t[J];if(QE(i,t,r,e),n){let o=ou(e,r),a=t[He],l=a.parentNode(r[Kn]);l!==null&&IE(i,r[Mt],a,t,l,o)}let s=t[Vo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function lu(r,t){if(r.length<=ct)return;let e=ct+t,n=r[e];if(n){let i=n[Xn];i!==null&&i!==r&&ud(i,n),t>0&&(r[e-1][xt]=n[xt]);let s=jo(r,ct+t);AE(n[J],n);let o=s[fn];o!==null&&o.detachView(s[J]),n[ze]=null,n[xt]=null,n[W]&=-129}return n}function QE(r,t,e,n){let i=ct+n,s=e.length;n>0&&(e[i-1][xt]=t),n<s-ct?(t[xt]=e[i],Hg(e,ct+n,t)):(e.push(t),t[xt]=null),t[ze]=e;let o=t[Xn];o!==null&&e!==o&&Iv(o,t);let a=t[fn];a!==null&&a.insertView(r),Gc(t),t[W]|=128}function Iv(r,t){let e=r[Hr],n=t[ze];if(Mn(n))r[W]|=2;else{let i=n[ze][Vt];t[Vt]!==i&&(r[W]|=2)}e===null?r[Hr]=[t]:e.push(t)}var Ui=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[J];return Jo(e,t,e.firstChild,[])}constructor(t,e,n=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=n}get context(){return this._lView[tt]}set context(t){this._lView[tt]=t}get destroyed(){return Wi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ze];if(mn(t)){let e=t[Uo],n=e?e.indexOf(this):-1;n>-1&&(lu(t,n),jo(e,n))}this._attachedToViewContainer=!1}mv(this._lView[J],this._lView)}onDestroy(t){sm(this._lView,t)}markForCheck(){fd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Gc(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,Ev(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=zo(this._lView),e=this._lView[Xn];e!==null&&!t&&ud(e,this._lView),gv(this._lView[J],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=t;let e=zo(this._lView),n=this._lView[Xn];n!==null&&!e&&Iv(n,this._lView),Gc(this._lView)}};var Jn=(()=>{class r{static __NG_ELEMENT_ID__=tD}return r})(),JE=Jn,eD=class extends JE{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){let i=CE(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:n});return new Ui(i)}};function tD(){return pd(ut(),ue())}function pd(r,t){return r.type&4?new eD(t,r,Jr(r,t)):null}function gd(r,t,e,n,i){let s=r.data[t];if(s===null)s=nD(r,t,e,n,i),U0()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=n,s.attrs=i;let o=B0();s.injectorIndex=o===null?-1:o.injectorIndex}return Yi(s,!0),s}function nD(r,t,e,n,i){let s=am(),o=lm(),a=o?s:s&&s.parent,l=r.data[t]=iD(r,a,e,t,n,i);return rD(r,l,s,o),l}function rD(r,t,e,n){r.firstChild===null&&(r.firstChild=t),e!==null&&(n?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function iD(r,t,e,n,i,s){let o=t?t.injectorIndex:-1,a=0;return L0()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HN=new RegExp(`^(\\d+)*(${M_}|${T_})*(.*)`);var sD=()=>null;function hg(r,t){return sD(r,t)}var oD=class{},xv=class{},cu=class{resolveComponentFactory(t){throw Error(`No component factory found for ${lt(t)}.`)}},ha=class{static NULL=new cu},Ur=class{},ni=(()=>{class r{destroyNode=null;static __NG_ELEMENT_ID__=()=>aD()}return r})();function aD(){let r=ue(),t=ut(),e=$t(t.index,r);return(Mn(e)?e:r)[He]}var lD=(()=>{class r{static \u0275prov=F({token:r,providedIn:"root",factory:()=>null})}return r})();var Pc={},uu=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=oa(n);let i=this.injector.get(t,Pc,n);return i!==Pc||e===Pc?i:this.parentInjector.get(t,e,n)}};function fg(r,t,e){let n=e?r.styles:null,i=e?r.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)i=Bp(i,a);else if(s==2){let l=a,c=t[++o];n=Bp(n,l+": "+c+";")}}e?r.styles=n:r.stylesWithoutHost=n,e?r.classes=i:r.classesWithoutHost=i}function Ae(r,t=Z.Default){let e=ue();if(e===null)return U(r,t);let n=ut();return Tm(n,e,wt(r),t)}function Tv(){let r="invalid";throw new Error(r)}function Mv(r,t,e,n,i){let s=n===null?null:{"":-1},o=i(r,e);if(o!==null){let a,l=null,c=null,u=uD(o);u===null?a=o:[a,l,c]=u,fD(r,t,e,a,s,l,c)}s!==null&&n!==null&&cD(e,n,s)}function cD(r,t,e){let n=r.localNames=[];for(let i=0;i<t.length;i+=2){let s=e[t[i+1]];if(s==null)throw new L(-301,!1);n.push(t[i],s)}}function uD(r){let t=null,e=!1;for(let o=0;o<r.length;o++){let a=r[o];if(o===0&&tr(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let n=null,i=null,s=null;for(let o of r)o.findHostDirectiveDefs!==null&&(n??=[],i??=new Map,s??=new Map,dD(o,n,s,i)),o===t&&(n??=[],n.push(o));return n!==null?(n.push(...t===null?r:r.slice(1)),[n,i,s]):null}function dD(r,t,e,n){let i=t.length;r.findHostDirectiveDefs(r,t,n),e.set(r,[i,t.length-1])}function hD(r,t,e){t.componentOffset=e,(r.components??=[]).push(t.index)}function fD(r,t,e,n,i,s,o){let a=n.length,l=!1;for(let h=0;h<a;h++){let f=n[h];!l&&tr(f)&&(l=!0,hD(r,e,h)),s_(Sm(e,t),r,f.type)}bD(e,r.data.length,a);for(let h=0;h<a;h++){let f=n[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=lv(r,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=n[h];if(e.mergedAttrs=Uu(e.mergedAttrs,f.hostAttrs),gD(r,e,t,d,f),yD(d,f,i),o!==null&&o.has(f)){let[g,v]=o.get(f);e.directiveToIndex.set(f.type,[d,g+e.directiveStart,v+e.directiveStart])}else(s===null||!s.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((r.preOrderHooks??=[]).push(e.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}pD(r,e,s)}function pD(r,t,e){for(let n=t.directiveStart;n<t.directiveEnd;n++){let i=r.data[n];if(e===null||!e.has(i))pg(0,t,i,n),pg(1,t,i,n),mg(t,n,!1);else{let s=e.get(i);gg(0,t,s,n),gg(1,t,s,n),mg(t,n,!0)}}}function pg(r,t,e,n){let i=r===0?e.inputs:e.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;r===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(n),Rv(t,s)}}function gg(r,t,e,n){let i=r===0?e.inputs:e.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;r===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(n,s),Rv(t,o)}}function Rv(r,t){t==="class"?r.flags|=8:t==="style"&&(r.flags|=16)}function mg(r,t,e){let{attrs:n,inputs:i,hostDirectiveInputs:s}=r;if(n===null||!e&&i===null||e&&s===null||nd(r)){r.initialInputs??=[],r.initialInputs.push(null);return}let o=null,a=0;for(;a<n.length;){let l=n[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===t){o??=[],o.push(l,n[a+1]);break}}else if(e&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){o??=[],o.push(c[u+1],n[a+1]);break}}a+=2}r.initialInputs??=[],r.initialInputs.push(o)}function gD(r,t,e,n,i){r.data[n]=i;let s=i.factory||(i.factory=jr(i.type,!0)),o=new $i(s,tr(i),Ae);r.blueprint[n]=o,e[n]=o,mD(r,t,n,lv(r,e,i.hostVars,qt),i)}function mD(r,t,e,n,i){let s=i.hostBindings;if(s){let o=r.hostBindingOpCodes;o===null&&(o=r.hostBindingOpCodes=[]);let a=~t.index;vD(o)!=a&&o.push(a),o.push(e,n,s)}}function vD(r){let t=r.length;for(;t>0;){let e=r[--t];if(typeof e=="number"&&e<0)return e}return 0}function yD(r,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=r;tr(t)&&(e[""]=r)}}function bD(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function Nv(r,t,e,n,i,s,o,a){let l=t.consts,c=Go(l,o),u=gd(t,r,2,n,c);return s&&Mv(t,e,u,Go(l,a),i),u.mergedAttrs=Uu(u.mergedAttrs,u.attrs),u.attrs!==null&&fg(u,u.attrs,!1),u.mergedAttrs!==null&&fg(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function kv(r,t){bm(r,t),Zg(t)&&r.queries.elementEnd(t)}var ea=class extends ha{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Yn(t);return new zr(e,this.ngModule)}};function wD(r){return Object.keys(r).map(t=>{let[e,n,i]=r[t],s={propName:e,templateName:t,isSignal:(n&ua.SignalBased)!==0};return i&&(s.transform=i),s})}function _D(r){return Object.keys(r).map(t=>({propName:r[t],templateName:t}))}function ED(r,t,e){let n=t instanceof et?t:t?.injector;return n&&r.getStandaloneInjector!==null&&(n=r.getStandaloneInjector(n)||n),n?new uu(e,n):e}function DD(r){let t=r.get(Ur,null);if(t===null)throw new L(407,!1);let e=r.get(lD,null),n=r.get($r,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:n}}function CD(r,t){let e=(r.selectors[0][0]||"div").toLowerCase();return iv(t,e,e==="svg"?S0:e==="math"?A0:null)}var zr=class extends xv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=wD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=_D(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=J_(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,n,i){fe(22);let s=se(null);try{let o=this.componentDef,a=n?["ng-version","19.2.7"]:eE(this.componentDef.selectors[0]),l=rd(0,null,null,1,0,null,null,null,null,[a],null),c=ED(o,i||this.ngModule,t),u=DD(c),d=u.rendererFactory.createRenderer(null,o),h=n?cE(d,n,o.encapsulation,c):CD(o,d),f=id(null,l,null,512|av(o),null,null,u,d,c,null,Km(h,c,!0));f[pn]=h,ju(f);let p=null;try{let g=Nv(pn,l,f,"#host",()=>[this.componentDef],!0,0);h&&(ov(d,h,g),Zi(h,f)),od(l,f,g),Qm(l,g,f),kv(l,g),e!==void 0&&SD(g,this.ngContentSelectors,e),p=$t(g.index,f),f[tt]=p[tt],ld(l,f,null)}catch(g){throw p!==null&&tu(p),tu(f),g}finally{fe(23),Bu()}return new du(this.componentType,f)}finally{se(s)}}},du=class extends oD{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=nm(e[J],pn),this.location=Jr(this._tNode,e),this.instance=$t(this._tNode.index,e)[tt],this.hostView=this.changeDetectorRef=new Ui(e,void 0,!1),this.componentType=t}setInput(t,e){let n=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,s=ad(n,i[J],i,t,e);this.previousInputValues.set(t,e);let o=$t(n.index,i);fd(o,1)}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function SD(r,t,e){let n=r.projection=[];for(let i=0;i<t.length;i++){let s=e[i];n.push(s!=null&&s.length?Array.from(s):null)}}var Rn=(()=>{class r{static __NG_ELEMENT_ID__=AD}return r})();function AD(){let r=ut();return Ov(r,ue())}var ID=Rn,Pv=class extends ID{_lContainer;_hostTNode;_hostLView;constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Jr(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){let t=zu(this._hostTNode,this._hostLView);if(Em(t)){let e=qo(t,this._hostLView),n=Wo(t),i=e[J].data[n+8];return new qn(i,e)}else return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=vg(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){let i,s;typeof n=="number"?i=n:n!=null&&(i=n.index,s=n.injector);let o=hg(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,i,ug(this._hostTNode,o)),a}createComponent(t,e,n,i,s){let o=t&&!_0(t),a;if(o)a=e;else{let p=e||{};a=p.index,n=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?t:new zr(Yn(t)),c=n||this.parentInjector;if(!s&&l.ngModule==null){let g=(o?c:this.parentInjector).get(et,null);g&&(s=g)}let u=Yn(l.componentType??{}),d=hg(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,i,h,s);return this.insertImpl(f.hostView,a,ug(this._hostTNode,d)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,n){let i=t._lView;if(T0(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[ze],c=new Pv(l,l[Mt],l[ze]);c.detach(c.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return ZE(o,i,s,n),t.attachToViewContainerRef(),Hg(Oc(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=vg(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),n=lu(this._lContainer,e);n&&(jo(Oc(this._lContainer),e),mv(n[J],n))}detach(t){let e=this._adjustIndex(t,-1),n=lu(this._lContainer,e);return n&&jo(Oc(this._lContainer),e)!=null?new Ui(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function vg(r){return r[Uo]}function Oc(r){return r[Uo]||(r[Uo]=[])}function Ov(r,t){let e,n=t[r.index];return mn(n)?e=n:(e=Av(n,t,null,r),t[r.index]=e,sd(t,e)),TD(e,t,r,n),new Pv(e,r,t)}function xD(r,t){let e=r[He],n=e.createComment(""),i=Gt(t,r),s=e.parentNode(i);return Qo(e,s,n,e.nextSibling(i),!1),n}var TD=ND,MD=()=>!1;function RD(r,t,e){return MD(r,t,e)}function ND(r,t,e,n){if(r[Kn])return;let i;e.type&8?i=Ht(n):i=xD(t,e),r[Kn]=i}var hu=class r{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new r(this.queryList)}setDirty(){this.queryList.setDirty()}},fu=class r{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let n=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let s=0;s<n;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new r(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)md(t,e).matches!==null&&this.queries[e].setDirty()}},ta=class{flags;read;predicate;constructor(t,e,n=null){this.flags=e,this.read=n,typeof t=="string"?this.predicate=VD(t):this.predicate=t}},pu=class r{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){let i=e!==null?e.length:0,s=this.getByIndex(n).embeddedTView(t,i);s&&(s.indexInDeclarationView=n,e!==null?e.push(s):e=[s])}return e!==null?new r(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},gu=class r{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new r(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==e;)n=n.parent;return e===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){let s=n[i];this.matchTNodeWithReadOption(t,e,kD(e,s)),this.matchTNodeWithReadOption(t,e,No(e,t,s,!1,!1))}else n===Jn?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,No(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(n!==null){let i=this.metadata.read;if(i!==null)if(i===Wt||i===Rn||i===Jn&&e.type&4)this.addMatch(e.index,-2);else{let s=No(e,t,i,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function kD(r,t){let e=r.localNames;if(e!==null){for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1]}return null}function PD(r,t){return r.type&11?Jr(r,t):r.type&4?pd(r,t):null}function OD(r,t,e,n){return e===-1?PD(t,r):e===-2?LD(r,t,n):Yo(r,r[J],e,t)}function LD(r,t,e){if(e===Wt)return Jr(t,r);if(e===Jn)return pd(t,r);if(e===Rn)return Ov(t,r)}function Lv(r,t,e,n){let i=t[fn].queries[n];if(i.matches===null){let s=r.data,o=e.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(OD(t,u,o[l+1],e.metadata.read))}}i.matches=a}return i.matches}function mu(r,t,e,n){let i=r.queries.getByIndex(e),s=i.matches;if(s!==null){let o=Lv(r,t,i,e);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)n.push(o[a/2]);else{let c=s[a+1],u=t[-l];for(let d=ct;d<u.length;d++){let h=u[d];h[Xn]===h[ze]&&mu(h[J],h,c,n)}if(u[Hr]!==null){let d=u[Hr];for(let h=0;h<d.length;h++){let f=d[h];mu(f[J],f,c,n)}}}}}return n}function FD(r,t){return r[fn].queries[t].queryList}function Fv(r,t,e){let n=new eu((e&4)===4);return N0(r,t,n,n.destroy),(t[fn]??=new fu).queries.push(new hu(n))-1}function jD(r,t,e){let n=Dt();return n.firstCreatePass&&(jv(n,new ta(r,t,e),-1),(t&2)===2&&(n.staticViewQueries=!0)),Fv(n,ue(),t)}function BD(r,t,e,n){let i=Dt();if(i.firstCreatePass){let s=ut();jv(i,new ta(t,e,n),s.index),HD(i,r),(e&2)===2&&(i.staticContentQueries=!0)}return Fv(i,ue(),e)}function VD(r){return r.split(",").map(t=>t.trim())}function jv(r,t,e){r.queries===null&&(r.queries=new pu),r.queries.track(new gu(t,e))}function HD(r,t){let e=r.contentQueries||(r.contentQueries=[]),n=e.length?e[e.length-1]:-1;t!==n&&e.push(r.queries.length-1,t)}function md(r,t){return r.queries.getByIndex(t)}function $D(r,t){let e=r[J],n=md(e,t);return n.crossesNgTemplate?mu(e,r,t,[]):Lv(e,r,n,t)}var Gr=class{},vd=class{};var vu=class extends Gr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ea(this);constructor(t,e,n,i=!0){super(),this.ngModuleType=t,this._parent=e;let s=zg(t);this._bootstrapComponents=nv(s.bootstrap),this._r3Injector=Nm(t,e,[{provide:Gr,useValue:this},{provide:ha,useValue:this.componentFactoryResolver},...n],lt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},yu=class extends vd{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new vu(this.moduleType,t,[])}};var na=class extends Gr{injector;componentFactoryResolver=new ea(this);instance=null;constructor(t){super();let e=new Vi([...t.providers,{provide:Gr,useValue:this},{provide:ha,useValue:this.componentFactoryResolver}],t.parent||Ru(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ji(r,t,e=null){return new na({providers:r,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var UD=(()=>{class r{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let n=Gg(!1,e.type),i=n.length>0?Ji([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:r,providedIn:"environment",factory:()=>new r(U(et))})}return r})();function Ie(r){return Gi(()=>{let t=Bv(r),e=ae(A({},t),{decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Hm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&r.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(UD).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||zt.Emulated,styles:r.styles||jt,_:null,schemas:r.schemas||null,tView:null,id:""});t.standalone&&Qi("NgStandalone"),Vv(e);let n=r.dependencies;return e.directiveDefs=yg(n,!1),e.pipeDefs=yg(n,!0),e.id=YD(e),e})}function zD(r){return Yn(r)||l0(r)}function GD(r){return r!==null}function ri(r){return Gi(()=>({type:r.type,bootstrap:r.bootstrap||jt,declarations:r.declarations||jt,imports:r.imports||jt,exports:r.exports||jt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function WD(r,t){if(r==null)return Br;let e={};for(let n in r)if(r.hasOwnProperty(n)){let i=r[n],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=ua.None,l=null),e[s]=[n,a,l],t[s]=o}return e}function qD(r){if(r==null)return Br;let t={};for(let e in r)r.hasOwnProperty(e)&&(t[r[e]]=e);return t}function vn(r){return Gi(()=>{let t=Bv(r);return Vv(t),t})}function Bv(r){let t={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:t,inputConfig:r.inputs||Br,exportAs:r.exportAs||null,standalone:r.standalone??!0,signals:r.signals===!0,selectors:r.selectors||jt,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:WD(r.inputs,t),outputs:qD(r.outputs),debugInfo:null}}function Vv(r){r.features?.forEach(t=>t(r))}function yg(r,t){if(!r)return null;let e=t?c0:zD;return()=>(typeof r=="function"?r():r).map(n=>e(n)).filter(GD)}function YD(r){let t=0,e=typeof r.consts=="function"?"":r.consts,n=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,e,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery];for(let s of n.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Hv(r){return KD(r)?Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r:!1}function XD(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{let e=r[Symbol.iterator](),n;for(;!(n=e.next()).done;)t(n.value)}}function KD(r){return r!==null&&(typeof r=="function"||typeof r=="object")}function ZD(r,t,e){return r[t]=e}function QD(r,t){return r[t]}function zi(r,t,e){let n=r[t];return Object.is(n,e)?!1:(r[t]=e,!0)}function bu(r,t,e,n){let i=zi(r,t,e);return zi(r,t+1,n)||i}function JD(r,t,e,n,i,s){let o=bu(r,t,e,n);return bu(r,t+2,i,s)||o}function eC(r,t,e,n,i,s,o,a,l){let c=t.consts,u=gd(t,r,4,o||null,a||null);om()&&Mv(t,e,u,Go(c,l),fv),u.mergedAttrs=Uu(u.mergedAttrs,u.attrs),bm(t,u);let d=u.tView=rd(2,u,n,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function tC(r,t,e,n,i,s,o,a,l,c){let u=e+pn,d=t.firstCreatePass?eC(u,t,r,n,i,s,o,a,l):t.data[u];Yi(d,!1);let h=nC(t,r,d,e);Hu()&&dd(t,r,h,d),Zi(h,r);let f=Av(h,r,h,d);return r[u]=f,sd(r,f),RD(f,d,r),Nu(d)&&od(t,r,d),l!=null&&dv(r,d,c),d}function Ze(r,t,e,n,i,s,o,a){let l=ue(),c=Dt(),u=Go(c.consts,s);return tC(l,c,r,t,e,n,i,u,o,a),Ze}var nC=rC;function rC(r,t,e,n){return $u(!0),t[He].createComment("")}var $v=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();var Uv=new V("");var iC=(()=>{class r{static \u0275prov=F({token:r,providedIn:"root",factory:()=>new wu})}return r})(),wu=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,n=this.queues.get(e);n.has(t)&&(n.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let n=this.queues.get(e);n.has(t)||(this.queuedEffectCount++,n.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function es(r){return!!r&&typeof r.then=="function"}function zv(r){return!!r&&typeof r.subscribe=="function"}var Gv=new V("");function yd(r){return Tu([{provide:Gv,multi:!0,useValue:r}])}var Wv=(()=>{class r{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n});appInits=C(Gv,{optional:!0})??[];injector=C(Tt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let s=Et(this.injector,i);if(es(s))e.push(s);else if(zv(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(i=>{this.reject(i)}),e.length===0&&n(),this.initialized=!0}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),fa=new V("");function sC(){dc(()=>{throw new L(600,!1)})}function oC(r){return r.isBoundToModule}var aC=10;var er=(()=>{class r{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=C(b_);afterRenderManager=C(Xm);zonelessEnabled=C(Pm);rootEffectScheduler=C(iC);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ke;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=C(Qr).hasPendingTasks.pipe(oe(e=>!e));constructor(){C(ti,{optional:!0})}whenStable(){let e;return new Promise(n=>{e=this.isStable.subscribe({next:i=>{i&&n()}})}).finally(()=>{e.unsubscribe()})}_injector=C(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,n){return this.bootstrapImpl(e,n)}bootstrapImpl(e,n,i=Tt.NULL){fe(10);let s=e instanceof xv;if(!this._injector.get(Wv).done){let f="";throw new L(405,f)}let a;s?a=e:a=this._injector.get(ha).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=oC(a)?void 0:this._injector.get(Gr),c=n||a.selector,u=a.create(i,[],c,l),d=u.location.nativeElement,h=u.injector.get(Uv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),ko(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),fe(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Qu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new L(101,!1);let e=se(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(e),this.afterTick.next(),fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ur,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<aC;)fe(14),this.synchronizeOnce(),fe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:n,notifyErrorHandler:i}of this.allViews)lC(n,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>ca(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){let n=e;ko(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(fa,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>ko(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new L(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ko(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function lC(r,t,e,n){if(!e&&!ca(r))return;Ev(r,t,e&&!n?0:1)}function bd(r,t,e,n){let i=ue(),s=Lu();if(zi(i,s,t)){let o=Dt(),a=Vu();vE(a,i,r,t,e,n)}return bd}function qv(r,t,e,n){return zi(r,Lu(),e)?t+Ft(e)+n:qt}function cC(r,t,e,n,i,s){let o=um(),a=bu(r,o,e,i);return dm(2),a?t+Ft(e)+n+Ft(i)+s:qt}function uC(r,t,e,n,i,s,o,a,l,c){let u=um(),d=JD(r,u,e,i,o,l);return dm(4),d?t+Ft(e)+n+Ft(i)+s+Ft(o)+a+Ft(l)+c:qt}function le(r,t,e){let n=ue(),i=Lu();if(zi(n,i,t)){let s=Dt(),o=Vu();hv(s,o,n,r,t,n[He],e,!1)}return le}function bg(r,t,e,n,i){ad(t,r,e,i?"class":"style",n)}function T(r,t,e,n){let i=ue(),s=Dt(),o=pn+r,a=i[He],l=s.firstCreatePass?Nv(o,s,i,t,fv,om(),e,n):s.data[o],c=dC(s,i,l,a,t,r);i[o]=c;let u=Nu(l);return Yi(l,!0),ov(a,c,l),!pv(l)&&Hu()&&dd(s,i,c,l),(k0()===0||u)&&Zi(c,i),P0(),u&&(od(s,i,l),Qm(s,l,i)),n!==null&&dv(i,l),T}function M(){let r=ut();lm()?V0():(r=r.parent,Yi(r,!1));let t=r;F0(t)&&j0(),O0();let e=Dt();return e.firstCreatePass&&kv(e,t),t.classesWithoutHost!=null&&Z0(t)&&bg(e,t,ue(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Q0(t)&&bg(e,t,ue(),t.stylesWithoutHost,!1),M}function H(r,t,e,n){return T(r,t,e,n),M(),H}var dC=(r,t,e,n,i,s)=>($u(!0),iv(n,i,Y0()));function ts(){return ue()}var ra="en-US";var hC=ra;function fC(r){typeof r=="string"&&(hC=r.toLowerCase().replace(/_/g,"-"))}function wg(r,t,e){return function n(i){if(i===Function)return e;let s=Yr(r)?$t(r.index,t):t;fd(s,5);let o=t[tt],a=_g(t,o,e,i),l=n.__ngNextListenerFn__;for(;l;)a=_g(t,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function _g(r,t,e,n){let i=se(null);try{return fe(6,t,e),e(n)!==!1}catch(s){return pC(r,s),!1}finally{fe(7,t,e),se(i)}}function pC(r,t){let e=r[Vr],n=e?e.get(Ut,null):null;n&&n.handleError(t)}function Eg(r,t,e,n,i,s){let o=t[e],a=t[J],c=a.data[e].outputs[n],u=o[c],d=a.firstCreatePass?Ou(a):null,h=Pu(t),f=u.subscribe(s),p=h.length;h.push(s,f),d&&d.push(i,r.index,p,-(p+1))}var gC=(r,t,e)=>{};function yn(r,t,e,n){let i=ue(),s=Dt(),o=ut();return vC(s,i,i[He],o,r,t,n),yn}function mC(r,t,e,n){let i=r.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===e&&i[s+1]===n){let a=t[Ho],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function vC(r,t,e,n,i,s,o){let a=Nu(n),c=r.firstCreatePass?Ou(r):null,u=Pu(t),d=!0;if(n.type&3||o){let h=Gt(n,t),f=o?o(h):h,p=u.length,g=o?m=>o(Ht(m[n.index])):n.index,v=null;if(!o&&a&&(v=mC(r,t,i,n.index)),v!==null){let m=v.__ngLastListenerFn__||v;m.__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1}else{s=wg(n,t,s),gC(f,i,s);let m=e.listen(f,i,s);u.push(s,m),c&&c.push(i,g,p,p+1)}}else s=wg(n,t,s);if(d){let h=n.outputs?.[i],f=n.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],v=f[p+1];Eg(n,t,g,v,i,s)}if(h&&h.length)for(let p of h)Eg(n,t,p,i,i,s)}}function dt(r=1){return q0(r)}function ii(r,t,e){return si(r,"",t,"",e),ii}function si(r,t,e,n,i){let s=ue(),o=qv(s,t,e,n);if(o!==qt){let a=Dt(),l=Vu();hv(a,l,s,r,o,s[He],i,!1)}return si}function Yv(r,t,e,n){BD(r,t,e,n)}function Xv(r,t,e){jD(r,t,e)}function pa(r){let t=ue(),e=Dt(),n=hm();Fu(n+1);let i=md(e,n);if(r.dirty&&x0(t)===((i.metadata.flags&2)===2)){if(i.matches===null)r.reset([]);else{let s=$D(t,n);r.reset(s,E_),r.notifyOnChanges()}return!0}return!1}function ga(){return FD(ue(),hm())}function K(r,t=""){let e=ue(),n=Dt(),i=r+pn,s=n.firstCreatePass?gd(n,i,1,t,null):n.data[i],o=yC(n,e,s,t,r);e[i]=o,Hu()&&dd(n,e,o,s),Yi(s,!1)}var yC=(r,t,e,n,i)=>($u(!0),tE(t[He],n));function $e(r){return rr("",r,""),$e}function rr(r,t,e){let n=ue(),i=qv(n,r,t,e);return i!==qt&&Ed(n,Xi(),i),rr}function wd(r,t,e,n,i){let s=ue(),o=cC(s,r,t,e,n,i);return o!==qt&&Ed(s,Xi(),o),wd}function _d(r,t,e,n,i,s,o,a,l){let c=ue(),u=uC(c,r,t,e,n,i,s,o,a,l);return u!==qt&&Ed(c,Xi(),u),_d}function Ed(r,t,e){let n=I0(t,r);nE(r[He],n,e)}function ir(r,t,e){let n=H0()+r,i=ue();return i[n]===qt?ZD(i,n,e?t.call(e):t()):QD(i,n)}var _u=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},ma=(()=>{class r{compileModuleSync(e){return new yu(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let n=this.compileModuleSync(e),i=zg(e),s=nv(i.declarations).reduce((o,a)=>{let l=Yn(a);return l&&o.push(new zr(l)),o},[]);return new _u(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var bC=(()=>{class r{zone=C(Se);changeDetectionScheduler=C($r);applicationRef=C(er);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function wC({ngZoneFactory:r,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return r??=()=>new Se(ae(A({},_C()),{scheduleInRootZone:e})),[{provide:Se,useFactory:r},{provide:Bi,multi:!0,useFactory:()=>{let n=C(bC,{optional:!0});return()=>n.initialize()}},{provide:Bi,multi:!0,useFactory:()=>{let n=C(EC);return()=>{n.initialize()}}},t===!0?{provide:Om,useValue:!0}:[],{provide:Lm,useValue:e??km}]}function _C(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}var EC=(()=>{class r{subscription=new Ce;initialized=!1;zone=C(Se);pendingTasks=C(Qr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var DC=(()=>{class r{appRef=C(er);taskService=C(Qr);ngZone=C(Se);zonelessEnabled=C(Pm);tracing=C(ti,{optional:!0});disableScheduling=C(Om,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ce;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ko):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(C(Lm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jc||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let n=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,n=!0;break}case 12:{this.appRef.dirtyFlags|=16,n=!0;break}case 13:{this.appRef.dirtyFlags|=2,n=!0;break}case 11:{n=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(n))return;let i=this.useMicrotaskScheduler?tg:Fm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ko+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(e),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function CC(){return typeof $localize<"u"&&$localize.locale||ra}var Dd=new V("",{providedIn:"root",factory:()=>C(Dd,Z.Optional|Z.SkipSelf)||CC()});var Eu=new V(""),SC=new V("");function Oi(r){return!r.moduleRef}function AC(r){let t=Oi(r)?r.r3Injector:r.moduleRef.injector,e=t.get(Se);return e.run(()=>{Oi(r)?r.r3Injector.resolveInjectorInitializers():r.moduleRef.resolveInjectorInitializers();let n=t.get(Ut,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:s=>{n.handleError(s)}})}),Oi(r)){let s=()=>t.destroy(),o=r.platformInjector.get(Eu);o.add(s),t.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>r.moduleRef.destroy(),o=r.platformInjector.get(Eu);o.add(s),r.moduleRef.onDestroy(()=>{ko(r.allPlatformModules,r.moduleRef),i.unsubscribe(),o.delete(s)})}return xC(n,e,()=>{let s=t.get(Wv);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(Dd,ra);if(fC(o||ra),!t.get(SC,!0))return Oi(r)?t.get(er):(r.allPlatformModules.push(r.moduleRef),r.moduleRef);if(Oi(r)){let l=t.get(er);return r.rootComponent!==void 0&&l.bootstrap(r.rootComponent),l}else return IC(r.moduleRef,r.allPlatformModules),r.moduleRef})})})}function IC(r,t){let e=r.injector.get(er);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(n=>e.bootstrap(n));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(e);else throw new L(-403,!1);t.push(r)}function xC(r,t,e){try{let n=e();return es(n)?n.catch(i=>{throw t.runOutsideAngular(()=>r.handleError(i)),i}):n}catch(n){throw t.runOutsideAngular(()=>r.handleError(n)),n}}var Po=null;function TC(r=[],t){return Tt.create({name:t,providers:[{provide:aa,useValue:"platform"},{provide:Eu,useValue:new Set([()=>Po=null])},...r]})}function MC(r=[]){if(Po)return Po;let t=TC(r);return Po=t,sC(),RC(t),t}function RC(r){let t=r.get(Ku,null);Et(r,()=>{t?.forEach(e=>e())})}var oi=(()=>{class r{static __NG_ELEMENT_ID__=NC}return r})();function NC(r){return kC(ut(),ue(),(r&16)===16)}function kC(r,t,e){if(Yr(r)&&!e){let n=$t(r.index,t);return new Ui(n,n)}else if(r.type&175){let n=t[Vt];return new Ui(n,t)}return null}var Du=class{constructor(){}supports(t){return Hv(t)}create(t){return new Cu(t)}},PC=(r,t)=>t,Cu=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||PC}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,s=null;for(;e||n;){let o=!n||e&&e.currentIndex<Dg(n,i,s)?e:n,a=Dg(o,i,s),l=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Hv(t))throw new L(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,n=!1,i,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),n=!0):(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else i=0,XD(t,a=>{o=this._trackByFn(i,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,i),n=!0):(n&&(e=this._verifyReinsertion(e,a,o,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(n,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,i)):t=this._addAfter(new Su(e,n),s,i)),t}_verifyReinsertion(t,e,n,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return s!==null?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,s=t._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new ia),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,n=t._next;return e===null?this._itHead=n:e._next=n,n===null?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ia),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Su=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Au=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;n!==null;n=n._nextDup)if((e===null||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){let e=t._prevDup,n=t._nextDup;return e===null?this._head=n:e._nextDup=n,n===null?this._tail=e:n._prevDup=e,this._head===null}},ia=class{map=new Map;put(t){let e=t.trackById,n=this.map.get(e);n||(n=new Au,this.map.set(e,n)),n.add(t)}get(t,e){let n=t,i=this.map.get(n);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Dg(r,t,e){let n=r.previousIndex;if(n===null)return n;let i=0;return e&&n<e.length&&(i=e[n]),n+t+i}function Cg(){return new Cd([new Du])}var Cd=(()=>{class r{factories;static \u0275prov=F({token:r,providedIn:"root",factory:Cg});constructor(e){this.factories=e}static create(e,n){if(n!=null){let i=n.factories.slice();e=e.concat(i)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||Cg()),deps:[[r,new s0,new i0]]}}find(e){let n=this.factories.find(i=>i.supports(e));if(n!=null)return n;throw new L(901,!1)}}return r})();function Kv(r){fe(8);try{let{rootComponent:t,appProviders:e,platformProviders:n}=r,i=MC(n),s=[wC({}),{provide:$r,useExisting:DC},...e||[]],o=new na({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return AC({r3Injector:o.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{fe(9)}}function ns(r){return typeof r=="boolean"?r:r!=null&&r!=="false"}var Sg=class{[_r];constructor(t){this[_r]=t}destroy(){this[_r].destroy()}};function Zv(r){let t=Yn(r);if(!t)return null;let e=new zr(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var je=new V("");var ey=null;function bn(){return ey}function Sd(r){ey??=r}var rs=class{},is=(()=>{class r{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(ty),providedIn:"platform"})}return r})(),Ad=new V(""),ty=(()=>{class r extends is{_location;_history;_doc=C(je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bn().getBaseHref(this._doc)}onPopState(e){let n=bn().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=bn().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,i){this._history.pushState(e,n,i)}replaceState(e,n,i){this._history.replaceState(e,n,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>new r,providedIn:"platform"})}return r})();function va(r,t){return r?t?r.endsWith("/")?t.startsWith("/")?r+t.slice(1):r+t:t.startsWith("/")?r+t:`${r}/${t}`:r:t}function Qv(r){let t=r.search(/#|\?|$/);return r[t-1]==="/"?r.slice(0,t-1)+r.slice(t):r}function Rt(r){return r&&r[0]!=="?"?`?${r}`:r}var Nt=(()=>{class r{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(ba),providedIn:"root"})}return r})(),ya=new V(""),ba=(()=>{class r extends Nt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,n){super(),this._platformLocation=e,this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??C(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return va(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+Rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${n}${i}`:n}pushState(e,n,i,s){let o=this.prepareExternalUrl(i+Rt(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,i,s){let o=this.prepareExternalUrl(i+Rt(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(n){return new(n||r)(U(is),U(ya,8))};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Nn=(()=>{class r{_subject=new ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=FC(Qv(Jv(n))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Rt(n))}normalize(e){return r.stripTrailingSlash(LC(this._basePath,Jv(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",i=null){this._locationStrategy.pushState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rt(n)),i)}replaceState(e,n="",i=null){this._locationStrategy.replaceState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rt(n)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(i=>i(e,n))}subscribe(e,n,i){return this._subject.subscribe({next:e,error:n??void 0,complete:i??void 0})}static normalizeQueryParams=Rt;static joinWithSlash=va;static stripTrailingSlash=Qv;static \u0275fac=function(n){return new(n||r)(U(Nt))};static \u0275prov=F({token:r,factory:()=>OC(),providedIn:"root"})}return r})();function OC(){return new Nn(U(Nt))}function LC(r,t){if(!r||!t.startsWith(r))return t;let e=t.substring(r.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Jv(r){return r.replace(/\/index.html$/,"")}function FC(r){if(new RegExp("^(https?:)?//").test(r)){let[,e]=r.split(/\/\/[^\/]+/);return e}return r}var xd=(()=>{class r extends Nt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,n){super(),this._platformLocation=e,n!=null&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(e){let n=va(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,i,s){let o=this.prepareExternalUrl(i+Rt(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,n,o)}replaceState(e,n,i,s){let o=this.prepareExternalUrl(i+Rt(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(n){return new(n||r)(U(is),U(ya,8))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})();var Id=/\s+/,ny=[],Td=(()=>{class r{_ngEl;_renderer;initialClasses=ny;rawClass;stateMap=new Map;constructor(e,n){this._ngEl=e,this._renderer=n}set klass(e){this.initialClasses=e!=null?e.trim().split(Id):ny}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Id):e}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let n of e)this._updateState(n,!0);else if(e!=null)for(let n of Object.keys(e))this._updateState(n,!!e[n]);this._applyStateDiff()}_updateState(e,n){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==n&&(i.changed=!0,i.enabled=n),i.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let n=e[0],i=e[1];i.changed?(this._toggleClass(n,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),i.touched=!1}}_toggleClass(e,n){e=e.trim(),e.length>0&&e.split(Id).forEach(i=>{n?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(n){return new(n||r)(Ae(Wt),Ae(ni))};static \u0275dir=vn({type:r,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return r})();var wa=class{$implicit;ngForOf;index;count;constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yt=(()=>{class r{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,n,i){this._viewContainer=e,this._template=n,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let n=this._viewContainer;e.forEachOperation((i,s,o)=>{if(i.previousIndex==null)n.createEmbeddedView(this._template,new wa(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)n.remove(s===null?void 0:s);else if(s!==null){let a=n.get(s);n.move(a,o),ry(a,i)}});for(let i=0,s=n.length;i<s;i++){let a=n.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let s=n.get(i.currentIndex);ry(s,i)})}static ngTemplateContextGuard(e,n){return!0}static \u0275fac=function(n){return new(n||r)(Ae(Rn),Ae(Jn),Ae(Cd))};static \u0275dir=vn({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return r})();function ry(r,t){r.context.$implicit=t.item}var ss=(()=>{class r{_viewContainer;_context=new _a;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,n){this._viewContainer=e,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){iy(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){iy(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,n){return!0}static \u0275fac=function(n){return new(n||r)(Ae(Rn),Ae(Jn))};static \u0275dir=vn({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return r})(),_a=class{$implicit=null;ngIf=null};function iy(r,t){if(r&&!r.createEmbeddedView)throw new L(2020,!1)}var We=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=ri({type:r});static \u0275inj=Wr({})}return r})();function Md(r,t){t=encodeURIComponent(t);for(let e of r.split(";")){let n=e.indexOf("="),[i,s]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var Rd="browser",sy="server";function Ea(r){return r===sy}var os=class{};var oy=(()=>{class r{static \u0275prov=F({token:r,providedIn:"root",factory:()=>new Nd(C(je),window)})}return r})(),Nd=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=jC(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],i-s[1])}};function jC(r,t){let e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if(typeof r.createTreeWalker=="function"&&r.body&&typeof r.body.attachShadow=="function"){let n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT),i=n.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=n.nextNode()}}return null}var Sa=new V(""),Ld=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,n){this._zone=n,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i,s){return this._findPluginFor(n).addEventListener(e,n,i,s)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new L(5101,!1);return this._eventNameToPlugin.set(e,n),n}static \u0275fac=function(n){return new(n||r)(U(Sa),U(Se))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})(),as=class{_doc;constructor(t){this._doc=t}manager},Da="ng-app-id";function ay(r){for(let t of r)t.remove()}function ly(r,t){let e=t.createElement("style");return e.textContent=r,e}function BC(r,t,e,n){let i=r.head?.querySelectorAll(`style[${Da}="${t}"],link[${Da}="${t}"]`);if(i)for(let s of i)s.removeAttribute(Da),s instanceof HTMLLinkElement?n.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Pd(r,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var Fd=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,n,i,s={}){this.doc=e,this.appId=n,this.nonce=i,this.isServer=Ea(s),BC(e,n,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,n){for(let i of e)this.addUsage(i,this.inline,ly);n?.forEach(i=>this.addUsage(i,this.external,Pd))}removeStyles(e,n){for(let i of e)this.removeUsage(i,this.inline);n?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,n,i){let s=n.get(e);s?s.usage++:n.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(e,this.doc)))})}removeUsage(e,n){let i=n.get(e);i&&(i.usage--,i.usage<=0&&(ay(i.elements),n.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])ay(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[n,{elements:i}]of this.inline)i.push(this.addElement(e,ly(n,this.doc)));for(let[n,{elements:i}]of this.external)i.push(this.addElement(e,Pd(n,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(Da,this.appId),e.appendChild(n)}static \u0275fac=function(n){return new(n||r)(U(je),U(Xu),U(Zu,8),U(ei))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})(),kd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jd=/%COMP%/g;var uy="%COMP%",VC=`_nghost-${uy}`,HC=`_ngcontent-${uy}`,$C=!0,UC=new V("",{providedIn:"root",factory:()=>$C});function zC(r){return HC.replace(jd,r)}function GC(r){return VC.replace(jd,r)}function dy(r,t){return t.map(e=>e.replace(jd,r))}var Bd=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,n,i,s,o,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=Ea(a),this.defaultRenderer=new ls(e,o,l,this.platformIsServer,this.tracingService)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===zt.ShadowDom&&(n=ae(A({},n),{encapsulation:zt.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof Ca?i.applyToHost(e):i instanceof cs&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,s=i.get(n.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(n.encapsulation){case zt.Emulated:s=new Ca(l,c,n,this.appId,u,o,a,d,h);break;case zt.ShadowDom:return new Od(l,c,e,n,o,a,this.nonce,d,h);default:s=new cs(l,c,n,u,o,a,d,h);break}i.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(n){return new(n||r)(U(Ld),U(Fd),U(Xu),U(UC),U(je),U(ei),U(Se),U(Zu),U(ti,8))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})(),ls=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,n,i,s){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(kd[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(cy(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(cy(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new L(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;let s=kd[i];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let i=kd[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(nr.DashCase|nr.Important)?t.style.setProperty(e,n,i&nr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&nr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n,i){if(typeof t=="string"&&(t=bn().getGlobalEventTarget(this.doc,t),!t))throw new L(5102,!1);let s=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function cy(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Od=class extends ls{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,n,i,s,o,a,l,c){super(t,s,o,l,c),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=dy(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=Pd(h,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cs=class extends ls{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,n,i,s,o,a,l,c){super(t,s,o,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=n.styles;this.styles=c?dy(c,u):u,this.styleUrls=n.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ca=class extends cs{contentAttr;hostAttr;constructor(t,e,n,i,s,o,a,l,c){let u=i+"-"+n.id;super(t,e,n,s,o,a,l,c,u),this.contentAttr=zC(u),this.hostAttr=GC(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}};var Aa=class r extends rs{supportsDOMEvents=!0;static makeCurrent(){Sd(new r)}onAndCancel(t,e,n,i){return t.addEventListener(e,n,i),()=>{t.removeEventListener(e,n,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=WC();return e==null?null:qC(e)}resetBaseElement(){us=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Md(document.cookie,t)}},us=null;function WC(){return us=us||document.querySelector("base"),us?us.getAttribute("href"):null}function qC(r){return new URL(r,document.baseURI).pathname}var YC=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})(),fy=(()=>{class r extends as{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i,s){return e.addEventListener(n,i,s),()=>this.removeEventListener(e,n,i,s)}removeEventListener(e,n,i,s){return e.removeEventListener(n,i,s)}static \u0275fac=function(n){return new(n||r)(U(je))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})(),hy=["alt","control","meta","shift"],XC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KC={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},py=(()=>{class r extends as{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,n,i,s){let o=r.parseEventName(n),a=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bn().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let s=r._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),hy.forEach(c=>{let u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let i=XC[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hy.forEach(o=>{if(o!==i){let a=KC[o];a(e)&&(s+=o+".")}}),s+=i,s===n)}static eventCallback(e,n,i){return s=>{r.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(n){return new(n||r)(U(je))};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})();function Vd(r,t){return Kv(A({rootComponent:r},ZC(t)))}function ZC(r){return{appProviders:[...nS,...r?.providers??[]],platformProviders:tS}}function QC(){Aa.makeCurrent()}function JC(){return new Ut}function eS(){return Wm(document),document}var tS=[{provide:ei,useValue:Rd},{provide:Ku,useValue:QC,multi:!0},{provide:je,useFactory:eS}];var nS=[{provide:aa,useValue:"root"},{provide:Ut,useFactory:JC},{provide:Sa,useClass:fy,multi:!0,deps:[je]},{provide:Sa,useClass:py,multi:!0,deps:[je]},Bd,Fd,Ld,{provide:Ur,useExisting:Bd},{provide:os,useClass:YC},[]];var gy=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(n){return new(n||r)(U(je))};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var X="primary",Ds=Symbol("RouteTitle"),Gd=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ar(r){return new Gd(r)}function Dy(r,t,e){let n=e.path.split("/");if(n.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<r.length))return null;let i={};for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function iS(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Xt(r[e],t[e]))return!1;return!0}function Xt(r,t){let e=r?Wd(r):void 0,n=t?Wd(t):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!Cy(r[i],t[i]))return!1;return!0}function Wd(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function Cy(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),n=[...t].sort();return e.every((i,s)=>n[s]===i)}else return r===t}function Sy(r){return r.length>0?r[r.length-1]:null}function Fn(r){return Cc(r)?r:es(r)?be(Promise.resolve(r)):$(r)}var sS={exact:Iy,subset:xy},Ay={exact:oS,subset:aS,ignored:()=>!0};function my(r,t,e){return sS[e.paths](r.root,t.root,e.matrixParams)&&Ay[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function oS(r,t){return Xt(r,t)}function Iy(r,t,e){if(!sr(r.segments,t.segments)||!Ta(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!r.children[n]||!Iy(r.children[n],t.children[n],e))return!1;return!0}function aS(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>Cy(r[e],t[e]))}function xy(r,t,e){return Ty(r,t,t.segments,e)}function Ty(r,t,e,n){if(r.segments.length>e.length){let i=r.segments.slice(0,e.length);return!(!sr(i,e)||t.hasChildren()||!Ta(i,e,n))}else if(r.segments.length===e.length){if(!sr(r.segments,e)||!Ta(r.segments,e,n))return!1;for(let i in t.children)if(!r.children[i]||!xy(r.children[i],t.children[i],n))return!1;return!0}else{let i=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!sr(r.segments,i)||!Ta(r.segments,i,n)||!r.children[X]?!1:Ty(r.children[X],t,s,n)}}function Ta(r,t,e){return t.every((n,i)=>Ay[e](r[i].parameters,n.parameters))}var Zt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ce([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){return uS.serialize(this)}},ce=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ma(this)}},kn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ar(this.parameters),this._parameterMap}toString(){return Ry(this)}};function lS(r,t){return sr(r,t)&&r.every((e,n)=>Xt(e.parameters,t[n].parameters))}function sr(r,t){return r.length!==t.length?!1:r.every((e,n)=>e.path===t[n].path)}function cS(r,t){let e=[];return Object.entries(r.children).forEach(([n,i])=>{n===X&&(e=e.concat(t(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==X&&(e=e.concat(t(i,n)))}),e}var lr=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>new Pn,providedIn:"root"})}return r})(),Pn=class{parse(t){let e=new Yd(t);return new Zt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ds(t.root,!0)}`,n=fS(t.queryParams),i=typeof t.fragment=="string"?`#${dS(t.fragment)}`:"";return`${e}${n}${i}`}},uS=new Pn;function Ma(r){return r.segments.map(t=>Ry(t)).join("/")}function ds(r,t){if(!r.hasChildren())return Ma(r);if(t){let e=r.children[X]?ds(r.children[X],!1):"",n=[];return Object.entries(r.children).forEach(([i,s])=>{i!==X&&n.push(`${i}:${ds(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=cS(r,(n,i)=>i===X?[ds(r.children[X],!1)]:[`${i}:${ds(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[X]!=null?`${Ma(r)}/${e[0]}`:`${Ma(r)}/(${e.join("//")})`}}function My(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ia(r){return My(r).replace(/%3B/gi,";")}function dS(r){return encodeURI(r)}function qd(r){return My(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ra(r){return decodeURIComponent(r)}function vy(r){return Ra(r.replace(/\+/g,"%20"))}function Ry(r){return`${qd(r.path)}${hS(r.parameters)}`}function hS(r){return Object.entries(r).map(([t,e])=>`;${qd(t)}=${qd(e)}`).join("")}function fS(r){let t=Object.entries(r).map(([e,n])=>Array.isArray(n)?n.map(i=>`${Ia(e)}=${Ia(i)}`).join("&"):`${Ia(e)}=${Ia(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var pS=/^[^\/()?;#]+/;function Hd(r){let t=r.match(pS);return t?t[0]:""}var gS=/^[^\/()?;=#]+/;function mS(r){let t=r.match(gS);return t?t[0]:""}var vS=/^[^=?&#]+/;function yS(r){let t=r.match(vS);return t?t[0]:""}var bS=/^[^&#]+/;function wS(r){let t=r.match(bS);return t?t[0]:""}var Yd=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[X]=new ce(t,e)),n}parseSegment(){let t=Hd(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(t),new kn(Ra(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=mS(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let i=Hd(this.remaining);i&&(n=i,this.capture(n))}t[Ra(e)]=Ra(n)}parseQueryParam(t){let e=yS(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=wS(this.remaining);o&&(n=o,this.capture(n))}let i=vy(e),s=vy(n);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Hd(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=X);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[X]:new ce([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new L(4011,!1)}};function Ny(r){return r.segments.length>0?new ce([],{[X]:r}):r}function ky(r){let t={};for(let[n,i]of Object.entries(r.children)){let s=ky(i);if(n===X&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new ce(r.segments,t);return _S(e)}function _S(r){if(r.numberOfChildren===1&&r.children[X]){let t=r.children[X];return new ce(r.segments.concat(t.segments),t.children)}return r}function On(r){return r instanceof Zt}function Py(r,t,e=null,n=null){let i=Oy(r);return Ly(i,t,e,n)}function Oy(r){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new ce(s.url,o);return s===r&&(t=a),a}let n=e(r.root),i=Ny(n);return t??i}function Ly(r,t,e,n){let i=r;for(;i.parent;)i=i.parent;if(t.length===0)return $d(i,i,i,e,n);let s=ES(t);if(s.toRoot())return $d(i,i,new ce([],{}),e,n);let o=DS(s,i,r),a=o.processChildren?fs(o.segmentGroup,o.index,s.commands):jy(o.segmentGroup,o.index,s.commands);return $d(i,o.segmentGroup,a,e,n)}function ka(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function gs(r){return typeof r=="object"&&r!=null&&r.outlets}function $d(r,t,e,n,i){let s={};n&&Object.entries(n).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;r===t?o=e:o=Fy(r,t,e);let a=Ny(ky(o));return new Zt(a,s,i)}function Fy(r,t,e){let n={};return Object.entries(r.children).forEach(([i,s])=>{s===t?n[i]=e:n[i]=Fy(s,t,e)}),new ce(r.segments,n)}var Pa=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ka(n[0]))throw new L(4003,!1);let i=n.find(gs);if(i&&i!==Sy(n))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ES(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Pa(!0,0,r);let t=0,e=!1,n=r.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Pa(e,t,n)}var ui=class{segmentGroup;processChildren;index;constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function DS(r,t,e){if(r.isAbsolute)return new ui(t,!0,0);if(!e)return new ui(t,!1,NaN);if(e.parent===null)return new ui(e,!0,0);let n=ka(r.commands[0])?0:1,i=e.segments.length-1+n;return CS(e,i,r.numberOfDoubleDots)}function CS(r,t,e){let n=r,i=t,s=e;for(;s>i;){if(s-=i,n=n.parent,!n)throw new L(4005,!1);i=n.segments.length}return new ui(n,!1,i-s)}function SS(r){return gs(r[0])?r[0].outlets:{[X]:r}}function jy(r,t,e){if(r??=new ce([],{}),r.segments.length===0&&r.hasChildren())return fs(r,t,e);let n=AS(r,t,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let s=new ce(r.segments.slice(0,n.pathIndex),{});return s.children[X]=new ce(r.segments.slice(n.pathIndex),r.children),fs(s,0,i)}else return n.match&&i.length===0?new ce(r.segments,{}):n.match&&!r.hasChildren()?Xd(r,t,e):n.match?fs(r,0,i):Xd(r,t,e)}function fs(r,t,e){if(e.length===0)return new ce(r.segments,{});{let n=SS(e),i={};if(Object.keys(n).some(s=>s!==X)&&r.children[X]&&r.numberOfChildren===1&&r.children[X].segments.length===0){let s=fs(r.children[X],t,e);return new ce(r.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=jy(r.children[s],t,o))}),Object.entries(r.children).forEach(([s,o])=>{n[s]===void 0&&(i[s]=o)}),new ce(r.segments,i)}}function AS(r,t,e){let n=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=e.length)return s;let o=r.segments[i],a=e[n];if(gs(a))break;let l=`${a}`,c=n<e.length-1?e[n+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!by(l,c,o))return s;n+=2}else{if(!by(l,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function Xd(r,t,e){let n=r.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(gs(s)){let l=IS(s.outlets);return new ce(n,l)}if(i===0&&ka(e[0])){let l=r.segments[t];n.push(new kn(l.path,yy(e[0]))),i++;continue}let o=gs(s)?s.outlets[X]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&ka(a)?(n.push(new kn(o,yy(a))),i+=2):(n.push(new kn(o,{})),i++)}return new ce(n,{})}function IS(r){let t={};return Object.entries(r).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=Xd(new ce([],{}),0,n))}),t}function yy(r){let t={};return Object.entries(r).forEach(([e,n])=>t[e]=`${n}`),t}function by(r,t,e){return r==e.path&&Xt(t,e.parameters)}var Na="imperative",Pe=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(Pe||{}),ft=class{id;url;constructor(t,e){this.id=t,this.url=e}},Ln=class extends ft{type=Pe.NavigationStart;navigationTrigger;restoredState;constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pt=class extends ft{urlAfterRedirects;type=Pe.NavigationEnd;constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nt=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(nt||{}),hi=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(hi||{}),Kt=class extends ft{reason;code;type=Pe.NavigationCancel;constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qt=class extends ft{reason;code;type=Pe.NavigationSkipped;constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i}},fi=class extends ft{error;target;type=Pe.NavigationError;constructor(t,e,n,i){super(t,e),this.error=n,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ms=class extends ft{urlAfterRedirects;state;type=Pe.RoutesRecognized;constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oa=class extends ft{urlAfterRedirects;state;type=Pe.GuardsCheckStart;constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},La=class extends ft{urlAfterRedirects;state;shouldActivate;type=Pe.GuardsCheckEnd;constructor(t,e,n,i,s){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fa=class extends ft{urlAfterRedirects;state;type=Pe.ResolveStart;constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ja=class extends ft{urlAfterRedirects;state;type=Pe.ResolveEnd;constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ba=class{route;type=Pe.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Va=class{route;type=Pe.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ha=class{snapshot;type=Pe.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$a=class{snapshot;type=Pe.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ua=class{snapshot;type=Pe.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},za=class{snapshot;type=Pe.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pi=class{routerEvent;position;anchor;type=Pe.Scroll;constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},vs=class{},gi=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function xS(r,t){return r.providers&&!r._injector&&(r._injector=Ji(r.providers,t,`Route: ${r.path}`)),r._injector??t}function kt(r){return r.outlet||X}function TS(r,t){let e=r.filter(n=>kt(n)===t);return e.push(...r.filter(n=>kt(n)!==t)),e}function Cs(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Ga=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Cs(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new cr(this.rootInjector)}},cr=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,n){let i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Ga(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(n){return new(n||r)(U(et))};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Wa=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Kd(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=Kd(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Zd(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Zd(t,this._root).map(e=>e.value)}};function Kd(r,t){if(r===t.value)return t;for(let e of t.children){let n=Kd(r,e);if(n)return n}return null}function Zd(r,t){if(r===t.value)return[t];for(let e of t.children){let n=Zd(r,e);if(n.length)return n.unshift(t),n}return[]}var ht=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ci(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var ys=class extends Wa{snapshot;constructor(t,e){super(t),this.snapshot=e,sh(this,t)}toString(){return this.snapshot.toString()}};function By(r){let t=MS(r),e=new Be([new kn("",{})]),n=new Be({}),i=new Be({}),s=new Be({}),o=new Be(""),a=new Jt(e,n,s,o,i,X,r,t.root);return a.snapshot=t.root,new ys(new ht(a,[]),t)}function MS(r){let t={},e={},n={},i="",s=new or([],t,n,i,e,X,r,null,{});return new bs("",new ht(s,[]))}var Jt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,n,i,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(c=>c[Ds]))??$(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(t=>ar(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(t=>ar(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qa(r,t,e="emptyOnly"){let n,{routeConfig:i}=r;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:A(A({},t.params),r.params),data:A(A({},t.data),r.data),resolve:A(A(A(A({},r.data),t.data),i?.data),r._resolvedData)}:n={params:A({},r.params),data:A({},r.data),resolve:A(A({},r.data),r._resolvedData??{})},i&&Hy(i)&&(n.resolve[Ds]=i.title),n}var or=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ds]}constructor(t,e,n,i,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},bs=class extends Wa{url;constructor(t,e){super(e),this.url=t,sh(this,e)}toString(){return Vy(this._root)}};function sh(r,t){t.value._routerState=r,t.children.forEach(e=>sh(r,e))}function Vy(r){let t=r.children.length>0?` { ${r.children.map(Vy).join(", ")} } `:"";return`${r.value}${t}`}function Ud(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Xt(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),Xt(t.params,e.params)||r.paramsSubject.next(e.params),iS(t.url,e.url)||r.urlSubject.next(e.url),Xt(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Qd(r,t){let e=Xt(r.params,t.params)&&lS(r.url,t.url),n=!r.parent!=!t.parent;return e&&!n&&(!r.parent||Qd(r.parent,t.parent))}function Hy(r){return typeof r.title=="string"||r.title===null}var $y=new V(""),Ss=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new Ke;deactivateEvents=new Ke;attachEvents=new Ke;detachEvents=new Ke;routerOutletData=Bm(void 0);parentContexts=C(cr);location=C(Rn);changeDetector=C(oi);inputBinder=C(As,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Jd(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||r)};static \u0275dir=vn({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xr]})}return r})(),Jd=class{route;childContexts;parent;outletData;constructor(t,e,n,i){this.route=t,this.childContexts=e,this.parent=n,this.outletData=i}get(t,e){return t===Jt?this.route:t===cr?this.childContexts:t===$y?this.outletData:this.parent.get(t,e)}},As=new V(""),oh=(()=>{class r{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,i=ki([n.queryParams,n.params,n.data]).pipe(yt(([s,o,a],l)=>(a=A(A(A({},s),o),a),l===0?$(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let o=Zv(n.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})();function RS(r,t,e){let n=ws(r,t._root,e?e._root:void 0);return new ys(n,t)}function ws(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let i=NS(r,t,e);return new ht(n,i)}else{if(r.shouldAttach(t.value)){let s=r.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>ws(r,a)),o}}let n=kS(t.value),i=t.children.map(s=>ws(r,s));return new ht(n,i)}}function NS(r,t,e){return t.children.map(n=>{for(let i of e.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return ws(r,n,i);return ws(r,n)})}function kS(r){return new Jt(new Be(r.url),new Be(r.params),new Be(r.queryParams),new Be(r.fragment),new Be(r.data),r.outlet,r.component,r)}var mi=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Uy="ngNavigationCancelingError";function Ya(r,t){let{redirectTo:e,navigationBehaviorOptions:n}=On(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=zy(!1,nt.Redirect);return i.url=e,i.navigationBehaviorOptions=n,i}function zy(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[Uy]=!0,e.cancellationCode=t,e}function PS(r){return Gy(r)&&On(r.url)}function Gy(r){return!!r&&r[Uy]}var OS=(r,t,e,n)=>oe(i=>(new eh(t,i.targetRouterState,i.currentRouterState,e,n).activate(r),i)),eh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,n,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ud(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let i=ci(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,s=ci(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,s=ci(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let i=ci(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new za(s.value.snapshot))}),t.children.length&&this.forwardEvent(new $a(t.value.snapshot))}activateRoutes(t,e,n){let i=t.value,s=e?e.value:null;if(Ud(i),i===s)if(i.component){let o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(i.component){let o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ud(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)}},Xa=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},di=class{component;route;constructor(t,e){this.component=t,this.route=e}};function LS(r,t,e){let n=r._root,i=t?t._root:null;return hs(n,i,e,[n.value])}function FS(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function yi(r,t){let e=Symbol(),n=t.get(r,e);return n===e?typeof r=="function"&&!kg(r)?r:t.get(r):n}function hs(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ci(t);return r.children.forEach(o=>{jS(o,s[o.value.outlet],e,n.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ps(a,e.getContext(o),i)),i}function jS(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=BS(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Xa(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?hs(r,t,a?a.children:null,n,i):hs(r,t,e,n,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new di(a.outlet.component,o))}else o&&ps(t,a,i),i.canActivateChecks.push(new Xa(n)),s.component?hs(r,null,a?a.children:null,n,i):hs(r,null,e,n,i);return i}function BS(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!sr(r.url,t.url);case"pathParamsOrQueryParamsChange":return!sr(r.url,t.url)||!Xt(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qd(r,t)||!Xt(r.queryParams,t.queryParams);case"paramsChange":default:return!Qd(r,t)}}function ps(r,t,e){let n=ci(r),i=r.value;Object.entries(n).forEach(([s,o])=>{i.component?t?ps(o,t.children.getContext(s),e):ps(o,null,e):ps(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new di(t.outlet.component,i)):e.canDeactivateChecks.push(new di(null,i)):e.canDeactivateChecks.push(new di(null,i))}function Is(r){return typeof r=="function"}function VS(r){return typeof r=="boolean"}function HS(r){return r&&Is(r.canLoad)}function $S(r){return r&&Is(r.canActivate)}function US(r){return r&&Is(r.canActivateChild)}function zS(r){return r&&Is(r.canDeactivate)}function GS(r){return r&&Is(r.canMatch)}function Wy(r){return r instanceof ln||r?.name==="EmptyError"}var xa=Symbol("INITIAL_VALUE");function vi(){return yt(r=>ki(r.map(t=>t.pipe(un(1),Ic(xa)))).pipe(oe(t=>{for(let e of t)if(e!==!0){if(e===xa)return xa;if(e===!1||WS(e))return e}return!0}),at(t=>t!==xa),un(1)))}function WS(r){return On(r)||r instanceof mi}function qS(r,t){return Ee(e=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?$(ae(A({},e),{guardsResult:!0})):YS(o,n,i,r).pipe(Ee(a=>a&&VS(a)?XS(n,s,r,t):$(a)),oe(a=>ae(A({},e),{guardsResult:a})))})}function YS(r,t,e,n){return be(r).pipe(Ee(i=>eA(i.component,i.route,e,t,n)),dn(i=>i!==!0,!0))}function XS(r,t,e,n){return be(t).pipe(In(i=>Mr(ZS(i.route.parent,n),KS(i.route,n),JS(r,i.path,e),QS(r,i.route,e))),dn(i=>i!==!0,!0))}function KS(r,t){return r!==null&&t&&t(new Ua(r)),$(!0)}function ZS(r,t){return r!==null&&t&&t(new Ha(r)),$(!0)}function QS(r,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return $(!0);let i=n.map(s=>So(()=>{let o=Cs(t)??e,a=yi(s,o),l=$S(a)?a.canActivate(t,r):Et(o,()=>a(t,r));return Fn(l).pipe(dn())}));return $(i).pipe(vi())}function JS(r,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>FS(o)).filter(o=>o!==null).map(o=>So(()=>{let a=o.guards.map(l=>{let c=Cs(o.node)??e,u=yi(l,c),d=US(u)?u.canActivateChild(n,r):Et(c,()=>u(n,r));return Fn(d).pipe(dn())});return $(a).pipe(vi())}));return $(s).pipe(vi())}function eA(r,t,e,n,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let o=s.map(a=>{let l=Cs(t)??i,c=yi(a,l),u=zS(c)?c.canDeactivate(r,t,e,n):Et(l,()=>c(r,t,e,n));return Fn(u).pipe(dn())});return $(o).pipe(vi())}function tA(r,t,e,n){let i=t.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(o=>{let a=yi(o,r),l=HS(a)?a.canLoad(t,e):Et(r,()=>a(t,e));return Fn(l)});return $(s).pipe(vi(),qy(n))}function qy(r){return wc(Ve(t=>{if(typeof t!="boolean")throw Ya(r,t)}),oe(t=>t===!0))}function nA(r,t,e,n){let i=t.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(o=>{let a=yi(o,r),l=GS(a)?a.canMatch(t,e):Et(r,()=>a(t,e));return Fn(l)});return $(s).pipe(vi(),qy(n))}var _s=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Es=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function li(r){return Tr(new _s(r))}function rA(r){return Tr(new L(4e3,!1))}function iA(r){return Tr(zy(!1,nt.GuardRejected))}var th=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return $(n);if(i.numberOfChildren>1||!i.children[X])return rA(`${t.redirectTo}`);i=i.children[X]}}applyRedirectCommands(t,e,n,i,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=i,v=Et(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(v instanceof Zt)throw new Es(v);e=v}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new Es(o);return o}applyRedirectCreateUrlTree(t,e,n,i){let s=this.createSegmentGroup(t,e.root,n,i);return new Zt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);n[i]=e[a]}else n[i]=s}),n}createSegmentGroup(t,e,n,i){let s=this.createSegments(t,e.segments,n,i),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,i)}),new ce(s,o)}createSegments(t,e,n,i){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,n))}findPosParam(t,e,n){let i=n[e.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(t,e){let n=0;for(let i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}},nh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sA(r,t,e,n,i){let s=Yy(r,t,e);return s.matched?(n=xS(t,n),nA(n,t,e,i).pipe(oe(o=>o===!0?s:A({},nh)))):$(s)}function Yy(r,t,e){if(t.path==="**")return oA(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?A({},nh):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Dy)(e,r,t);if(!i)return A({},nh);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?A(A({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function oA(r){return{matched:!0,parameters:r.length>0?Sy(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function wy(r,t,e,n){return e.length>0&&cA(r,e,n)?{segmentGroup:new ce(t,lA(n,new ce(e,r.children))),slicedSegments:[]}:e.length===0&&uA(r,e,n)?{segmentGroup:new ce(r.segments,aA(r,e,n,r.children)),slicedSegments:e}:{segmentGroup:new ce(r.segments,r.children),slicedSegments:e}}function aA(r,t,e,n){let i={};for(let s of e)if(Za(r,t,s)&&!n[kt(s)]){let o=new ce([],{});i[kt(s)]=o}return A(A({},n),i)}function lA(r,t){let e={};e[X]=t;for(let n of r)if(n.path===""&&kt(n)!==X){let i=new ce([],{});e[kt(n)]=i}return e}function cA(r,t,e){return e.some(n=>Za(r,t,n)&&kt(n)!==X)}function uA(r,t,e){return e.some(n=>Za(r,t,n))}function Za(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function dA(r,t,e){return t.length===0&&!r.children[e]}var rh=class{};function hA(r,t,e,n,i,s,o="emptyOnly"){return new ih(r,t,e,n,i,o,s).recognize()}var fA=31,ih=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,n,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new th(this.urlSerializer,this.urlTree)}noMatchError(t){return new L(4002,`'${t.segmentGroup}'`)}recognize(){let t=wy(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(oe(({children:e,rootSnapshot:n})=>{let i=new ht(n,e),s=new bs("",i),o=Py(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new or([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,X,e).pipe(oe(n=>({children:n,rootSnapshot:e})),cn(n=>{if(n instanceof Es)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof _s?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,i,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,s):this.processSegment(t,e,n,n.segments,i,!0,s).pipe(oe(o=>o instanceof ht?[o]:[]))}processChildren(t,e,n,i){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return be(s).pipe(In(o=>{let a=n.children[o],l=TS(e,o);return this.processSegmentGroup(t,l,a,o,i)}),Ac((o,a)=>(o.push(...a),o)),xn(null),Sc(),Ee(o=>{if(o===null)return li(n);let a=Xy(o);return pA(a),$(a)}))}processSegment(t,e,n,i,s,o,a){return be(e).pipe(In(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,n,i,s,o,a).pipe(cn(c=>{if(c instanceof _s)return $(null);throw c}))),dn(l=>!!l),cn(l=>{if(Wy(l))return dA(n,i,s)?$(new rh):li(n);throw l}))}processSegmentAgainstRoute(t,e,n,i,s,o,a,l){return kt(n)!==o&&(o===X||!Za(i,s,n))?li(i):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,n,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,n,s,o,l):li(i)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Yy(e,i,s);if(!l)return li(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fA&&(this.allowRedirects=!1));let f=new or(s,c,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,_y(i),kt(i),i.component??i._loadedComponent??null,i,Ey(i)),p=qa(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(i,g).pipe(Ee(v=>this.processSegment(t,n,e,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,n,i,s,o){let a=sA(e,n,i,t,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(yt(l=>l.matched?(t=n._injector??t,this.getChildConfig(t,n,i).pipe(yt(({routes:c})=>{let u=n._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new or(h,d,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,_y(n),kt(n),n.component??n._loadedComponent??null,n,Ey(n)),g=qa(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:v,slicedSegments:m}=wy(e,h,f,c);if(m.length===0&&v.hasChildren())return this.processChildren(u,c,v,p).pipe(oe(y=>new ht(p,y)));if(c.length===0&&m.length===0)return $(new ht(p,[]));let b=kt(n)===s;return this.processSegment(u,c,v,m,b?X:s,!0,p).pipe(oe(y=>new ht(p,y instanceof ht?[y]:[])))}))):li(e)))}getChildConfig(t,e,n){return e.children?$({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?$({routes:e._loadedRoutes,injector:e._loadedInjector}):tA(t,e,n,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(t,e).pipe(Ve(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):iA(e))):$({routes:[],injector:t})}};function pA(r){r.sort((t,e)=>t.value.outlet===X?-1:e.value.outlet===X?1:t.value.outlet.localeCompare(e.value.outlet))}function gA(r){let t=r.value.routeConfig;return t&&t.path===""}function Xy(r){let t=[],e=new Set;for(let n of r){if(!gA(n)){t.push(n);continue}let i=t.find(s=>n.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...n.children),e.add(i)):t.push(n)}for(let n of e){let i=Xy(n.children);t.push(new ht(n.value,i))}return t.filter(n=>!e.has(n))}function _y(r){return r.data||{}}function Ey(r){return r.resolve||{}}function mA(r,t,e,n,i,s){return Ee(o=>hA(r,t,e,n,o.extractedUrl,i,s).pipe(oe(({state:a,tree:l})=>ae(A({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function vA(r,t){return Ee(e=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return $(e);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of Ky(l))o.add(c);let a=0;return be(o).pipe(In(l=>s.has(l)?yA(l,n,r,t):(l.data=qa(l,l.parent,r).resolve,$(void 0))),Ve(()=>a++),Rr(1),Ee(l=>a===o.size?$(e):Qe))})}function Ky(r){let t=r.children.map(e=>Ky(e)).flat();return[r,...t]}function yA(r,t,e,n){let i=r.routeConfig,s=r._resolve;return i?.title!==void 0&&!Hy(i)&&(s[Ds]=i.title),bA(s,r,t,n).pipe(oe(o=>(r._resolvedData=o,r.data=qa(r,r.parent,e).resolve,null)))}function bA(r,t,e,n){let i=Wd(r);if(i.length===0)return $({});let s={};return be(i).pipe(Ee(o=>wA(r[o],t,e,n).pipe(dn(),Ve(a=>{if(a instanceof mi)throw Ya(new Pn,a);s[o]=a}))),Rr(1),oe(()=>s),cn(o=>Wy(o)?Qe:Tr(o)))}function wA(r,t,e,n){let i=Cs(t)??n,s=yi(r,i),o=s.resolve?s.resolve(t,e):Et(i,()=>s(t,e));return Fn(o)}function zd(r){return yt(t=>{let e=r(t);return e?be(e).pipe(oe(()=>t)):$(t)})}var ah=(()=>{class r{buildTitle(e){let n,i=e.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(s=>s.outlet===X);return n}getResolvedTitleForRoute(e){return e.data[Ds]}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(Zy),providedIn:"root"})}return r})(),Zy=(()=>{class r extends ah{title;constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||r)(U(gy))};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ur=new V("",{providedIn:"root",factory:()=>({})}),lh=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=Ie({type:r,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,i){n&1&&H(0,"router-outlet")},dependencies:[Ss],encapsulation:2})}return r})();function ch(r){let t=r.children&&r.children.map(ch),e=t?ae(A({},r),{children:t}):A({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==X&&(e.component=lh),e}var dr=new V(""),Qa=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=C(ma);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return $(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=Fn(e.loadComponent()).pipe(oe(Jy),Ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Pi(()=>{this.componentLoaders.delete(e)})),i=new xr(n,()=>new ke).pipe(Ir());return this.componentLoaders.set(e,i),i}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return $({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=Qy(n,this.compiler,e,this.onLoadEndListener).pipe(Pi(()=>{this.childrenLoaders.delete(n)})),o=new xr(s,()=>new ke).pipe(Ir());return this.childrenLoaders.set(n,o),o}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Qy(r,t,e,n){return Fn(r.loadChildren()).pipe(oe(Jy),Ee(i=>i instanceof vd||Array.isArray(i)?$(i):be(t.compileModuleAsync(i))),oe(i=>{n&&n(r);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(dr,[],{optional:!0,self:!0}).flat()),{routes:o.map(ch),injector:s}}))}function _A(r){return r&&typeof r=="object"&&"default"in r}function Jy(r){return _A(r)?r.default:r}var Ja=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(EA),providedIn:"root"})}return r})(),EA=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),uh=new V(""),dh=new V("");function eb(r,t,e){let n=r.get(dh),i=r.get(je);return r.get(Se).runOutsideAngular(()=>{if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),DA(r))),{onViewTransitionCreated:l}=n;return l&&Et(r,()=>l({transition:a,from:t,to:e})),o})}function DA(r){return new Promise(t=>{Ju({read:()=>setTimeout(t)},{injector:r})})}var hh=new V(""),el=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ke;transitionAbortSubject=new ke;configLoader=C(Qa);environmentInjector=C(et);destroyRef=C(Ki);urlSerializer=C(lr);rootContexts=C(cr);location=C(Nn);inputBindingEnabled=C(As,{optional:!0})!==null;titleStrategy=C(ah);options=C(ur,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=C(Ja);createViewTransition=C(uh,{optional:!0});navigationErrorHandler=C(hh,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>$(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Ba(i)),n=i=>this.events.next(new Va(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(ae(A({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:n}))}setupNavigations(e){return this.transitions=new Be(null),this.transitions.pipe(at(n=>n!==null),yt(n=>{let i=!1,s=!1;return $(n).pipe(yt(o=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",nt.SupersededByNewNavigation),Qe;this.currentTransition=n,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.rawUrl),c,hi.IgnoredSameUrlNavigation)),o.resolve(!1),Qe}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return $(o).pipe(yt(c=>(this.events.next(new Ln(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Qe:Promise.resolve(c))),mA(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(c=>{n.targetSnapshot=c.targetSnapshot,n.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ae(A({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new ms(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,p=new Ln(c,this.urlSerializer.serialize(u),d,h);this.events.next(p);let g=By(this.rootComponentType).snapshot;return this.currentTransition=n=ae(A({},o),{targetSnapshot:g,urlAfterRedirects:u,extras:ae(A({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,$(n)}else{let c="";return this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),c,hi.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Qe}}),Ve(o=>{let a=new Oa(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),oe(o=>(this.currentTransition=n=ae(A({},o),{guards:LS(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),n)),qS(this.environmentInjector,o=>this.events.next(o)),Ve(o=>{if(n.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ya(this.urlSerializer,o.guardsResult);let a=new La(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),at(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",nt.GuardRejected),!1)),zd(o=>{if(o.guards.canActivateChecks.length!==0)return $(o).pipe(Ve(a=>{let l=new Fa(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),yt(a=>{let l=!1;return $(a).pipe(vA(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",nt.NoDataFromResolver)}}))}),Ve(a=>{let l=new ja(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),zd(o=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ve(u=>{l.component=u}),oe(()=>{})));for(let u of l.children)c.push(...a(u));return c};return ki(a(o.targetSnapshot.root)).pipe(xn(null),un(1))}),zd(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:o,targetSnapshot:a}=n,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?be(l).pipe(oe(()=>n)):$(n)}),oe(o=>{let a=RS(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=n=ae(A({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,n}),Ve(()=>{this.events.next(new vs)}),OS(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),un(1),Ve({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),xc(this.transitionAbortSubject.pipe(Ve(o=>{throw o}))),Pi(()=>{!i&&!s&&this.cancelNavigationTransition(n,"",nt.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),cn(o=>{if(this.destroyed)return n.resolve(!1),Qe;if(s=!0,Gy(o))this.events.next(new Kt(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode)),PS(o)?this.events.next(new gi(o.url,o.navigationBehaviorOptions)):n.resolve(!1);else{let a=new fi(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);try{let l=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof mi){let{message:c,cancellationCode:u}=Ya(this.urlSerializer,l);this.events.next(new Kt(n.id,this.urlSerializer.serialize(n.extractedUrl),c,u)),this.events.next(new gi(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(l)}}return Qe}))}))}cancelNavigationTransition(e,n,i){let s=new Kt(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function CA(r){return r!==Na}var tb=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(SA),providedIn:"root"})}return r})(),Ka=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},SA=(()=>{class r extends Ka{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Gu(r)))(i||r)}})();static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),nb=(()=>{class r{urlSerializer=C(lr);options=C(ur,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=C(Nn);urlHandlingStrategy=C(Ja);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:n,targetBrowserUrl:i}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,n):n,o=i??s;return o instanceof Zt?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:n,initialUrl:i}){n&&e?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,i),this.routerState=e):this.rawUrlTree=i}routerState=By(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:()=>C(AA),providedIn:"root"})}return r})(),AA=(()=>{class r extends nb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{e(n.url,n.state,"popstate")})})}handleRouterEvent(e,n){e instanceof Ln?this.updateStateMemento():e instanceof Qt?this.commitTransition(n):e instanceof ms?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof vs?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Kt&&(e.code===nt.GuardRejected||e.code===nt.NoDataFromResolver)?this.restoreHistory(n):e instanceof fi?this.restoreHistory(n,!0):e instanceof pt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:n,id:i}){let{replaceUrl:s,state:o}=n;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,l=A(A({},o),this.generateNgRouterState(i,a));this.location.replaceState(e,"",l)}else{let a=A(A({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Gu(r)))(i||r)}})();static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function tl(r,t){r.events.pipe(at(e=>e instanceof pt||e instanceof Kt||e instanceof fi||e instanceof Qt),oe(e=>e instanceof pt||e instanceof Qt?0:(e instanceof Kt?e.code===nt.Redirect||e.code===nt.SupersededByNewNavigation:!1)?2:1),at(e=>e!==2),un(1)).subscribe(()=>{t()})}var IA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pt=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=C($v);stateManager=C(nb);options=C(ur,{optional:!0})||{};pendingTasks=C(Qr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=C(el);urlSerializer=C(lr);location=C(Nn);urlHandlingStrategy=C(Ja);_events=new ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=C(tb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=C(dr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!C(As,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ce;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Kt&&n.code!==nt.Redirect&&n.code!==nt.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof pt)this.navigated=!0;else if(n instanceof gi){let o=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),l=A({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||CA(i.source)},o);this.scheduleNavigation(a,Na,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}MA(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Na,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n,i)=>{this.navigateToSyncWithBrowser(e,i,n)})}navigateToSyncWithBrowser(e,n,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=A({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ch),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=A(A({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=Oy(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Ly(d,e,u,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){let i=On(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Na,null,n)}navigate(e,n={skipLocationChange:!1}){return TA(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let i;if(n===!0?i=A({},IA):n===!1?i=A({},xA):i=n,On(e))return my(this.currentUrlTree,e,i);let s=this.parseUrl(e);return my(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((n,[i,s])=>(s!=null&&(n[i]=s),n),{})}scheduleNavigation(e,n,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return tl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function TA(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new L(4008,!1)}function MA(r){return!(r instanceof vs)&&!(r instanceof gi)}var bi=(()=>{class r{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ke;constructor(e,n,i,s,o,a){this.router=e,this.route=n,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof pt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(On(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||n||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:ev(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let i=this.renderer,s=this.el.nativeElement;n!==null?i.setAttribute(s,e,n):i.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:On(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||r)(Ae(Pt),Ae(Jt),Wu("tabindex"),Ae(ni),Ae(Wt),Ae(Nt))};static \u0275dir=vn({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,i){n&1&&yn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&bd("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ns],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ns],replaceUrl:[2,"replaceUrl","replaceUrl",ns],routerLink:"routerLink"},features:[Xr]})}return r})(),ph=(()=>{class r{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ke;constructor(e,n,i,s,o){this.router=e,this.element=n,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof pt&&this.update()})}ngAfterContentInit(){$(this.links.changes,$(null)).pipe(An()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=be(e).pipe(An()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){let n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let n=RA(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?e.isActive(s,n):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(n){return new(n||r)(Ae(Pt),Ae(Wt),Ae(ni),Ae(oi),Ae(bi,8))};static \u0275dir=vn({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(n,i,s){if(n&1&&Yv(s,bi,5),n&2){let o;pa(o=ga())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Xr]})}return r})();function RA(r){return!!r.paths}var xs=class{};var rb=(()=>{class r{router;injector;preloadingStrategy;loader;subscription;constructor(e,n,i,s,o){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(at(e=>e instanceof pt),In(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let i=[];for(let s of n){s.providers&&!s._injector&&(s._injector=Ji(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return be(i).pipe(An())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(e,n):i=$(null);let s=i.pipe(Ee(o=>o===null?$(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(n.loadComponent&&!n._loadedComponent){let o=this.loader.loadComponent(n);return be([s,o]).pipe(An())}else return s})}static \u0275fac=function(n){return new(n||r)(U(Pt),U(ma),U(et),U(xs),U(Qa))};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ib=new V(""),NA=(()=>{class r{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,n,i,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ln?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof pt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Qt&&e.code===hi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof pi&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pi(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){Tv()};static \u0275prov=F({token:r,factory:r.\u0275fac})}return r})();function gh(r,...t){return Tu([{provide:dr,multi:!0,useValue:r},[],{provide:Jt,useFactory:sb,deps:[Pt]},{provide:fa,multi:!0,useFactory:ob},t.map(e=>e.\u0275providers)])}function sb(r){return r.routerState.root}function Ts(r,t){return{\u0275kind:r,\u0275providers:t}}function ob(){let r=C(Tt);return t=>{let e=r.get(er);if(t!==e.components[0])return;let n=r.get(Pt),i=r.get(ab);r.get(mh)===1&&n.initialNavigation(),r.get(ub,null,Z.Optional)?.setUpPreloading(),r.get(ib,null,Z.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ab=new V("",{factory:()=>new ke}),mh=new V("",{providedIn:"root",factory:()=>1});function lb(){let r=[{provide:mh,useValue:0},yd(()=>{let t=C(Tt);return t.get(Ad,Promise.resolve()).then(()=>new Promise(n=>{let i=t.get(Pt),s=t.get(ab);tl(i,()=>{n(!0)}),t.get(el).afterPreactivation=()=>(n(!0),s.closed?$(void 0):s),i.initialNavigation()}))})];return Ts(2,r)}function cb(){let r=[yd(()=>{C(Pt).setUpLocationChangeListener()}),{provide:mh,useValue:2}];return Ts(3,r)}var ub=new V("");function db(r){return Ts(0,[{provide:ub,useExisting:rb},{provide:xs,useExisting:r}])}function hb(){return Ts(8,[oh,{provide:As,useExisting:oh}])}function fb(r){Qi("NgRouterViewTransitions");let t=[{provide:uh,useValue:eb},{provide:dh,useValue:A({skipNextTransition:!!r?.skipInitialTransition},r)}];return Ts(9,t)}var pb=[Nn,{provide:lr,useClass:Pn},Pt,cr,{provide:Jt,useFactory:sb,deps:[Pt]},Qa,[]],Ms=(()=>{class r{constructor(){}static forRoot(e,n){return{ngModule:r,providers:[pb,[],{provide:dr,multi:!0,useValue:e},[],n?.errorHandler?{provide:hh,useValue:n.errorHandler}:[],{provide:ur,useValue:n||{}},n?.useHash?PA():OA(),kA(),n?.preloadingStrategy?db(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?LA(n):[],n?.bindToComponentInputs?hb().\u0275providers:[],n?.enableViewTransitions?fb().\u0275providers:[],FA()]}}static forChild(e){return{ngModule:r,providers:[{provide:dr,multi:!0,useValue:e}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=ri({type:r});static \u0275inj=Wr({})}return r})();function kA(){return{provide:ib,useFactory:()=>{let r=C(oy),t=C(Se),e=C(ur),n=C(el),i=C(lr);return e.scrollOffset&&r.setOffset(e.scrollOffset),new NA(i,n,r,t,e)}}}function PA(){return{provide:Nt,useClass:xd}}function OA(){return{provide:Nt,useClass:ba}}function LA(r){return[r.initialNavigation==="disabled"?cb().\u0275providers:[],r.initialNavigation==="enabledBlocking"?lb().\u0275providers:[]]}var fh=new V("");function FA(){return[{provide:fh,useFactory:ob},{provide:fa,multi:!0,useExisting:fh}]}var jA=()=>["/about"],BA=()=>["/experience"],VA=()=>["/projects"],HA=()=>["/achievements"],$A=()=>["/resume"],UA=()=>["/contact"],nl=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-Nav"]],decls:21,vars:12,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["id","navbarColor03",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(e,n){e&1&&(T(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),K(5,"About"),M()(),T(6,"li",3)(7,"a",4),K(8,"Experience"),M()(),T(9,"li",3)(10,"a",4),K(11,"Projects"),M()(),T(12,"li",3)(13,"a",4),K(14,"Achivements"),M()(),T(15,"li",3)(16,"a",4),K(17,"Resume"),M()(),T(18,"li",3)(19,"a",4),K(20,"Contact"),M()()()()()),e&2&&(z(4),le("routerLink",ir(6,jA)),z(3),le("routerLink",ir(7,BA)),z(3),le("routerLink",ir(8,VA)),z(3),le("routerLink",ir(9,HA)),z(3),le("routerLink",ir(10,$A)),z(3),le("routerLink",ir(11,UA)))},dependencies:[We,Ms,bi,ph],styles:[".nav-link[_ngcontent-%COMP%]{font-family:Inter,sans-serif;text-decoration:none}"]})};var rt={profileUrl:"https://avatars.githubusercontent.com/u/33938427?s=460&u=8d75b0e5a475bc8cd6f94aa5612e2b86faff6207&v=4",userName:"Ganesh Guram",userJob:"Software Engineer",userLocation:"Hyderbad,India,500008",userEmail:"gk4309303@gmail.com",userDateOfBirth:"31/10/1999",userAddress:"Hyderbad,India,500008.",userPhone:"+91 8309600944",aboutMe:"Ganesh Guram, A passionate developer with 3+ years of experience designing, developing, and delivering innovative software solutions. Proven adaptability to emerging technologies and a track record of providing cutting-edge tools to solve complex challenges. Recognized as a reliable leader committed to driving results and advancing organizational objectives."},mb=["Java","Python","Angular","Data Structures & Algorithms","Amazon Web Services(AWS)","Javascript","Spring Boot","MySql","MongoDB","Deep Learning","Android Application Development","Devops"],vb=[{company:"DBS Tech India",rank:"Software Engineer",Start_Date:"15/08/2022",End_Date:"Present",description:["Designed a high-performance Spring Boot Document Viewer, collaborating with stakeholders to support all file types(including office files), serving 10K+ documents daily from 3M+ processed.","Architected an Archival Framework for IBPM using stored procedures, optimizing 80+ transaction tables and reducing app load time by 35% with adaptability to evolving needs.","Deployed a rule engine for business processes, leveraging communication skills to align with business needs, processing 3M+ onboarding applications.","Enhanced CI/CD pipelines through problem-solving, automating password rotation and security checks, reducing vulnerabilities and streamlining credential management.","Led Spring Boot and JBoss upgrades with strong leadership, cutting downtime by 20% and boosting performance by 30%, saving 10 hours of manual work weekly."]},{company:"Cognizant",rank:"Intern",Start_Date:"03/2022",End_Date:"08/2022",description:["Built full-stack web applications using Spring ,Angular, JavaScript and HTML, demonstrating adaptability and earning a full-time role offer through effective collaboration."]},{company:"Virtusa",rank:"Intern Technology",Start_Date:"05/2021",End_Date:"11/2021",description:["Developed embedded device code with MicroPython and MQTT for real-time updates, deployed to 1000+ devices across 100 hospitals with strong problem-solving skills.","Optimized code for efficiency and reliability through cross-functional collaboration, ensuring seamless performance across teams."]}];var yb=[{name:"Emotion Based Music Player",type:"Android Application",description:"Created an Android music player using TensorFlow and Python, achieving 90% accuracy in real-time emotion detection with VGG16 model. Dynamically curated playlists based on 5 distinct emotions, enhancing user experience.",technologies:["TensorFlow","Python","Android Native Development","Java","Deep Learning"],githubLink:"https://github.com/GuramGanesh/Emotion-Player",videoLink:"https://drive.google.com/file/d/1XES4mJJctzV69Y71b4NdY7DDjtDYHI0Bzw/view?usp=sharing",achievements:["Achieved low-latency emotion inference optimized for mobile performance.","Seamlessly integrated AI model into Android using TFLite conversion and optimization.","Built a user-friendly UI with smooth playlist transitions and emotion-tracking visualization.","Improved user experience by offering emotion-based music curation rather than traditional genre or artist filtering."]},{name:"Hospital Inventory Management REST API",type:"Web Application",description:"Developed a NodeJS-based API with two primary routes for hospital inventory data management, showcasing leadership in scalable design. Ensured data retrieval and manipulation met practical needs.",technologies:["Node.js","MongoDB","Express.js","JavaScript"],githubLink:"https://github.com/GuramGanesh/HospitalInventoryAPI",videoLink:"https://www.youtube.com/watch?v=0g1v2x4X8aA",achievements:["Designed a RESTful API with two primary routes for hospital inventory data management.","Implemented CRUD operations for efficient data retrieval and manipulation.","Ensured the API met practical needs and was scalable for future enhancements."]},{name:"CropYieldPredictor",type:"Python Web Application",description:"Developed a web application using Flask and Python for crop yield prediction, utilizing machine learning algorithms to analyze agricultural data and provide accurate forecasts.",technologies:["Flask","Python","Machine Learning"],githubLink:"https://github.com/GuramGanesh/CropYieldPredictor",videoLink:"https://www.youtube.com/watch?v=0g1v2x4X8aA",achievements:["Implemented machine learning algorithms for accurate crop yield predictions.","Designed a user-friendly interface for easy data input and result visualization.","Optimized the application for performance and scalability."]}],bb=["Earned 7 recognitions for driving project success and leadership at DBS Tech India, including optimizing system performance and delivering scalable solutions (2022-Present)","Awarded Super Techie Q1 2024 and Best Accelerated Promotion for technical excellence and effective communication","Honored as Best Student of the Year by Government Institute of Electronics for academic leadership and collaboration"],Rs={github:"https://github.com/RamkiGanesh007",X:"https://x.com/ramkiganesh07",linkedin:"https://www.linkedin.com/in/ganesh-guram-b37455150/",medium:"https://medium.com/@gk4309303"},wb="https://raw.githubusercontent.com/GuramGanesh/RamkiGanesh007/main/R_GaneshGuram_Latest.pdf";function zA(r,t){if(r&1&&H(0,"img",17),r&2){let e=dt();le("src",e._profileUrl,Ct)}}function GA(r,t){if(r&1&&(T(0,"a",18),H(1,"i",19),M()),r&2){let e=dt();ii("href",e._github,Ct)}}function WA(r,t){if(r&1&&(T(0,"a",20),H(1,"i",21),M()),r&2){let e=dt();ii("href",e._linkedin,Ct)}}function qA(r,t){if(r&1&&(T(0,"a",18),H(1,"i",22),M()),r&2){let e=dt();ii("href",e._medium,Ct)}}function YA(r,t){if(r&1&&(T(0,"a",23),H(1,"i",24),M()),r&2){let e=dt();ii("href",e._x,Ct)}}var rl=class r{calculateAge(t){let[e,n,i]=t.split("/").map(Number),s=new Date(i,n-1,e),o=new Date;if(isNaN(s.getTime()))return console.error("Invalid date format:",t),NaN;let a=o.getFullYear()-s.getFullYear(),l=o.getMonth()-s.getMonth();return(l<0||l===0&&o.getDate()<s.getDate())&&a--,a}_profileUrl;_userName;_userJob;_userLocation;_userEmail;_userPhone;_userDateOfBirth;_github;_linkedin;_x;_medium;constructor(){this._profileUrl=rt.profileUrl,this._github=Rs.github,this._x=Rs.X,this._linkedin=Rs.linkedin,this._medium=Rs.medium,this._userName=rt.userName,this._userJob=rt.userJob,this._userLocation=rt.userLocation,this._userDateOfBirth=rt.userDateOfBirth,this._userEmail=rt.userEmail,this._userPhone=rt.userPhone}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-Profile"]],decls:35,vars:18,consts:[["class","img-fluid rounded","alt","Profile Photo","width","260px","height","260px",3,"src",4,"ngIf"],[1,"mt-3","text-center"],[1,"text-center"],[1,"container-fluid","about-me",2,"font-size","1em"],["aria-hidden","true",1,"fa","fa-map-marker","text-right",2,"color","#333","font-size","1.8em"],["target","_blank",2,"font-size","1.3em","color","#333","text-decoration","none",3,"href"],["aria-hidden","true",1,"fa","fa-envelope-o","text-right",2,"color","#333","font-size","1.8em"],[2,"font-size","1.2em","color","#333","text-decoration","none",3,"href"],["aria-hidden","true",1,"fa","fa-phone","text-right",2,"color","#333","font-size","1.8em"],[2,"font-size","1.3em","color","#333","text-decoration","none",3,"href"],["aria-hidden","true",1,"fa","fa-birthday-cake","text-right",2,"font-size","1.8em","color","#333","font-size","1.8em"],[2,"font-size","1.3em","color","#333","text-decoration","none",3,"title"],[1,"row","d-flex","align-content-center"],[1,"col-md-12","social-media","d-flex","justify-content-between"],["target","_blank","style","color: black; text-decoration: none;",3,"href",4,"ngIf"],["target","_blank","style","color: darkblue; text-decoration: none;",3,"href",4,"ngIf"],["target","_blank","style","color: rgb(2, 2, 2); text-decoration: none;",3,"href",4,"ngIf"],["alt","Profile Photo","width","260px","height","260px",1,"img-fluid","rounded",3,"src"],["target","_blank",2,"color","black","text-decoration","none",3,"href"],["aria-hidden","true",1,"fa","fa-github","profile-icon",2,"font-size","1.5em"],["target","_blank",2,"color","darkblue","text-decoration","none",3,"href"],["aria-hidden","true",1,"fa","fa-linkedin","profile-icon",2,"font-size","1.5em"],["aria-hidden","true",1,"fa","fa-medium","profile-icon",2,"font-size","1.5em"],["target","_blank",2,"color","rgb(2, 2, 2)","text-decoration","none",3,"href"],[1,"fa","fa-brands","fa-twitter","profile-icon",2,"color","#000000","font-size","1.5em"]],template:function(e,n){e&1&&(Ze(0,zA,1,1,"img",0),T(1,"h4",1)(2,"b"),K(3),M()(),T(4,"h6",2),K(5),M(),H(6,"br")(7,"hr")(8,"br"),T(9,"div",3)(10,"p"),H(11,"i",4),T(12,"a",5),K(13),M()(),H(14,"br"),T(15,"p"),H(16,"i",6),T(17,"a",7),K(18),M()(),H(19,"br"),T(20,"p"),H(21,"i",8),T(22,"a",9),K(23),M()(),H(24,"br"),T(25,"p"),H(26,"i",10),T(27,"span",11),K(28),M()()(),T(29,"div",12)(30,"div",13),Ze(31,GA,2,1,"a",14)(32,WA,2,1,"a",15)(33,qA,2,1,"a",14)(34,YA,2,1,"a",16),M()()),e&2&&(le("ngIf",n._profileUrl),z(3),$e(n._userName),z(2),$e(n._userJob),z(7),si("href","https://www.google.com/maps/search/",n._userLocation,"",Ct),z(),$e(n._userLocation),z(4),si("href","mailto:",n._userEmail,"",Ct),z(),$e(n._userEmail),z(4),si("href","tel:",n._userPhone,"",Ct),z(),$e(n._userPhone),z(4),le("title","Age: "+n.calculateAge(n._userDateOfBirth)),z(),rr(" ",n._userDateOfBirth," "),z(3),le("ngIf",n._github),z(),le("ngIf",n._linkedin),z(),le("ngIf",n._medium),z(),le("ngIf",n._x))},dependencies:[We,ss],styles:[".profile-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#000;padding:2px;text-align:center}.social-media[_ngcontent-%COMP%]{margin:20px 0 0;text-align:center;font-family:Inter,sans-serif;border:1px solid lightgray;border-radius:10px;padding:5px}.about-me[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;width:30px}.about-me[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.7vw}.container-fluid[_ngcontent-%COMP%]{margin-left:-15px!important}.text-center[_ngcontent-%COMP%]{font-family:Inter,sans-serif!important}"]})};var il=class r{title="portfolio";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"row","d-flex","vh-100","align-items-center",2,"margin-bottom","-20px"],[1,"col"],[1,"col-md-2"],[1,"card"],[1,"card-body","align-self-center",2,"height","700px"],[1,"col-md-6"],[2,"min-height","700px !important","background-color","#ffffff","height","700px"],[1,"d-flex","justify-content-center","mb-10"],[1,"text-grey",2,"text-decoration","solid","padding","1px"]],template:function(e,n){e&1&&(T(0,"div",0),H(1,"div",1),T(2,"div",2)(3,"div",3)(4,"div",4),H(5,"app-Profile"),M()()(),T(6,"div",5)(7,"div",6),H(8,"app-Nav")(9,"router-outlet"),M()(),H(10,"div",1),M(),T(11,"div",7)(12,"p",8),K(13," This Application is built on Angular 19,All Copyrights Reserved@2025 "),M()())},dependencies:[rl,nl,Ms,Ss],encapsulation:2})};var Ls={};Ls.d=(r,t)=>{for(var e in t)Ls.o(t,e)&&!Ls.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};Ls.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var B=globalThis.pdfjsLib={};Ls.d(B,{AbortException:()=>nn,AnnotationEditorLayer:()=>BI,AnnotationEditorParamsType:()=>te,AnnotationEditorType:()=>G,AnnotationEditorUIManager:()=>Hs,AnnotationLayer:()=>Pf,AnnotationMode:()=>Bn,AnnotationType:()=>Te,ColorPicker:()=>$l,DOMSVGFactory:()=>Ai,DrawLayer:()=>zf,FeatureTest:()=>Oe,GlobalWorkerOptions:()=>fr,ImageKind:()=>hl,InvalidPDFException:()=>js,MathClamp:()=>mt,OPS:()=>Ot,OutputScale:()=>_n,PDFDataRangeTransport:()=>Tl,PDFDateString:()=>gl,PDFWorker:()=>Ci,PasswordResponses:()=>QA,PermissionFlag:()=>ZA,PixelsPerInch:()=>Hn,RenderingCancelledException:()=>Vs,ResponseException:()=>Si,SignatureExtractor:()=>Vn,SupportedImageMimeTypes:()=>Ch,TextLayer:()=>zs,TouchManager:()=>ml,Util:()=>k,VerbosityLevel:()=>Wl,XfaLayer:()=>Nl,build:()=>FI,createValidAbsoluteUrl:()=>nI,fetchData:()=>Qs,getDocument:()=>RI,getFilenameFromUrl:()=>uI,getPdfFilenameFromUrl:()=>dI,getUuid:()=>jb,getXfaPageViewport:()=>hI,isDataScheme:()=>Xl,isPdfFile:()=>qf,isValidExplicitDest:()=>OI,noContextMenu:()=>Lt,normalizeUnicode:()=>aI,setLayerDimensions:()=>pr,shadow:()=>ee,stopEvent:()=>Me,version:()=>LI});var Ue=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Lb=[1,0,0,1,0,0],Eh=[.001,0,0,.001,0,0],dl=1.35,XA=.35,EL=XA/dl,gt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Bn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},KA="pdfjs_internal_editor_",G={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},te={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},ZA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var wi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var Wl={ERRORS:0,WARNINGS:1,INFOS:5},Ot={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},QA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},ql=Wl.WARNINGS;function JA(r){Number.isInteger(r)&&(ql=r)}function eI(){return ql}function Yl(r){ql>=Wl.INFOS&&console.log(`Info: ${r}`)}function Y(r){ql>=Wl.WARNINGS&&console.log(`Warning: ${r}`)}function pe(r){throw new Error(r)}function Re(r,t){r||pe(t)}function tI(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nI(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=oI(r)}catch{}let n=t?URL.parse(r,t):URL.parse(r);return tI(n)?n:null}function ee(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}var yr=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}(),fl=class extends yr{constructor(t,e){super(t,"PasswordException"),this.code=e}},Fs=class extends yr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},js=class extends yr{constructor(t){super(t,"InvalidPDFException")}},Si=class extends yr{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}},Dh=class extends yr{constructor(t){super(t,"FormatError")}},nn=class extends yr{constructor(t){super(t,"AbortException")}};function Fb(r){(typeof r!="object"||r?.length===void 0)&&pe("Invalid argument for bytesToString");let t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);let n=[];for(let i=0;i<t;i+=e){let s=Math.min(i+e,t),o=r.subarray(i,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Zs(r){typeof r!="string"&&pe("Invalid argument for stringToBytes");let t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function rI(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function Gf(r){let t=Object.create(null);for(let[e,n]of r)t[e]=n;return t}function iI(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function sI(){try{return new Function(""),!0}catch{return!1}}var Oe=class{static get isLittleEndian(){return ee(this,"isLittleEndian",iI())}static get isEvalSupported(){return ee(this,"isEvalSupported",sI())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ee(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof navigator?.platform=="string"&&typeof navigator?.userAgent=="string"){let{platform:t,userAgent:e}=navigator;return ee(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return ee(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return ee(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},vh=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),k=class{static makeHexColor(t,e,n){return`#${vh[t]}${vh[e]}${vh[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){let n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){let n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,s=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,s]}static getAxialAlignedBoundingBox(t,e){let n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],s[0],o[0]),Math.min(n[1],i[1],s[1],o[1]),Math.max(n[0],i[0],s[0],o[0]),Math.max(n[1],i[1],s[1],o[1])]}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){let e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(n+o)/2,l=Math.sqrt((n+o)**2-4*(n*o-s*i))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;let s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>o?null:[n,s,i,o]}static#e(t,e,n,i,s,o,a,l,c,u){if(c<=0||c>=1)return;let d=1-c,h=c*c,f=h*c,p=d*(d*(d*t+3*c*e)+3*h*n)+f*i,g=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(t,e,n,i,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(t,e,n,i,s,o,a,l,-d/u,h);return}let f=u**2-4*d*c;if(f<0)return;let p=Math.sqrt(f),g=2*c;this.#e(t,e,n,i,s,o,a,l,(-u+p)/g,h),this.#e(t,e,n,i,s,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(t,e,n,i,s,o,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],this.#t(t,n,s,a,e,i,o,l,3*(-t+3*(n-s)+a),6*(t-2*n+s),3*(n-t),c),this.#t(t,n,s,a,e,i,o,l,3*(-e+3*(i-o)+l),6*(e-2*i+o),3*(i-e),c),c}};function oI(r){return decodeURIComponent(escape(r))}var yh=null,_b=null;function aI(r){return yh||(yh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,_b=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(yh,(t,e,n)=>e?e.normalize("NFKC"):_b.get(n))}function jb(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);return crypto.getRandomValues(r),Fb(r)}var Wf="pdfjs_internal_id_";function lI(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;let[n,i,...s]=e;if(!r(n)&&!Number.isInteger(n)||!t(i))return!1;let o=s.length,a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(let l of s)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function mt(r,t,e){return Math.min(Math.max(r,t),e)}function Bb(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Fb(r))}function cI(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Zs(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});var wn="http://www.w3.org/2000/svg",Hn=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function Qs(r,t="text"){return I(this,null,function*(){if(_i(r,document.baseURI)){let e=yield fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{let i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})})}var Bs=class r{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=o,n*=e;let l=(t[2]+t[0])/2,c=(t[3]+t[1])/2,u,d,h,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,h=0,f=1;break;case 90:u=0,d=1,h=1,f=0;break;case 270:u=0,d=-1,h=-1,f=0;break;case 0:u=1,d=0,h=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,f=-f);let p,g,v,m;u===0?(p=Math.abs(c-t[1])*n+s,g=Math.abs(l-t[0])*n+o,v=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(p=Math.abs(l-t[0])*n+s,g=Math.abs(c-t[1])*n+o,v=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[u*n,d*n,h*n,f*n,p-u*n*l-h*n*c,g-d*n*l-f*n*c],this.width=v,this.height=m}get rawDims(){let t=this.viewBox;return ee(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){return k.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){let e=k.applyTransform([t[0],t[1]],this.transform),n=k.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return k.applyInverseTransform([t,e],this.transform)}},Vs=class extends yr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Xl(r){let t=r.length,e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function qf(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function uI(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function dI(r,t="document.pdf"){if(typeof r!="string")return t;if(Xl(r))return Y('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(r),s=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||t}var pl=class{started=Object.create(null);times=[];time(t){t in this.started&&Y(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Y(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:n}of this.times)e=Math.max(n.length,e);for(let{name:n,start:i,end:s}of this.times)t.push(`${n.padEnd(e)} ${s-i}ms
`);return t.join("")}};function _i(r,t){let e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Lt(r){r.preventDefault()}function Me(r){r.preventDefault(),r.stopPropagation()}var gl=class{static#e;static toDateObject(t){if(!t||typeof t!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#e.exec(t);if(!e)return null;let n=parseInt(e[1],10),i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(n,i,s,o,a,l))}};function hI(r,{scale:t=1,rotation:e=0}){let{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new Bs({viewBox:s,userUnit:1,scale:t,rotation:e})}function Yf(r){if(r.startsWith("#")){let t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Y(`Not a valid color format: "${r}"`),[0,0,0])}function fI(r){let t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(let e of r.keys()){t.style.color=e;let n=window.getComputedStyle(t).color;r.set(e,Yf(n))}t.remove()}function ve(r){let{a:t,b:e,c:n,d:i,e:s,f:o}=r.getTransform();return[t,e,n,i,s,o]}function en(r){let{a:t,b:e,c:n,d:i,e:s,f:o}=r.getTransform().invertSelf();return[t,e,n,i,s,o]}function pr(r,t,e=!1,n=!0){if(t instanceof Bs){let{pageWidth:i,pageHeight:s}=t.rawDims,{style:o}=r,a=Oe.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&r.setAttribute("data-main-rotation",t.rotation)}var _n=class r{constructor(){let{pixelRatio:t}=r;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i){let s=1/0,o=1/0,a=1/0;n>0&&(s=Math.sqrt(n/(t*e))),i!==-1&&(o=i/t,a=i/e);let l=Math.min(s,o,a);return this.sx>l||this.sy>l?(this.sx=l,this.sy=l,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}},Ch=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],Sh=class r{#e=null;#t=null;#n;#r=null;#s=null;#i=null;static#l=null;constructor(t){this.#n=t,r.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){let t=this.#e=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Lt,{signal:e}),t.addEventListener("pointerdown",r.#a,{signal:e});let n=this.#r=document.createElement("div");n.className="buttons",t.append(n);let i=this.#n.toolbarPosition;if(i){let{style:s}=t,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),t}get div(){return this.#e}static#a(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,Me(t)}#c(t){this.#n._focusEventsAllowed=!0,Me(t)}#h(t){let e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Lt,{signal:e})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#u(){let{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",r.#l[t]),this.#h(n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#r.append(n)}get#f(){let t=document.createElement("div");return t.className="divider",t}addAltText(t){return I(this,null,function*(){let e=yield t.render();this.#h(e),this.#r.prepend(e,this.#f),this.#s=t})}addColorPicker(t){this.#t=t;let e=t.renderButton();this.#h(e),this.#r.prepend(e,this.#f)}addEditSignatureButton(t){return I(this,null,function*(){let e=this.#i=yield t.renderEditButton(this.#n);this.#h(e),this.#r.prepend(e,this.#f)})}updateEditSignatureButton(t){this.#i&&(this.#i.title=t)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},Ah=class{#e=null;#t=null;#n;constructor(t){this.#n=t}#r(){let t=this.#t=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Lt,{signal:this.#n._signal});let e=this.#e=document.createElement("div");return e.className="buttons",t.append(e),this.#i(),t}#s(t,e){let n=0,i=0;for(let s of t){let o=s.y+s.height;if(o<n)continue;let a=s.x+(e?s.width:0);if(o>n){i=a,n=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,n]}show(t,e,n){let[i,s]=this.#s(e,n),{style:o}=this.#t||=this.#r();t.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(){let t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=this.#n._signal;t.addEventListener("contextmenu",Lt,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#e.append(t)}};function Xf(r,t,e){for(let n of e)t.addEventListener(n,r[n].bind(r))}var Ih=class{#e=0;get id(){return`${KA}${this.#e++}`}},xh=class r{#e=jb();#t=0;#n=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;let s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ee(this,"_isSVGFittingCanvas",s)}#r(t,e){return I(this,null,function*(){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(n.url=e,i=yield Qs(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){let s=r._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},o.onload=()=>I(this,null,function*(){let d=n.svgUrl=o.result;a.src=(yield s)?`${d}#svgView(preserveAspectRatio(none))`:d}),a.onerror=o.onerror=u});o.readAsDataURL(i),yield l}else n.bitmap=yield createImageBitmap(i);n.refCounter=1}catch(i){Y(i),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n})}getFromFile(t){return I(this,null,function*(){let{lastModified:e,name:n,size:i,type:s}=t;return this.#r(`${e}_${n}_${i}_${s}`,t)})}getFromUrl(t){return I(this,null,function*(){return this.#r(t,t)})}getFromBlob(t,e){return I(this,null,function*(){let n=yield e;return this.#r(t,n)})}getFromId(t){return I(this,null,function*(){this.#n||=new Map;let e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;let i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){let e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;let e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:n}=e;if(!e.url&&!e.file){let i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#e}_`)}},Th=class{#e=[];#t=!1;#n;#r=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),this.#t)return;let l={cmd:t,undo:e,post:n,type:s};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(l);return}if(o&&this.#e[this.#r].type===s){a&&(l.undo=this.#e[this.#r].undo),this.#e[this.#r]=l;return}let c=this.#r+1;c===this.#n?this.#e.splice(0,1):(this.#r=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#r===-1)return;this.#t=!0;let{undo:t,post:e}=this.#e[this.#r];t(),e?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;let{cmd:t,post:e}=this.#e[this.#r];t(),e?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(t){if(this.#r!==-1){for(let e=this.#r;e>=0;e--)if(this.#e[e].type!==t){this.#e.splice(e+1,this.#r-e),this.#r=e;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}},gr=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=Oe.platform;for(let[n,i,s={}]of t)for(let o of n){let a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let n=this.callbacks.get(this.#e(e));if(!n)return;let{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...o,e)(),s||Me(e))}},Mh=class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return fI(t),ee(this,"_colors",t)}convert(t){let e=Yf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[n,i]of this._colors)if(i.every((s,o)=>s===e[o]))return r._colorsMapping.get(n);return e}getHexCode(t){let e=this._colors.get(t);return e?k.makeHexColor(...e):t}},Hs=(()=>{class r{#e=new AbortController;#t=null;#n=new Map;#r=new Map;#s=null;#i=null;#l=null;#a=new Th;#d=null;#c=null;#h=0;#u=new Set;#f=null;#o=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#v=!1;#y=null;#b=null;#_=null;#D=null;#S=!1;#I=null;#T=new Ih;#E=!1;#x=!1;#A=null;#R=null;#N=null;#k=null;#V=null;#C=G.NONE;#w=new Set;#F=null;#j=null;#U=null;#z=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#O=null;#$=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=r.prototype,n=a=>a.#O.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ee(this,"_keyboardManager",new gr([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#O.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#O.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(e,n,i,s,o,a,l,c,u,d,h,f,p,g){let v=this._signal=this.#e.signal;this.#O=e,this.#$=n,this.#s=i,this.#j=s,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:v}),this.#re(),this.#ae(),this.#K(),this.#i=a.annotationStorage,this.#y=a.filterFactory,this.#U=l,this.#D=c||null,this.#m=u,this.#g=d,this.#v=h,this.#V=f||null,this.viewParameters={realScale:Hn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=g!==!1}destroy(){this.#L?.resolve(),this.#L=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#k?.clear(),this.#t=null,this.#w.clear(),this.#a.destroy(),this.#s?.destroy(),this.#j?.destroy(),this.#I?.hide(),this.#I=null,this.#N?.destroy(),this.#N=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return ee(this,"hcmFilter",this.#U?this.#y.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return ee(this,"direction",getComputedStyle(this.#O).direction)}get highlightColors(){return ee(this,"highlightColors",this.#D?new Map(this.#D.split(",").map(e=>e.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=e}setMainHighlightColorPicker(e){this.#N=e}editAltText(e,n=!1){this.#s?.editAltText(this,e,n)}getSignature(e){this.#j?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#j}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=n;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#O.focus()}findParent(e,n){for(let i of this.#r.values()){let{x:s,y:o,width:a,height:l}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&n>=o&&n<=o+l)return i}return null}disableUserSelect(e=!1){this.#$.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Hn.PDF_TO_CSS_UNITS;for(let n of this.#p)n.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#X(e){let{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(let i of this.#r.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e=""){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=n,l=n.toString(),u=this.#q(n).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;n.empty();let h=this.#X(u),f=this.#C===G.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(G.HIGHLIGHT,p);return}p()}#te(){let e=document.getSelection();if(!e||e.isCollapsed)return;let i=this.#q(e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#I||=new Ah(this),this.#I.show(i,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}#ne(){let e=document.getSelection();if(!e||e.isCollapsed){this.#F&&(this.#I?.hide(),this.#F=null,this.#M({hasSelectedText:!1}));return}let{anchorNode:n}=e;if(n===this.#F)return;let s=this.#q(e).closest(".textLayer");if(!s){this.#F&&(this.#I?.hide(),this.#F=null,this.#M({hasSelectedText:!1}));return}if(this.#I?.hide(),this.#F=n,this.#M({hasSelectedText:!0}),!(this.#C!==G.HIGHLIGHT&&this.#C!==G.NONE)&&(this.#C===G.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){let o=this.#C===G.HIGHLIGHT?this.#X(s):null;o?.toggleDrawing();let a=new AbortController,l=this.combinedSignal(a),c=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#Y(e=""){this.#C===G.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#te()}#re(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#ie(){if(this.#_)return;this.#_=new AbortController;let e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#se(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Y("main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let n of this.#w)if(n.div.contains(e)){this.#R=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;let[e,n]=this.#R;this.#R=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#K(){if(this.#A)return;this.#A=new AbortController;let e=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#oe(){this.#A?.abort(),this.#A=null}#Z(){if(this.#d)return;this.#d=new AbortController;let e=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Q(){this.#d?.abort(),this.#d=null}#ae(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#K(),this.#Z()}removeEditListeners(){this.#oe(),this.#Q()}dragOver(e){for(let{type:n}of e.dataTransfer.items)for(let i of this.#o)if(i.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let n of e.dataTransfer.items)for(let i of this.#o)if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let n=[];for(let i of this.#w){let s=i.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){return I(this,null,function*(){e.preventDefault();let{clipboardData:n}=e;for(let o of n.items)for(let a of this.#o)if(a.isHandlingMimeForPasting(o.type)){a.paste(o,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Y(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();let s=this.currentLayer;try{let o=[];for(let c of i){let u=yield s.deserialize(c);if(!u)return;o.push(u)}let a=()=>{for(let c of o)this.#J(c);this.#ee(o)},l=()=>{for(let c of o)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(o){Y(`paste: "${o.message}".`)}})}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==G.NONE&&!this.isEditorHandlingKeyboard&&r._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Y("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(e){Object.entries(e).some(([i,s])=>this.#G[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,e)}),this.#C===G.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#B([[te.HIGHLIGHT_FREE,!0]]))}#B(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ie(),this.#Z(),this.#M({isEditing:this.#C!==G.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#se(),this.#Q(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#o){this.#o=e;for(let n of this.#o)this.#B(n.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#r.get(this.#h)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#r.set(e.pageIndex,e),this.#E?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}updateMode(e,n=null,i=!1){return I(this,null,function*(){if(this.#C!==e&&!(this.#L&&(yield this.#L.promise,!this.#L))){if(this.#L=Promise.withResolvers(),this.#C=e,e===G.NONE){this.setEditingState(!1),this.#ce(),this._editorUndoBar?.hide(),this.#L.resolve();return}e===G.SIGNATURE&&(yield this.#j?.loadSignatures()),this.setEditingState(!0),yield this.#le(),this.unselectAll();for(let s of this.#r.values())s.updateMode(e);if(!n){i&&this.addNewEditorFromKeyboard(),this.#L.resolve();return}for(let s of this.#n.values())s.annotationElementId===n?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#L.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,n){if(this.#o){switch(e){case te.CREATE:this.currentLayer.addNewEditor(n);return;case te.HIGHLIGHT_DEFAULT_COLOR:this.#N?.updateColor(n);break;case te.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(e,n),this.showAllEditors("highlight",n);break}for(let i of this.#w)i.updateParams(e,n);for(let i of this.#o)i.updateDefaultParams(e,n)}}showAllEditors(e,n,i=!1){for(let o of this.#n.values())o.editorType===e&&o.show(n);(this.#z?.get(te.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#B([[te.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#x!==e){this.#x=e;for(let n of this.#r.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}#le(){return I(this,null,function*(){if(!this.#E){this.#E=!0;let e=[];for(let n of this.#r.values())e.push(n.enable());yield Promise.all(e);for(let n of this.#n.values())n.enable()}})}#ce(){if(this.unselectAll(),this.#E){this.#E=!1;for(let e of this.#r.values())e.disable();for(let e of this.#n.values())e.disable()}}getEditors(e){let n=[];for(let i of this.#n.values())i.pageIndex===e&&n.push(i);return n}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#u.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#u.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#u.has(e)}removeDeletedAnnotationElement(e){this.#u.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#J(e){let n=this.#r.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#B(e.propertiesToUpdate))}get#ue(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ue===e&&this.#B(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#B(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){this.#c?.commitOrRemove();for(let n of this.#w)n!==e&&n.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#M({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(e){this.#a.cleanType(e)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let n=e?[e]:[...this.#w],i=()=>{this._editorUndoBar?.show(s,n.length===1?n[0].editorType:n.length);for(let o of n)o.remove()},s=()=>{for(let o of n)this.#J(o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ee(e){for(let n of this.#w)n.unselect();this.#w.clear();for(let n of e)n.isEmpty()||(this.#w.add(n),n.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#w)e.commit();this.#ee(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==G.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(let e of this.#w)e.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=n;let[s,o]=this.#H,a=[...this.#w],l=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(let c of a)this.#n.has(c.id)&&(c.translateInPage(s,o),c.translationDone())},undo:()=>{for(let c of a)this.#n.has(c.id)&&(c.translateInPage(-s,-o),c.translationDone())},mustExec:!1})},l);for(let c of a)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(let e of this.#w)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);let e=this.#f;this.#f=null;let n=!1;for(let[{x:s,y:o,pageIndex:a},l]of e)l.newX=s,l.newY=o,l.newPageIndex=a,n||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!n)return!1;let i=(s,o,a,l)=>{if(this.#n.has(s.id)){let c=this.#r.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(let[s,{newX:o,newY:a,newPageIndex:l}]of e)i(s,o,a,l)},undo:()=>{for(let[s,{savedX:o,savedY:a,savedPageIndex:l}]of e)i(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#f)for(let i of this.#f.keys())i.drag(e,n)}rebuild(e){if(e.parent===null){let n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}get imageManager(){return ee(this,"imageManager",new xh)}getSelectionBoxes(e){if(!e)return null;let n=document.getSelection();for(let u=0,d=n.rangeCount;u<d;u++)if(!e.contains(n.getRangeAt(u).commonAncestorContainer))return null;let{x:i,y:s,width:o,height:a}=e.getBoundingClientRect(),l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-i)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-i)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-i)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-i)/o,y:(d-s)/a,width:h/o,height:f/a});break}let c=[];for(let u=0,d=n.rangeCount;u<d;u++){let h=n.getRangeAt(u);if(!h.collapsed)for(let{x:f,y:p,width:g,height:v}of h.getClientRects())g===0||v===0||c.push(l(f,p,g,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#l||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){let n=this.#l?.get(e.data.id);if(!n)return;let i=this.#i.getRawValue(n);i&&(this.#C===G.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,n,i){let s=this.#k?.get(e);s&&(s.setCanvas(n,i),this.#k.delete(e))}addMissingCanvas(e,n){(this.#k||=new Map).set(e,n)}}return r})(),Eb=(()=>{class r{#e=null;#t=!1;#n=null;#r=null;#s=null;#i=null;#l=!1;#a=null;#d=null;#c=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#d=e,this.#u=e._uiManager.useNewAltTextFlow,r.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){r._l10n??=e}render(){return I(this,null,function*(){let e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";let n=this.#r=document.createElement("span");e.append(n),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",r.#f.missing),n.setAttribute("data-l10n-id",r.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=this.#d._uiManager._signal;e.addEventListener("contextmenu",Lt,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});let s=o=>{o.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#u&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#o}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#l=!0,s(o))},{signal:i}),yield this.#p(),e})}get#o(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}setGuessedText(e){return I(this,null,function*(){this.#e===null&&(this.#c=e,this.#h=yield r._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())})}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){let n=this.#a=document.createElement("div");n.className="noAltTextBadge",this.#d.div.append(n)}this.#a.classList.toggle("hidden",!e)}serialize(e){let n=this.#e;return!e&&this.#c===n&&(n=this.#h),{altText:n,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:n,guessedText:i,textWithDisclaimer:s,cancel:o=!1}){i&&(this.#c=i,this.#h=s),!(this.#e===e&&this.#t===n)&&(o||(this.#e=e,this.#t=n),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#o}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#s=null,this.#a?.remove(),this.#a=null}#p(){return I(this,null,function*(){let e=this.#n;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",r.#f[this.#o]),this.#r?.setAttribute("data-l10n-id",r.#f[`${this.#o}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#s;if(!n){this.#s=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#d.id}`;let s=100,o=this.#d._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#s.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s?.classList.remove("show")},{signal:o})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||e.append(n),this.#d.getElementForAltText()?.setAttribute("aria-describedby",n.id)})}}return r})(),ml=class r{#e;#t=!1;#n=null;#r;#s;#i;#l;#a=null;#d;#c=null;#h;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){this.#e=t,this.#n=n,this.#r=e,this.#s=i,this.#i=s,this.#l=o,this.#h=new AbortController,this.#d=AbortSignal.any([a,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#d})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/_n.pixelRatio}#f(t){if(this.#r?.())return;if(t.touches.length===1){if(this.#a)return;let i=this.#a=new AbortController,s=AbortSignal.any([this.#d,i.signal]),o=this.#e,a={capture:!0,signal:s,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(Me(c),l(c))},a),o.addEventListener("pointerup",l,a),o.addEventListener("pointercancel",l,a);return}if(!this.#u){this.#u=new AbortController;let i=AbortSignal.any([this.#d,this.#u.signal]),s=this.#e,o={signal:i,capture:!1,passive:!1};s.addEventListener("touchmove",this.#o.bind(this),o);let a=this.#p.bind(this);s.addEventListener("touchend",a,o),s.addEventListener("touchcancel",a,o),o.capture=!0,s.addEventListener("pointerdown",Me,o),s.addEventListener("pointermove",Me,o),s.addEventListener("pointercancel",Me,o),s.addEventListener("pointerup",Me,o),this.#s?.()}if(Me(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#o(t){if(!this.#c||t.touches.length!==2)return;Me(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);let{screenX:i,screenY:s}=e,{screenX:o,screenY:a}=n,l=this.#c,{touch0X:c,touch0Y:u,touch1X:d,touch1Y:h}=l,f=d-c,p=h-u,g=o-i,v=a-s,m=Math.hypot(g,v)||1,b=Math.hypot(f,p)||1;if(!this.#t&&Math.abs(b-m)<=r.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!this.#t){this.#t=!0;return}let y=[(i+o)/2,(s+a)/2];this.#i?.(y,b,m)}#p(t){t.touches.length>=2||(this.#u.abort(),this.#u=null,this.#l?.(),this.#c&&(Me(t),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}},ye=class r{#e=null;#t=null;#n=null;#r=!1;#s=null;#i="";#l=!1;#a=null;#d=null;#c=null;#h=null;#u="";#f=!1;#o=null;#p=!1;#m=!1;#g=!1;#v=null;#y=0;#b=0;#_=null;#D=null;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#I=r._zIndex++;static _borderLineWidth=-1;static _colorManager=new Mh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=r.prototype._resizeWithKeyboard,e=Hs.TRANSLATE_SMALL,n=Hs.TRANSLATE_BIG;return ee(this,"_resizerKeyboardManager",new gr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],r.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;let{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,o];let[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new Rh({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(r._l10n??=t,r._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),r._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);r._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){pe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#I}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#$(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){let[s,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/s,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){let[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}#T([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#T(this.parentDimensions,t,e)}translateInPage(t,e){this.#o||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#o||=[this.x,this.y,this.width,this.height];let{div:n,parentDimensions:[i,s]}=this;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this,[l,c]=this.getBaseTranslation();o+=l,a+=c;let{style:u}=n;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#o&&(this.#o[0]!==this.x||this.#o[1]!==this.y)}get _hasBeenResized(){return!!this.#o&&(this.#o[2]!==this.width||this.#o[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:n}=r,i=n/t,s=n/e;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[n,i]}=this,{x:s,y:o,width:a,height:l}=this;if(a*=n,l*=i,s*=n,o*=i,this._mustFixPosition)switch(t){case 0:s=mt(s,0,n-a),o=mt(o,0,i-l);break;case 90:s=mt(s,0,n-l),o=mt(o,a,i);break;case 180:s=mt(s,a,n),o=mt(o,l,i);break;case 270:s=mt(s,l,n),o=mt(o,0,i-a);break}this.x=s/=n,this.y=o/=i;let[c,u]=this.getBaseTranslation();s+=c,o+=u,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return r.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return r.#E(t,e,360-this.parentRotation)}#x(t){switch(t){case 90:{let[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){let[n,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/n).toFixed(2)}%`,this.#l||(s.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){let{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),s=!this.#l&&e.endsWith("%");if(i&&s)return;let[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!this.#l&&!s&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#A(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let n of t){let i=document.createElement("div");this.#a.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#R.bind(this,n),{signal:e}),i.addEventListener("contextmenu",Lt,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#a)}#R(t,e){e.preventDefault();let{isMac:n}=Oe.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,this.#d=[e.screenX,e.screenY];let s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#V.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Me,{passive:!1,signal:o}),window.addEventListener("contextmenu",Lt,{signal:o}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let c=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#k()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#N(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;let[s,o]=this.parentDimensions;this.setDims(s*n,o*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#k(){if(!this.#c)return;let{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=this.#c;this.#c=null;let s=this.x,o=this.y,a=this.width,l=this.height;s===t&&o===e&&a===n&&l===i||this.addCommands({cmd:this.#N.bind(this,s,o,a,l),undo:this.#N.bind(this,t,e,n,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#V(t,e){let[n,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=r.MIN_SIZE/n,u=r.MIN_SIZE/i,d=this.#x(this.rotation),h=(N,O)=>[d[0]*N+d[2]*O,d[1]*N+d[3]*O],f=this.#x(360-this.rotation),p=(N,O)=>[f[0]*N+f[2]*O,f[1]*N+f[3]*O],g,v,m=!1,b=!1;switch(t){case"topLeft":m=!0,g=(N,O)=>[0,0],v=(N,O)=>[N,O];break;case"topMiddle":g=(N,O)=>[N/2,0],v=(N,O)=>[N/2,O];break;case"topRight":m=!0,g=(N,O)=>[N,0],v=(N,O)=>[0,O];break;case"middleRight":b=!0,g=(N,O)=>[N,O/2],v=(N,O)=>[0,O/2];break;case"bottomRight":m=!0,g=(N,O)=>[N,O],v=(N,O)=>[0,0];break;case"bottomMiddle":g=(N,O)=>[N/2,O],v=(N,O)=>[N/2,0];break;case"bottomLeft":m=!0,g=(N,O)=>[0,O],v=(N,O)=>[N,0];break;case"middleLeft":b=!0,g=(N,O)=>[0,O/2],v=(N,O)=>[N,O/2];break}let y=g(a,l),w=v(a,l),_=h(...w),D=r._round(s+_[0]),E=r._round(o+_[1]),S=1,x=1,P,j;if(e.fromKeyboard)({deltaX:P,deltaY:j}=e);else{let{screenX:N,screenY:O}=e,[vt,rn]=this.#d;[P,j]=this.screenToPageTranslation(N-vt,O-rn),this.#d[0]=N,this.#d[1]=O}if([P,j]=p(P/n,j/i),m){let N=Math.hypot(a,l);S=x=Math.max(Math.min(Math.hypot(w[0]-y[0]-P,w[1]-y[1]-j)/N,1/a,1/l),c/a,u/l)}else b?S=Math.max(c,Math.min(1,Math.abs(w[0]-y[0]-P)))/a:x=Math.max(u,Math.min(1,Math.abs(w[1]-y[1]-j)))/l;let de=r._round(a*S),me=r._round(l*x);_=h(...v(de,me));let ie=D-_[0],Xe=E-_[1];this.#o||=[this.x,this.y,this.width,this.height],this.width=de,this.height=me,this.x=ie,this.y=Xe,this.setDims(n*de,i*me),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}addEditToolbar(){return I(this,null,function*(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Sh(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return I(this,null,function*(){this.#n||(Eb.initialize(r._l10n),this.#n=new Eb(this),this.#e&&(this.#n.data=this.#e,this.#e=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(t){return I(this,null,function*(){yield this.#n?.setGuessedText(t)})}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){let t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();let[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);let[i,s]=this.getInitialTranslation();return this.translate(i,s),Xf(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#D||=new ml({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#C.bind(this),onPinching:this.#w.bind(this),onPinchEnd:this.#F.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#C(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#w(t,e,n){let s=.7*(n/e)+1-.7;if(s===1)return;let o=this.#x(this.rotation),a=(D,E)=>[o[0]*D+o[2]*E,o[1]*D+o[3]*E],[l,c]=this.parentDimensions,u=this.x,d=this.y,h=this.width,f=this.height,p=r.MIN_SIZE/l,g=r.MIN_SIZE/c;s=Math.max(Math.min(s,1/h,1/f),p/h,g/f);let v=r._round(h*s),m=r._round(f*s);if(v===h&&m===f)return;this.#o||=[u,d,h,f];let b=a(h/2,f/2),y=r._round(u+b[0]),w=r._round(d+b[1]),_=a(v/2,m/2);this.x=y-_[0],this.y=w-_[1],this.width=v,this.height=m,this.setDims(l*v,c*m),this.fixAndSetPosition(),this._onResizing()}#F(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#k()}pointerdown(t){let{isMac:e}=Oe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(t);return}this.#j(t)}get isSelected(){return this._uiManager.isSelected(this)}#j(t){let{isMac:e}=Oe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1,i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),this.#s=null,this.#f=!1,this._uiManager.endDragSession()||this.#j(c),n&&this._onStopDragging()};e&&(this.#y=t.clientX,this.#b=t.clientY,this.#s=t.pointerId,this.#i=t.pointerType,window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());let{clientX:u,clientY:d,pointerId:h}=c;if(h!==this.#s){Me(c);return}let[f,p]=this.screenToPageTranslation(u-this.#y,d-this.#b);this.#y=u,this.#b=d,this._uiManager.dragSelectedEditors(f,p)},o),window.addEventListener("touchmove",Me,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#i&&(this.#D||c.isPrimary)&&a(c),Me(c)},o));let l=c=>{if(!this.#s||this.#s===c.pointerId){a(c);return}Me(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){let i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/i,u=e/i,d=this.x*s,h=this.y*o,f=this.width*s,p=this.height*o;switch(n){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[n,i,s,o]=t,a=s-n,l=o-i;switch(this.rotation){case 0:return[n,e-o,a,l];case 90:return[n,e-i,l,a];case 180:return[s,e-i,a,l];case 270:return[s,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return e<o&&i>0&&t<s&&n>0}#z(){if(this.#h||!this.div)return;this.#h=new AbortController;let t=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){pe("An editor must be serializable")}static deserialize(t,e,n){return I(this,null,function*(){let i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,i.#e=t.accessibilityData,i._isCopy=t.isCopy||!1;let[s,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=u/o,i})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#$(),this.removeEditToolbar(),this.#_){for(let t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null,this.#D?.destroy(),this.#D=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#A(),this.#a.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#a.children;if(!this.#t){this.#t=Array.from(e);let o=this.#G.bind(this),a=this.#H.bind(this),l=this._uiManager._signal;for(let c of this.#t){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#P.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",r._l10nResizer[u])}}let n=this.#t[0],i=0;for(let o of e){if(o===n)break;i++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)this.#a.append(this.#a.firstChild);else if(s>i)for(let a=0;a<s-i;a++)this.#a.firstChild.before(this.#a.lastChild);let o=0;for(let a of e){let c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",r._l10nResizer[c])}}this.#O(0),this.#g=!0,this.#a.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){r._resizerKeyboardManager.exec(this,t)}#H(t){this.#g&&t.relatedTarget?.parentNode!==this.#a&&this.#$()}#P(t){this.#u=this.#g?t:""}#O(t){if(this.#t)for(let e of this.#t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#g&&this.#V(this.#u,{deltaX:t,deltaY:e,fromKeyboard:!0})}#$(){this.#g=!1,this.#O(-1),this.#k()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#l=!0;let n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#_||=new Map;let{action:n}=t,i=this.#_.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(n),this.#_.size===0&&(this.#_=null)},r._telemetryTimeout),this.#_.set(n,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},Rh=class extends ye{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},Db=3285377520,St=4294901760,tn=65535,vl=class{constructor(t){this.h1=t?t&4294967295:Db,this.h2=t?t&4294967295:Db}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let g=0,v=t.length;g<v;g++){let m=t.charCodeAt(g);m<=255?e[n++]=m:(e[n++]=m>>>8,e[n++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=n>>2,s=n-i*4,o=new Uint32Array(e.buffer,0,i),a=0,l=0,c=this.h1,u=this.h2,d=3432918353,h=461845907,f=d&tn,p=h&tn;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&St|a*f&tn,a=a<<15|a>>>17,a=a*h&St|a*p&tn,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&St|l*f&tn,l=l<<15|l>>>17,l=l*h&St|l*p&tn,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&St|a*f&tn,a=a<<15|a>>>17,a=a*h&St|a*p&tn,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&St|t*36045&tn,e=e*4283543511&St|((e<<16|t>>>16)*2950163797&St)>>>16,t^=e>>>1,t=t*444984403&St|t*60499&tn,e=e*3301882366&St|((e<<16|t>>>16)*3120437893&St)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},Nh=Object.freeze({map:null,hash:"",transfer:void 0}),$s=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let e of this.#n.values())if(e instanceof ye)return;this.onAnnotationEditor(null)}}setValue(t,e){let n=this.#n.get(t),i=!1;if(n!==void 0)for(let[s,o]of Object.entries(e))n[s]!==o&&(i=!0,n[s]=o);else i=!0,this.#n.set(t,e);i&&this.#r(),e instanceof ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}getAll(){return this.#n.size>0?Gf(this.#n):null}setAll(t){for(let[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yl(this)}get serializable(){if(this.#n.size===0)return Nh;let t=new Map,e=new vl,n=[],i=Object.create(null),s=!1;for(let[o,a]of this.#n){let l=a instanceof ye?a.serialize(!1,i):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(let o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Nh}get editorStats(){let t=null,e=new Map;for(let n of this.#n.values()){if(!(n instanceof ye))continue;let i=n.telemetryFinalData;if(!i)continue;let{type:s}=i;e.has(s)||e.set(s,Object.getPrototypeOf(n).constructor),t||=Object.create(null);let o=t[s]||=new Map;for(let[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));let u=c.get(l)??0;c.set(l,u+1)}}for(let[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let t=[];for(let e of this.#n.values())!(e instanceof ye)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#t={ids:new Set(t),hash:t.join(",")}}},yl=class extends $s{#e;constructor(t){super();let{map:e,hash:n,transfer:i}=t.serializable,s=structuredClone(e,i?{transfer:i}:null);this.#e={map:s,hash:n,transfer:i}}get print(){pe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return ee(this,"modifiedIds",{ids:new Set,hash:""})}},kh=class{#e=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return I(this,arguments,function*({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#e.has(t.loadedName))){if(Re(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:s,src:o,style:a}=t,l=new FontFace(s,o,a);this.addNativeFontFace(l);try{yield l.load(),this.#e.add(s),n?.(t)}catch{Y(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}pe("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return I(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{yield n.loaded}catch(i){throw Y(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(n=>{let i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}})}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return ee(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ee(this,"isSyncFontLoadingSupported",Ue||Oe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Re(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){let s=n.shift();setTimeout(s.callback,0)}}let{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ee(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(w,_){return w.charCodeAt(_)<<24|w.charCodeAt(_+1)<<16|w.charCodeAt(_+2)<<8|w.charCodeAt(_+3)&255}function i(w,_,D,E){let S=w.substring(0,_),x=w.substring(_+D);return S+E+x}let s,o,a=this._document.createElement("canvas");a.width=1,a.height=1;let l=a.getContext("2d"),c=0;function u(w,_){if(++c>30){Y("Load test font never loaded."),_();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(u.bind(null,w,_))}let d=`lt${Date.now()}${this.loadTestFontId++}`,h=this._loadTestFont;h=i(h,976,d.length,d);let p=16,g=1482184792,v=n(h,p);for(s=0,o=d.length-3;s<o;s+=4)v=v-g+n(d,s)|0;s<d.length&&(v=v-g+n(d+"XXX",s)|0),h=i(h,p,4,rI(v));let m=`url(data:font/opentype;base64,${btoa(h)});`,b=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(b);let y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(let w of[t.loadedName,d]){let _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=w,y.append(_)}this._document.body.append(y),u(d,()=>{y.remove(),e.complete()})}},Ph=class{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(let n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${Bb(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n=this.loadedName+"_path_"+e,i;try{i=t.get(n)}catch(o){Y(`getPathGenerator - ignoring character: "${o}".`)}let s=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=s}},sl={DATA:1,ERROR:2},xe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cb(){}function it(r){if(r instanceof nn||r instanceof js||r instanceof fl||r instanceof Si||r instanceof Fs)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||pe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new nn(r.message);case"InvalidPDFException":return new js(r.message);case"PasswordException":return new fl(r.message,r.code);case"ResponseException":return new Si(r.message,r.status,r.missing);case"UnknownErrorException":return new Fs(r.message,r.details)}return new Fs(r.message,r.toString())}var hr=class{#e=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#r(t);return}if(t.callback){let n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===sl.DATA)i.resolve(t.data);else if(t.callback===sl.ERROR)i.reject(it(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let n=this.sourceName,i=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(o){s.postMessage({sourceName:n,targetName:i,callback:sl.DATA,callbackId:t.callbackId,data:o})},function(o){s.postMessage({sourceName:n,targetName:i,callback:sl.ERROR,callbackId:t.callbackId,reason:it(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){let n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){let i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){s.reject(o)}return s.promise}sendWithStream(t,e,n,i){let s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:s,data:e,desiredSize:c.desiredSize},i),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:xe.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Re(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:xe.CANCEL,streamId:s,reason:it(c)}),u.promise}},n)}#n(t){let e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:xe.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:xe.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){Re(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:xe.ERROR,streamId:e,reason:it(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:xe.START_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:xe.START_COMPLETE,streamId:e,reason:it(c)})})}#r(t){let e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case xe.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(it(t.reason));break;case xe.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(it(t.reason));break;case xe.PULL:if(!a){s.postMessage({sourceName:n,targetName:i,stream:xe.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||Cb).then(function(){s.postMessage({sourceName:n,targetName:i,stream:xe.PULL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:xe.PULL_COMPLETE,streamId:e,reason:it(c)})});break;case xe.ENQUEUE:if(Re(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case xe.CLOSE:if(Re(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#s(o,e);break;case xe.ERROR:Re(o,"error should have stream controller"),o.controller.error(it(t.reason)),this.#s(o,e);break;case xe.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(it(t.reason)),this.#s(o,e);break;case xe.CANCEL:if(!a)break;let l=it(t.reason);Promise.try(a.onCancel||Cb,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:xe.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:xe.CANCEL_COMPLETE,streamId:e,reason:it(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#s(t,e){return I(this,null,function*(){yield Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]})}destroy(){this.#e?.abort(),this.#e=null}},bl=class{#e=!1;constructor({enableHWA:t=!1}){this.#e=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){pe("Abstract method `_createCanvas` called.")}},Oh=class extends bl{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let n=this._document.createElement("canvas");return n.width=t,n.height=e,n}},wl=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return I(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})})}_fetch(t){return I(this,null,function*(){pe("Abstract method `_fetch` called.")})}},_l=class extends wl{_fetch(t){return I(this,null,function*(){let e=yield Qs(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Zs(e)})}},El=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,s){return"none"}destroy(t=!1){}},Lh=class extends El{#e;#t;#n;#r;#s;#i;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#r=t,this.#s=e}get#a(){return this.#t||=new Map}get#d(){return this.#i||=new Map}get#c(){if(!this.#n){let t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let n=this.#s.createElementNS(wn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#s.createElementNS(wn,"defs"),t.append(n),n.append(this.#n),this.#s.body.append(t)}return this.#n}#h(t){if(t.length===1){let l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;let u=c.join(",");return[u,u,u]}let[e,n,i]=t,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=e[l]/255,o[l]=n[l]/255,a[l]=i[l]/255;return[s.join(","),o.join(","),a.join(",")]}#u(t){if(this.#e===void 0){this.#e="";let e=this.#s.URL;e!==this.#s.baseURI&&(Xl(e)?Y('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=e.split("#",1)[0])}return`url(${this.#e}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;let[n,i,s]=this.#h(t),o=t.length===1?n:`${n}${i}${s}`;if(e=this.#a.get(o),e)return this.#a.set(t,e),e;let a=`g_${this.#r}_transfer_map_${this.#l++}`,l=this.#u(a);this.#a.set(t,l),this.#a.set(o,l);let c=this.#p(a);return this.#g(n,i,s,c),l}addHCMFilter(t,e){let n=`${t}-${e}`,i="base",s=this.#d.get(i);if(s?.key===n||(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},this.#d.set(i,s)),!t||!e))return s.url;let o=this.#y(t);t=k.makeHexColor(...o);let a=this.#y(e);if(e=k.makeHexColor(...a),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;let l=new Array(256);for(let f=0;f<=255;f++){let p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#r}_hcm_filter`,d=s.filter=this.#p(u);this.#g(c,c,c,d),this.#o(d);let h=(f,p)=>{let g=o[f]/255,v=a[f]/255,m=new Array(p+1);for(let b=0;b<=p;b++)m[b]=g+b/p*(v-g);return m.join(",")};return this.#g(h(0,5),h(1,5),h(2,5),d),s.url=this.#u(u),s.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;let[n]=this.#h([t]),i=`alpha_${n}`;if(e=this.#a.get(i),e)return this.#a.set(t,e),e;let s=`g_${this.#r}_alpha_map_${this.#l++}`,o=this.#u(s);this.#a.set(t,o),this.#a.set(i,o);let a=this.#p(s);return this.#v(n,a),o}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=this.#h([t]),i=`luminosity_${n}`):i="luminosity",e=this.#a.get(i),e)return this.#a.set(t,e),e;let s=`g_${this.#r}_luminosity_map_${this.#l++}`,o=this.#u(s);this.#a.set(t,o),this.#a.set(i,o);let a=this.#p(s);return this.#f(a),t&&this.#v(n,a),o}addHighlightHCMFilter(t,e,n,i,s){let o=`${e}-${n}-${i}-${s}`,a=this.#d.get(t);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#d.set(t,a)),!e||!n))return a.url;let[l,c]=[e,n].map(this.#y.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[i,s].map(this.#y.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#c.style.color="";let p=(m,b,y)=>{let w=new Array(256),_=(d-u)/y,D=m/255,E=(b-m)/(255*y),S=0;for(let x=0;x<=y;x++){let P=Math.round(u+x*_),j=D+x*E;for(let de=S;de<=P;de++)w[de]=j;S=P+1}for(let x=S;x<256;x++)w[x]=w[S-1];return w.join(",")},g=`g_${this.#r}_hcm_${t}_filter`,v=a.filter=this.#p(g);return this.#o(v),this.#g(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),v),a.url=this.#u(g),a.url}destroy(t=!1){t&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#l=0)}#f(t){let e=this.#s.createElementNS(wn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#o(t){let e=this.#s.createElementNS(wn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){let e=this.#s.createElementNS(wn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#m(t,e,n){let i=this.#s.createElementNS(wn,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}#g(t,e,n,i){let s=this.#s.createElementNS(wn,"feComponentTransfer");i.append(s),this.#m(s,"feFuncR",t),this.#m(s,"feFuncG",e),this.#m(s,"feFuncB",n)}#v(t,e){let n=this.#s.createElementNS(wn,"feComponentTransfer");e.append(n),this.#m(n,"feFuncA",t)}#y(t){return this.#c.style.color=t,Yf(getComputedStyle(this.#c).getPropertyValue("color"))}},Dl=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return I(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let n=`${this.baseUrl}${t}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})})}_fetch(t){return I(this,null,function*(){pe("Abstract method `_fetch` called.")})}},Cl=class extends Dl{_fetch(t){return I(this,null,function*(){let e=yield Qs(t,"arraybuffer");return new Uint8Array(e)})}},Sl=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return I(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let n=`${this.baseUrl}${t}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load wasm data at: ${n}`)})})}_fetch(t){return I(this,null,function*(){pe("Abstract method `_fetch` called.")})}},Al=class extends Sl{_fetch(t){return I(this,null,function*(){let e=yield Qs(t,"arraybuffer");return new Uint8Array(e)})}};Ue&&Y("Please use the `legacy` build in Node.js environments.");function Kf(r){return I(this,null,function*(){let e=yield process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)})}var Fh=class extends El{},jh=class extends bl{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},Bh=class extends wl{_fetch(t){return I(this,null,function*(){return Kf(t)})}},Vh=class extends Dl{_fetch(t){return I(this,null,function*(){return Kf(t)})}},Hh=class extends Sl{_fetch(t){return I(this,null,function*(){return Kf(t)})}},Ye={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $h(r,t){if(!t)return;let e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),r.clip(i)}var Us=class{getPattern(){pe("Abstract method `getPattern` called.")}},Uh=class extends Us{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let s;if(i===Ye.STROKE||i===Ye.FILL){let o=e.current.getClippedPathBoundingBox(i,ve(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=k.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),$h(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=t.createPattern(c.canvas,"no-repeat");let d=new DOMMatrix(n);s.setTransform(d)}else $h(t,this._bbox),s=this._createGradient(t);return s}};function bh(r,t,e,n,i,s,o,a){let l=t.coords,c=t.colors,u=r.data,d=r.width*4,h;l[e+1]>l[n+1]&&(h=e,e=n,n=h,h=s,s=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=o,o=a,a=h),l[e+1]>l[n+1]&&(h=e,e=n,n=h,h=s,s=o,o=h);let f=(l[e]+t.offsetX)*t.scaleX,p=(l[e+1]+t.offsetY)*t.scaleY,g=(l[n]+t.offsetX)*t.scaleX,v=(l[n+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,b=(l[i+1]+t.offsetY)*t.scaleY;if(p>=b)return;let y=c[s],w=c[s+1],_=c[s+2],D=c[o],E=c[o+1],S=c[o+2],x=c[a],P=c[a+1],j=c[a+2],de=Math.round(p),me=Math.round(b),ie,Xe,N,O,vt,rn,$n,sn;for(let Le=de;Le<=me;Le++){if(Le<v){let we=Le<p?0:(p-Le)/(p-v);ie=f-(f-g)*we,Xe=y-(y-D)*we,N=w-(w-E)*we,O=_-(_-S)*we}else{let we;Le>b?we=1:v===b?we=0:we=(v-Le)/(v-b),ie=g-(g-m)*we,Xe=D-(D-x)*we,N=E-(E-P)*we,O=S-(S-j)*we}let _e;Le<p?_e=0:Le>b?_e=1:_e=(p-Le)/(p-b),vt=f-(f-m)*_e,rn=y-(y-x)*_e,$n=w-(w-P)*_e,sn=_-(_-j)*_e;let br=Math.round(Math.min(ie,vt)),Dn=Math.round(Math.max(ie,vt)),Cn=d*Le+br*4;for(let we=br;we<=Dn;we++)_e=(ie-we)/(ie-vt),_e<0?_e=0:_e>1&&(_e=1),u[Cn++]=Xe-(Xe-rn)*_e|0,u[Cn++]=N-(N-$n)*_e|0,u[Cn++]=O-(O-sn)*_e|0,u[Cn++]=255}}function pI(r,t,e){let n=t.coords,i=t.colors,s,o;switch(t.type){case"lattice":let a=t.verticesPerRow,l=Math.floor(n.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)bh(r,e,n[u],n[u+1],n[u+a],i[u],i[u+1],i[u+a]),bh(r,e,n[u+a+1],n[u+1],n[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)bh(r,e,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}var zh=class extends Us{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){let a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},v=d+2*2,m=h+2*2,b=n.getCanvas("mesh",v,m),y=b.context,w=y.createImageData(d,h);if(e){let D=w.data;for(let E=0,S=D.length;E<S;E+=4)D[E]=e[0],D[E+1]=e[1],D[E+2]=e[2],D[E+3]=255}for(let D of this._figures)pI(w,D,g);return y.putImageData(w,2,2),{canvas:b.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,e,n,i){$h(t,this._bbox);let s;if(i===Ye.SHADING)s=k.singularValueDecompose2dScale(ve(t));else if(s=k.singularValueDecompose2dScale(e.baseTransform),this.matrix){let a=k.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}let o=this._createMeshCanvas(s,i===Ye.SHADING?null:this._background,e.cachedCanvases);return i!==Ye.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}},Gh=class extends Us{getPattern(){return"hotpink"}};function gI(r){switch(r[0]){case"RadialAxial":return new Uh(r);case"Mesh":return new zh(r);case"Dummy":return new Gh}throw new Error(`Unknown IR type: ${r[0]}`)}var Sb={COLORED:1,UNCOLORED:2},mI=(()=>{class r{static MAX_PATTERN_SIZE=3e3;constructor(e,n,i,s,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(e){let{bbox:n,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Yl("TilingType: "+o);let d=n[0],h=n[1],f=n[2],p=n[3],g=f-d,v=p-h,m=k.singularValueDecompose2dScale(this.matrix),b=k.singularValueDecompose2dScale(this.baseTransform),y=m[0]*b[0],w=m[1]*b[1],_=g,D=v,E=!1,S=!1,x=Math.ceil(c*y),P=Math.ceil(u*w),j=Math.ceil(g*y),de=Math.ceil(v*w);x>=j?_=c:E=!0,P>=de?D=u:S=!0;let me=this.getSizeAndScale(_,this.ctx.canvas.width,y),ie=this.getSizeAndScale(D,this.ctx.canvas.height,w),Xe=e.cachedCanvases.getCanvas("pattern",me.size,ie.size),N=Xe.context,O=l.createCanvasGraphics(N);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,s,a),N.translate(-me.scale*d,-ie.scale*h),O.transform(me.scale,0,0,ie.scale,0,0),N.save(),this.clipBbox(O,d,h,f,p),O.baseTransform=ve(O.ctx),O.executeOperatorList(i),O.endDrawing(),N.restore(),E||S){let vt=Xe.canvas;E&&(_=c),S&&(D=u);let rn=this.getSizeAndScale(_,this.ctx.canvas.width,y),$n=this.getSizeAndScale(D,this.ctx.canvas.height,w),sn=rn.size,Le=$n.size,_e=e.cachedCanvases.getCanvas("pattern-workaround",sn,Le),br=_e.context,Dn=E?Math.floor(g/c):0,Cn=S?Math.floor(v/u):0;for(let we=0;we<=Dn;we++)for(let Ii=0;Ii<=Cn;Ii++)br.drawImage(vt,sn*we,Le*Ii,sn,Le,0,0,sn,Le);return{canvas:_e.canvas,scaleX:rn.scale,scaleY:$n.scale,offsetX:d,offsetY:h}}return{canvas:Xe.canvas,scaleX:me.scale,scaleY:ie.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,n,i){let s=Math.max(r.MAX_PATTERN_SIZE,n),o=Math.ceil(e*i);return o>=s?o=s:i=o/e,{scale:i,size:o}}clipBbox(e,n,i,s,o){let a=s-n,l=o-i;e.ctx.rect(n,i,a,l),e.current.updateRectMinMax(ve(e.ctx),[n,i,s,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,i){let s=e.ctx,o=e.current;switch(n){case Sb.COLORED:let a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case Sb.UNCOLORED:let l=k.makeHexColor(i[0],i[1],i[2]);s.fillStyle=l,s.strokeStyle=l,o.fillColor=l,o.strokeColor=l;break;default:throw new Dh(`Unsupported paint type: ${n}`)}}getPattern(e,n,i,s){let o=i;s!==Ye.SHADING&&(o=k.transform(o,n.baseTransform),this.matrix&&(o=k.transform(o,this.matrix)));let a=this.createPatternCanvas(n),l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return r})();function vI({src:r,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){let a=Oe.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=n>>3,d=n&7,h=r.length;e=new Uint32Array(e.buffer);let f=0;for(let p=0;p<i;p++){for(let v=t+u;t<v;t++){let m=t<h?r[t]:255;e[f++]=m&128?c:l,e[f++]=m&64?c:l,e[f++]=m&32?c:l,e[f++]=m&16?c:l,e[f++]=m&8?c:l,e[f++]=m&4?c:l,e[f++]=m&2?c:l,e[f++]=m&1?c:l}if(d===0)continue;let g=t<h?r[t++]:255;for(let v=0;v<d;v++)e[f++]=g&1<<7-v?c:l}return{srcPos:t,destPos:f}}var Ab=16,Ib=100,yI=15,xb=10,Tb=1e3,st=16;function bI(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},r.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},r.transform=function(n,i,s,o,a,l){t.transform(n,i,s,o,a,l),this.__originalTransform(n,i,s,o,a,l)},r.setTransform=function(n,i,s,o,a,l){t.setTransform(n,i,s,o,a,l),this.__originalSetTransform(n,i,s,o,a,l)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(n){t.rotate(n),this.__originalRotate(n)},r.clip=function(n){t.clip(n),this.__originalClip(n)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,i,s,o,a){t.bezierCurveTo(e,n,i,s,o,a),this.__originalBezierCurveTo(e,n,i,s,o,a)},r.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var Wh=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function ol(r,t,e,n,i,s,o,a,l,c){let[u,d,h,f,p,g]=ve(r);if(d===0&&h===0){let b=o*u+p,y=Math.round(b),w=a*f+g,_=Math.round(w),D=(o+l)*u+p,E=Math.abs(Math.round(D)-y)||1,S=(a+c)*f+g,x=Math.abs(Math.round(S)-_)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(f),y,_),r.drawImage(t,e,n,i,s,0,0,E,x),r.setTransform(u,d,h,f,p,g),[E,x]}if(u===0&&f===0){let b=a*h+p,y=Math.round(b),w=o*d+g,_=Math.round(w),D=(a+c)*h+p,E=Math.abs(Math.round(D)-y)||1,S=(o+l)*d+g,x=Math.abs(Math.round(S)-_)||1;return r.setTransform(0,Math.sign(d),Math.sign(h),0,y,_),r.drawImage(t,e,n,i,s,0,0,x,E),r.setTransform(u,d,h,f,p,g),[x,E]}r.drawImage(t,e,n,i,s,o,a,l,c);let v=Math.hypot(u,d),m=Math.hypot(h,f);return[v*l,m*c]}function wI(r){let{width:t,height:e}=r;if(t>Tb||e>Tb)return null;let n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1,o=new Uint8Array(s*(e+1)),a,l,c,u=t+7&-8,d=new Uint8Array(u*e),h=0;for(let m of r.data){let b=128;for(;b>0;)d[h++]=m&b?0:255,b>>=1}let f=0;for(h=0,d[h]!==0&&(o[0]=1,++f),l=1;l<t;l++)d[h]!==d[h+1]&&(o[l]=d[h]?2:1,++f),h++;for(d[h]!==0&&(o[l]=2,++f),a=1;a<e;a++){h=a*u,c=a*s,d[h-u]!==d[h]&&(o[c]=d[h]?1:8,++f);let m=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<t;l++)m=(m>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),i[m]&&(o[c+l]=i[m],++f),h++;if(d[h-u]!==d[h]&&(o[c+l]=d[h]?2:4,++f),f>n)return null}for(h=u*(e-1),c=a*s,d[h]!==0&&(o[c]=8,++f),l=1;l<t;l++)d[h]!==d[h+1]&&(o[c+l]=d[h]?4:8,++f),h++;if(d[h]!==0&&(o[c+l]=4,++f),f>n)return null;let p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=e;a++){let m=a*s,b=m+t;for(;m<b&&!o[m];)m++;if(m===b)continue;g.moveTo(m%s,a);let y=m,w=o[m];do{let _=p[w];do m+=_;while(!o[m]);let D=o[m];D!==5&&D!==10?(w=D,o[m]=0):(w=D&51*w>>4,o[m]&=w>>2|w<<2),g.lineTo(m%s,m/s|0),o[m]||--f}while(y!==m);--a}return d=null,o=null,function(m){m.save(),m.scale(1/t,-1/e),m.translate(0,-e),m.fill(g),m.beginPath(),m.restore()}}var Il=class{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Lb,this.textMatrixScale=1,this.fontMatrix=Eh,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=qe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=k.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){let n=k.applyTransform(e,t),i=k.applyTransform(e.slice(2),t),s=k.applyTransform([e[0],e[3]],t),o=k.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],s[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],s[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],s[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],s[1],o[1])}updateScalingPathMinMax(t,e){k.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,s,o,a,l,c,u){let d=k.bezierBoundingBox(e,n,i,s,o,a,l,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Ye.FILL,e=null){let n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ye.STROKE){e||pe("Stroke bounding box must include transform.");let i=k.singularValueDecompose2dScale(e),s=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=s,n[1]-=o,n[2]+=s,n[3]+=o}return n}updateClipFromPath(){let t=k.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ye.FILL,e=null){return k.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function Mb(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}let e=t.height,n=t.width,i=e%st,s=(e-i)/st,o=i===0?s:s+1,a=r.createImageData(n,st),l=0,c,u=t.data,d=a.data,h,f,p,g;if(t.kind===hl.GRAYSCALE_1BPP){let v=u.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),b=m.length,y=n+7>>3,w=4294967295,_=Oe.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<s?st:i,c=0,f=0;f<p;f++){let D=v-l,E=0,S=D>y?n:D*8-7,x=S&-8,P=0,j=0;for(;E<x;E+=8)j=u[l++],m[c++]=j&128?w:_,m[c++]=j&64?w:_,m[c++]=j&32?w:_,m[c++]=j&16?w:_,m[c++]=j&8?w:_,m[c++]=j&4?w:_,m[c++]=j&2?w:_,m[c++]=j&1?w:_;for(;E<S;E++)P===0&&(j=u[l++],P=128),m[c++]=j&P?w:_,P>>=1}for(;c<b;)m[c++]=0;r.putImageData(a,0,h*st)}}else if(t.kind===hl.RGBA_32BPP){for(f=0,g=n*st*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,r.putImageData(a,0,f),f+=st;h<o&&(g=n*i*4,d.set(u.subarray(l,l+g)),r.putImageData(a,0,f))}else if(t.kind===hl.RGB_24BPP)for(p=st,g=n*p,h=0;h<o;h++){for(h>=s&&(p=i,g=n*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;r.putImageData(a,0,h*st)}else throw new Error(`bad image kind: ${t.kind}`)}function Rb(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}let e=t.height,n=t.width,i=e%st,s=(e-i)/st,o=i===0?s:s+1,a=r.createImageData(n,st),l=0,c=t.data,u=a.data;for(let d=0;d<o;d++){let h=d<s?st:i;({srcPos:l}=vI({src:c,srcPos:l,dest:u,width:n,height:h,nonBlackColor:0})),r.putImageData(a,0,d*st)}}function Ns(r,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function al(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!Ue){let{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}}function Nb(r,t){if(t)return!0;let e=k.singularValueDecompose2dScale(r);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);let n=Math.fround(_n.pixelRatio*Hn.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}var _I=["butt","round","square"],EI=["miter","round","bevel"],DI={},kb={},Di=class r{constructor(t,e,n,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=t,this.current=new Il(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new Wh(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){let s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,n){let l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ve(this.compositeCtx))}this.ctx.save(),al(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ve(this.ctx)}executeOperatorList(t,e,n,i){let s=t.argsArray,o=t.fnArray,a=e||0,l=s.length;if(l===a)return a;let c=l-a>xb&&typeof n=="function",u=c?Date.now()+yI:0,d=0,h=this.commonObjs,f=this.objs,p;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(p=o[a],p!==Ot.dependency)this[p].apply(this,s[a]);else for(let g of s[a]){let v=g.startsWith("g_")?h:f;if(!v.has(g))return v.get(g,n),a}if(a++,a===l)return a;if(c&&++d>xb){if(Date.now()>u)return n(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let n=t.width??t.displayWidth,i=t.height??t.displayHeight,s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=n,l=i,c="prescale1",u,d;for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(t,0,0,a,l,0,0,h,f),t=u.canvas,a=h,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){let e=this.ctx,{width:n,height:i}=t,s=this.current.fillColor,o=this.current.patternFill,a=ve(e),l,c,u,d;if((t.bitmap||t.data)&&t.count>1){let S=t.bitmap||t.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(S),l||(l=new Map,this._cachedBitmapsMap.set(S,l));let x=l.get(c);if(x&&!o){let P=Math.round(Math.min(a[0],a[2])+a[4]),j=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:x,offsetX:P,offsetY:j}}u=x}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),Rb(d.context,t));let h=k.transform(a,[1/n,0,0,-1/i,0,0]);h=k.transform(h,[1,0,0,1,0,-i]);let[f,p,g,v]=k.getAxialAlignedBoundingBox([0,0,n,i],h),m=Math.round(g-f)||1,b=Math.round(v-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",m,b),w=y.context,_=f,D=p;w.translate(-_,-D),w.transform(...h),u||(u=this._scaleImage(d.canvas,en(w)),u=u.img,l&&o&&l.set(c,u)),w.imageSmoothingEnabled=Nb(ve(w),t.interpolate),ol(w,u,0,0,u.width,u.height,0,0,n,i),w.globalCompositeOperation="source-in";let E=k.transform(en(w),[1,0,0,1,-_,-D]);return w.fillStyle=o?s.getPattern(e,this,E,Ye.FILL):s,w.fillRect(0,0,n,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,y.canvas)),{canvas:y.canvas,offsetX:Math.round(_),offsetY:Math.round(D)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=_I[t]}setLineJoin(t){this.ctx.lineJoin=EI[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;let s=this.ctx;s.setTransform(...ve(this.suspendedCtx)),Ns(this.suspendedCtx,s),bI(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ns(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){let s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,n,a,l,e.subtype,e.backdrop,e.transferMap,s,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,s,o,a,l,c,u,d){let h=t.canvas,f=l-u,p=c-d;if(o){let v=k.makeHexColor(...o);if(f<0||p<0||f+n>h.width||p+i>h.height){let m=this.cachedCanvases.getCanvas("maskExtension",n,i),b=m.context;b.drawImage(h,-f,-p),b.globalCompositeOperation="destination-atop",b.fillStyle=v,b.fillRect(0,0,n,i),b.globalCompositeOperation="source-over",h=m.canvas,f=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let m=new Path2D;m.rect(f,p,n,i),t.clip(m),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(f,p,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));let g=new Path2D;g.rect(l,c,n,i),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(h,f,p,n,i,l,c,n,i),e.restore()}save(){this.inSMaskMode?(Ns(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ns(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,s,o){this.ctx.transform(t,e,n,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let i=this.ctx,s=this.current,o=s.x,a=s.y,l,c,u=ve(i),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,h=d?n.slice(0):null;for(let f=0,p=0,g=t.length;f<g;f++)switch(t[f]|0){case Ot.rectangle:o=e[p++],a=e[p++];let v=e[p++],m=e[p++],b=o+v,y=a+m;i.moveTo(o,a),v===0||m===0?i.lineTo(b,y):(i.lineTo(b,a),i.lineTo(b,y),i.lineTo(o,y)),d||s.updateRectMinMax(u,[o,a,b,y]),i.closePath();break;case Ot.moveTo:o=e[p++],a=e[p++],i.moveTo(o,a),d||s.updatePathMinMax(u,o,a);break;case Ot.lineTo:o=e[p++],a=e[p++],i.lineTo(o,a),d||s.updatePathMinMax(u,o,a);break;case Ot.curveTo:l=o,c=a,o=e[p+4],a=e[p+5],i.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],o,a),s.updateCurvePathMinMax(u,l,c,e[p],e[p+1],e[p+2],e[p+3],o,a,h),p+=6;break;case Ot.curveTo2:l=o,c=a,i.bezierCurveTo(o,a,e[p],e[p+1],e[p+2],e[p+3]),s.updateCurvePathMinMax(u,l,c,o,a,e[p],e[p+1],e[p+2],e[p+3],h),o=e[p+2],a=e[p+3],p+=4;break;case Ot.curveTo3:l=o,c=a,o=e[p+2],a=e[p+3],i.bezierCurveTo(e[p],e[p+1],o,a,o,a),s.updateCurvePathMinMax(u,l,c,e[p],e[p+1],o,a,o,a,h),p+=4;break;case Ot.closePath:i.closePath();break}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){let e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,en(e),Ye.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){let e=this.ctx,n=this.current.fillColor,i=this.current.patternFill,s=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,en(e),Ye.FILL),s=!0);let o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=DI}eoClip(){this.pendingClip=kb}beginText(){this.current.textMatrix=Lb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}let n=new Path2D,i=e.getTransform().invertSelf();for(let{transform:s,x:o,y:a,fontSize:l,path:c}of t)n.addPath(c,new DOMMatrix(s).preMultiplySelf(i).translate(o,a).scale(l,-l));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){let n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||Eh,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Y("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;let s=n.loadedName||"sans-serif",o=n.systemFontInfo?.css||`"${s}", ${n.fallbackName}`,a="normal";n.black?a="900":n.bold&&(a="bold");let l=n.italic?"italic":"normal",c=e;e<Ab?c=Ab:e>Ib&&(c=Ib),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,s,o){this.current.textMatrix=[t,e,n,i,s,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){let i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}paintChar(t,e,n,i,s){let o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,d=c&qe.FILL_STROKE_MASK,h=!!(c&qe.ADD_TO_PATH_FLAG),f=a.patternFill&&!l.missingFile,p=a.patternStroke&&!l.missingFile,g;if((l.disableFontFace||h||f||p)&&(g=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f||p){o.save(),o.translate(e,n),o.scale(u,-u);let v;if((d===qe.FILL||d===qe.FILL_STROKE)&&(i?(v=o.getTransform(),o.setTransform(...i),o.fill(this.#n(g,v,i))):o.fill(g)),d===qe.STROKE||d===qe.FILL_STROKE)if(s){v||=o.getTransform(),o.setTransform(...s);let{a:m,b,c:y,d:w}=v,_=k.inverseTransform(s),D=k.transform([m,b,y,w,0,0],_),[E,S]=k.singularValueDecompose2dScale(D);o.lineWidth*=Math.max(E,S)/u,o.stroke(this.#n(g,v,s))}else o.lineWidth/=u,o.stroke(g);o.restore()}else(d===qe.FILL||d===qe.FILL_STROKE)&&o.fillText(t,e,n),(d===qe.STROKE||d===qe.FILL_STROKE)&&o.strokeText(t,e,n);h&&(this.pendingTextPaths||=[]).push({transform:ve(o),x:e,y:n,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return ee(this,"isFontSubpixelAAEnabled",n)}showText(t){let e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);let i=e.fontSize;if(i===0)return;let s=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,h=n.vertical,f=h?1:-1,p=n.defaultVMetrics,g=i*e.fontMatrix[0],v=e.textRenderingMode===qe.FILL&&!n.disableFontFace&&!e.patternFill;s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),c>0?s.scale(u,-1):s.scale(u,1);let m,b;if(e.patternFill){s.save();let E=e.fillColor.getPattern(s,this,en(s),Ye.FILL);m=ve(s),s.restore(),s.fillStyle=E}if(e.patternStroke){s.save();let E=e.strokeColor.getPattern(s,this,en(s),Ye.STROKE);b=ve(s),s.restore(),s.strokeStyle=E}let y=e.lineWidth,w=e.textMatrixScale;if(w===0||y===0){let E=e.textRenderingMode&qe.FILL_STROKE_MASK;(E===qe.STROKE||E===qe.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=w;if(o!==1&&(s.scale(o,o),y/=o),s.lineWidth=y,n.isInvalidPDFjsFont){let E=[],S=0;for(let x of t)E.push(x.unicode),S+=x.width;s.fillText(E.join(""),0,0),e.x+=S*g*u,s.restore(),this.compose();return}let _=0,D;for(D=0;D<d;++D){let E=t[D];if(typeof E=="number"){_+=f*E*i/1e3;continue}let S=!1,x=(E.isSpace?l:0)+a,P=E.fontChar,j=E.accent,de,me,ie=E.width;if(h){let N=E.vmetric||p,O=-(E.vmetric?N[1]:ie*.5)*g,vt=N[2]*g;ie=N?-N[0]:ie,de=O/o,me=(_+vt)/o}else de=_/o,me=0;if(n.remeasure&&ie>0){let N=s.measureText(P).width*1e3/i*o;if(ie<N&&this.isFontSubpixelAAEnabled){let O=ie/N;S=!0,s.save(),s.scale(O,1),de/=O}else ie!==N&&(de+=(ie-N)/2e3*i/o)}if(this.contentVisible&&(E.isInFont||n.missingFile)){if(v&&!j)s.fillText(P,de,me);else if(this.paintChar(P,de,me,m,b),j){let N=de+i*j.offset.x/o,O=me-i*j.offset.y/o;this.paintChar(j.fontChar,N,O,m,b)}}let Xe=h?ie*g-x*c:ie*g+x*c;_+=Xe,S&&s.restore()}h?e.y-=_:e.x+=_*u,s.restore(),this.compose()}showType3Text(t){let e=this.ctx,n=this.current,i=n.font,s=n.fontSize,o=n.fontDirection,a=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*o,d=n.fontMatrix||Eh,h=t.length,f=n.textRenderingMode===qe.INVISIBLE,p,g,v,m;if(!(f||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(u,o),p=0;p<h;++p){if(g=t[p],typeof g=="number"){m=a*g*s/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}let b=(g.isSpace?c:0)+l,y=i.charProcOperatorList[g.operatorListId];if(!y){Y(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),e.scale(s,s),e.transform(...d),this.executeOperatorList(y),this.restore()),v=k.applyTransform([g.width,0],d)[0]*s+b,e.translate(v,0),n.x+=v*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,s,o){this.ctx.rect(n,i,s-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){let n=t[1],i=this.baseTransform||ve(this.ctx),s={createCanvasGraphics:o=>new r(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new mI(t,n,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=k.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=k.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=gI(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;let e=this.ctx;this.save();let n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,en(e),Ye.SHADING);let i=en(e);if(i){let{width:s,height:o}=e.canvas,[a,l,c,u]=k.getAxialAlignedBoundingBox([0,0,s,o],i);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){pe("Should not call beginInlineImage")}beginImageData(){pe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ve(this.ctx),e)){let n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(ve(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let e=this.ctx;t.isolated||Yl("TODO: Support non-isolated groups."),t.knockout&&Y("Knockout groups not supported.");let n=ve(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=k.getAxialAlignedBoundingBox(t.bbox,ve(e)),s=[0,0,e.canvas.width,e.canvas.height];i=k.intersect(i,s)||[0,0,0,0];let o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...n),t.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Ns(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;let e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let i=ve(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);let s=k.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,n,i,s){if(this.#e(),al(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){let o=e[2]-e[0],a=e[3]-e[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;let[l,c]=k.singularValueDecompose2dScale(ve(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);let{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),al(this.ctx)}else al(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new Il(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;let e=t.count;t=this.getObject(t.data,t),t.count=e;let n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=wI(t)),i.compiled)){i.compiled(n);return}let s=this._createMaskCanvas(t),o=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,s,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);let a=this.ctx;a.save();let l=ve(a);a.transform(e,n,i,s,0,0);let c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){let h=k.transform(l,[e,n,i,s,o[u],o[u+1]]),[f,p]=k.applyTransform([0,0],h);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;let e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(let s of t){let{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();let h=this.getObject(o,s);Rb(d,h),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,en(e),Ye.FILL):n,d.fillRect(0,0,a,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),ol(e,u.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;let e=this.getObject(t);if(!e){Y("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;let s=this.getObject(t);if(!s){Y("Dependent image isn't ready yet");return}let o=s.width,a=s.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[e,0,0,n,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:n,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;let e=t.width,n=t.height,i=this.ctx;if(this.save(),!Ue){let{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/e,-1/n);let s;if(t.bitmap)s=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)s=t;else{let l=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Mb(l,t),s=this.applyTransferMapsToCanvas(l)}let o=this._scaleImage(s,en(i));i.imageSmoothingEnabled=Nb(ve(i),t.interpolate),ol(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;let n=this.ctx,i;if(t.bitmap)i=t.bitmap;else{let s=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;Mb(l,t),i=this.applyTransferMapsToCanvas(l)}for(let s of e)n.save(),n.transform(...s.transform),n.scale(1,-1),ol(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){let e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let n=this.ctx;this.pendingClip&&(e||(this.pendingClip===kb?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=ve(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:n,c:i,d:s}=this.ctx.getTransform(),o,a;if(n===0&&i===0){let l=Math.abs(e),c=Math.abs(s);if(l===c)if(t===0)o=a=1/l;else{let u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{let u=l*t,d=c*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{let l=Math.abs(e*s-n*i),c=Math.hypot(e,n),u=Math.hypot(i,s);if(t===0)o=u/l,a=c/l;else{let d=t*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){let{ctx:e}=this,{lineWidth:n}=this.current,[i,s]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&s===1){e.stroke();return}let o=e.getLineDash();if(t&&e.save(),e.scale(i,s),o.length>0){let a=Math.max(i,s);e.setLineDash(o.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let r in Ot)Di.prototype[r]!==void 0&&(Di.prototype[Ot[r]]=Di.prototype[r]);var fr=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#e=t}static get workerSrc(){return this.#t}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#t=t}},qh=class{#e;#t;constructor({parsedData:t,rawData:e}){this.#e=t,this.#t=e}getRaw(){return this.#t}get(t){return this.#e.get(t)??null}getAll(){return Gf(this.#e)}has(t){return this.#e.has(t)}},Ei=Symbol("INTERNAL"),Yh=class{#e=!1;#t=!1;#n=!1;#r=!0;constructor(t,{name:e,intent:n,usage:i,rbGroups:s}){this.#e=!!(t&gt.DISPLAY),this.#t=!!(t&gt.PRINT),this.name=e,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;let{print:t,view:e}=this.usage;return this.#e?e?.viewState!=="OFF":this.#t?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ei&&pe("Internal method `_setVisible` called."),this.#n=n,this.#r=e}},Xh=class{#e=null;#t=new Map;#n=null;#r=null;constructor(t,e=gt.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#r=t.order;for(let n of t.groups)this.#t.set(n.id,new Yh(e,n));if(t.baseState==="OFF")for(let n of this.#t.values())n._setVisible(Ei,!1);for(let n of t.on)this.#t.get(n)._setVisible(Ei,!0);for(let n of t.off)this.#t.get(n)._setVisible(Ei,!1);this.#n=this.getHash()}}#s(t){let e=t.length;if(e<2)return!0;let n=t[0];for(let i=1;i<e;i++){let s=t[i],o;if(Array.isArray(s))o=this.#s(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return Y(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"}isVisible(t){if(this.#t.size===0)return!0;if(!t)return Yl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#t.has(t.id)?this.#t.get(t.id).visible:(Y(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#t.has(e))return Y(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#t.has(e))return Y(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#t.has(e))return Y(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#t.has(e))return Y(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return Y(`Unknown optional content policy ${t.policy}.`),!0}return Y(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){let i=this.#t.get(t);if(!i){Y(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(let s of i.rbGroups)for(let o of s)o!==t&&this.#t.get(o)?._setVisible(Ei,!1,!0);i._setVisible(Ei,!!e,!0),this.#e=null}setOCGState({state:t,preserveRB:e}){let n;for(let i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}let s=this.#t.get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!s.visible,e);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Gf(this.#t):null}getGroup(t){return this.#t.get(t)||null}getHash(){if(this.#e!==null)return this.#e;let t=new vl;for(let[e,n]of this.#t)t.update(`${e}:${n.visible}`);return this.#e=t.hexdigest()}},Kh=class{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Re(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){let l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let i=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(n),!0)});Re(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new Zh(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new Qh(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},Zh=class{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=qf(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return I(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Qh=class{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return I(this,null,function*(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function CI(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),s(u)}if(e=o(r),e){let u=c(e);return s(u)}if(e=n("filename","i").exec(r),e){e=e[1];let u=a(e);return u=c(u),s(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let h=new TextDecoder(u,{fatal:!0}),f=Zs(d);d=h.decode(f),t=!1}catch{}}return d}function s(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function o(u){let d=[],h,f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,v,m]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[v,m]}let p=[];for(let g=0;g<d.length&&g in d;++g){let[v,m]=d[g];m=a(m),v&&(m=unescape(m),g===0&&(m=l(m))),p.push(m)}return p.join("")}function a(u){if(u.startsWith('"')){let d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){let f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){let d=u.indexOf("'");if(d===-1)return u;let h=u.slice(0,d),p=u.slice(d+1).replace(/^[^']*'/,"");return i(h,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function Vb(r,t){let e=new Headers;if(!r||!t||typeof t!="object")return e;for(let n in t){let i=t[n];i!==void 0&&e.append(n,i)}return e}function Kl(r){return URL.parse(r)?.origin??null}function Hb({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){let i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function $b(r){let t=r.get("Content-Disposition");if(t){let e=CI(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(qf(e))return e}return null}function Js(r,t){return new Si(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function Ub(r){return r===200||r===206}function zb(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Gb(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Y(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}var xl=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Vb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Jh(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new ef(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},Jh=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let n=new Headers(t.headers),i=e.url;fetch(i,zb(n,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=Kl(s.url),!Ub(s.status))throw Js(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();let o=s.headers,{allowRangeRequests:a,suggestedLength:l}=Hb({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=$b(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Gb(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},ef=class{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;let i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let s=new Headers(t.headers);s.append("Range",`bytes=${e}-${n-1}`);let o=i.url;fetch(o,zb(s,this._withCredentials,this._abortController)).then(a=>{let l=Kl(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!Ub(a.status))throw Js(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){yield this._readCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Gb(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},wh=200,_h=206;function SI(r){let t=r.response;return typeof t!="string"?t:Zs(t).buffer}var tf=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Vb(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){let e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=_h):i.expectedStatus=wh,e.responseType="arraybuffer",Re(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){let n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){let n=this.pendingRequests[t];if(!n)return;let i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}let s=i.status||wh;if(!(s===wh&&n.expectedStatus===_h)&&s!==n.expectedStatus){n.onError(i.status);return}let a=SI(i);if(s===_h){let l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(Y('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},nf=class{constructor(t){this._source=t,this._manager=new tf(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rf(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let n=new sf(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},rf=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Kl(e.responseURL);let n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=Hb({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=$b(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Js(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return I(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},sf=class{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=Kl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Js(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return I(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},AI=/^[a-z][a-z0-9\-+.]+:/i;function II(r){if(AI.test(r))return new URL(r);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}var of=class{constructor(t){this.source=t,this.url=II(t.url),Re(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new af(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new lf(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},af=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Js(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},lf=class{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=t.source;this._isStreamingSupported=!i.disableStream;let s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},xI=1e5,Pb=30,zs=class r{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#s=null;#i=null;#l=0;#a=0;#d=null;#c=null;#h=0;#u=0;#f=Object.create(null);#o=[];#p=null;#m=[];#g=new WeakMap;#v=null;static#y=new Map;static#b=new Map;static#_=new WeakMap;static#D=null;static#S=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=e,this.#u=n.scale*_n.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};let{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=n.rawDims;this.#v=[1,0,0,-1,-o,a+s],this.#a=i,this.#l=s,r.#R(),pr(e,n),this.#e.promise.finally(()=>{r.#S.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=Oe.platform;return ee(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#d.read().then(({value:e,done:n})=>{if(n){this.#e.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#I(e.items),t()},this.#e.reject)};return this.#d=this.#p.getReader(),r.#S.add(this),t(),this.#e.promise}update({viewport:t,onBefore:e=null}){let n=t.scale*_n.pixelRatio,i=t.rotation;if(i!==this.#h&&(e?.(),this.#h=i,pr(this.#c,{rotation:i})),n!==this.#u){e?.(),this.#u=n;let s={div:null,properties:null,ctx:r.#x(this.#s)};for(let o of this.#m)s.properties=this.#g.get(o),s.div=o,this.#E(s)}}cancel(){let t=new nn("TextLayer task cancelled.");this.#d?.cancel(t).catch(()=>{}),this.#d=null,this.#e.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#o}#I(t){if(this.#n)return;this.#i.ctx??=r.#x(this.#s);let e=this.#m,n=this.#o;for(let i of t){if(e.length>xI){Y("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){let s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#T(i)}}#T(t){let e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(e);let i=k.transform(this.#v,t.transform),s=Math.atan2(i[1],i[0]),o=this.#f[t.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#r&&o.fontSubstitution||o.fontFamily;a=r.fontFamilyMap.get(a)||a;let l=Math.hypot(i[2],i[3]),c=l*r.#N(a,o,this.#s),u,d;s===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));let h="calc(var(--total-scale-factor) *",f=e.style;this.#t===this.#c?(f.left=`${(100*u/this.#a).toFixed(2)}%`,f.top=`${(100*d/this.#l).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(r.#D*l).toFixed(2)}px)`,f.fontFamily=a,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#r&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),s!==0&&(n.angle=s*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let g=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);g!==v&&Math.max(g,v)/Math.min(g,v)>1.5&&(p=!0)}if(p&&(n.canvasWidth=o.vertical?t.height:t.width),this.#g.set(e,n),this.#i.div=e,this.#i.properties=n,this.#E(this.#i),n.hasText&&this.#t.append(e),n.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#E(t){let{div:e,properties:n,ctx:i}=t,{style:s}=e,o="";if(r.#D>1&&(o=`scale(${1/r.#D})`),n.canvasWidth!==0&&n.hasText){let{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=n;r.#A(i,c*this.#u,a);let{width:u}=i.measureText(e.textContent);u>0&&(o=`scaleX(${l*this.#u/u}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#S.size>0)){this.#y.clear();for(let{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#x(t=null){let e=this.#b.get(t||="");if(!e){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#_.set(e,{size:0,family:""})}return e}static#A(t,e,n){let i=this.#_.get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)}static#R(){if(this.#D!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#D=t.getBoundingClientRect().height,t.remove()}static#N(t,e,n){let i=this.#y.get(t);if(i)return i;let s=this.#x(n);s.canvas.width=s.canvas.height=Pb,this.#A(s,Pb,t);let o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(Oe.platform.isFirefox&&Y("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?c=e.ascent:e.descent&&(c=1+e.descent)),this.#y.set(t,c),c}},Gs=class r{static textContent(t){let e=[],n={items:e,styles:Object.create(null)};function i(s){if(!s)return;let o=null,a=s.name;if(a==="#text")o=s.value;else if(r.shouldBuildText(a))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&e.push({str:o}),!!s.children)for(let l of s.children)i(l)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},TI=65536,MI=100;function RI(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let t=new uf,{docId:e}=t,n=r.url?NI(r.url):null,i=r.data?kI(r.data):null,s=r.httpHeaders||null,o=r.withCredentials===!0,a=r.password??null,l=r.range instanceof Tl?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:TI,u=r.worker instanceof Ci?r.worker:null,d=r.verbosity,h=typeof r.docBaseUrl=="string"&&!Xl(r.docBaseUrl)?r.docBaseUrl:null,f=ll(r.cMapUrl),p=r.cMapPacked!==!1,g=r.CMapReaderFactory||(Ue?Bh:_l),v=ll(r.iccUrl),m=ll(r.standardFontDataUrl),b=r.StandardFontDataFactory||(Ue?Vh:Cl),y=ll(r.wasmUrl),w=r.WasmFactory||(Ue?Hh:Al),_=r.stopAtErrors!==!0,D=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,E=r.isEvalSupported!==!1,S=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ue,x=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ue&&(Oe.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,j=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ue,de=r.fontExtraProperties===!0,me=r.enableXfa===!0,ie=r.ownerDocument||globalThis.document,Xe=r.disableRange===!0,N=r.disableStream===!0,O=r.disableAutoFetch===!0,vt=r.pdfBug===!0,rn=r.CanvasFactory||(Ue?jh:Oh),$n=r.FilterFactory||(Ue?Fh:Lh),sn=r.enableHWA===!0,Le=r.useWasm!==!1,_e=l?l.length:r.length??NaN,br=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ue&&!j,Dn=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===_l&&b===Cl&&w===Al&&f&&m&&y&&_i(f,document.baseURI)&&_i(m,document.baseURI)&&_i(y,document.baseURI)),Cn=null;JA(d);let we={canvasFactory:new rn({ownerDocument:ie,enableHWA:sn}),filterFactory:new $n({docId:e,ownerDocument:ie}),cMapReaderFactory:Dn?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:Dn?null:new b({baseUrl:m}),wasmFactory:Dn?null:new w({baseUrl:y})};if(!u){let xi={verbosity:d,port:fr.workerPort};u=xi.port?Ci.fromPort(xi):new Ci(xi),t._worker=u}let Ii={docId:e,apiVersion:"5.0.375",data:i,password:a,disableAutoFetch:O,rangeChunkSize:c,length:_e,docBaseUrl:h,enableXfa:me,evaluatorOptions:{maxImageSize:D,disableFontFace:j,ignoreErrors:_,isEvalSupported:E,isOffscreenCanvasSupported:S,isImageDecoderSupported:x,canvasMaxAreaInBytes:P,fontExtraProperties:de,useSystemFonts:br,useWasm:Le,useWorkerFetch:Dn,cMapUrl:f,iccUrl:v,standardFontDataUrl:m,wasmUrl:y}},Zb={ownerDocument:ie,pdfBug:vt,styleElement:Cn,loadingParams:{disableAutoFetch:O,enableXfa:me}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let xi=u.messageHandler.sendWithPromise("GetDocRequest",Ii,i?[i.buffer]:null),nc;if(l)nc=new Kh(l,{disableRange:Xe,disableStream:N});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let wr;if(Ue)if(_i(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");wr=xl}else wr=of;else wr=_i(n)?xl:nf;nc=new wr({url:n,length:_e,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:Xe,disableStream:N})}return xi.then(wr=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Zf=new hr(e,wr,u.port),Qb=new pf(Zf,t,nc,Zb,we);t._transport=Qb,Zf.send("Ready",null)})}).catch(t._capability.reject),t}function NI(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ue)return r;let t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function kI(r){if(Ue&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Zs(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ll(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}var cf=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,PI=r=>typeof r=="object"&&typeof r?.name=="string",OI=lI.bind(null,cf,PI),uf=class r{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${r.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return I(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null})}},Tl=class{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(let n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){pe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},df=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},hf=class{#e=!1;constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new pl:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Ml,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new Bs({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return I(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=Bn.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");let h=this._transport.getRenderingIntent(n,i,u,d),{renderingIntent:f,cacheKey:p}=h;this.#e=!1,a||=this._transport.getOptionalContentConfig(f);let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);let v=!!(f&gt.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));let m=w=>{g.renderTasks.delete(b),v&&(this.#e=!0),this.#t(),w?(b.capability.reject(w),this._abortOperatorList({intentState:g,reason:w instanceof Error?w:new Error(w)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new mf({callback:m,params:{canvasContext:t,viewport:e,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(b);let y=b.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([w,_])=>{if(this.destroyed){m();return}if(this._stats?.time("Rendering"),!(_.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:w,optionalContentConfig:_}),b.operatorListChanged()}).catch(m),y}getOperatorList({intent:t="display",annotationMode:e=Bn.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let o=this._transport.getRenderingIntent(t,e,n,i,!0),a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Gs.textContent(n));let e=this.streamTextContent(t);return new Promise(function(n,i){function s(){o.read().then(function({value:l,done:c}){if(c){n(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}let o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(t)}cleanup(t=!1){this.#e=!0;let e=this.#t();return t&&e&&(this._stats&&=new pl),e}#t(){if(!this.#e||this.destroyed)return!1;for(let{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(t,e){let n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){let{map:s,transfer:o}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(e);c.streamReader=l;let u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let h of c.renderTasks)h.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Vs){let i=MI;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new nn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}},ff=class{#e=new Map;#t=Promise.resolve();postMessage(t,e){let n={data:structuredClone(t,e?{transfer:e}:null)};this.#t.then(()=>{for(let[i]of this.#e)i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){let{signal:s}=n;if(s.aborted){Y("LoopbackPort - cannot use an `aborted` signal.");return}let o=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(e,i)}removeEventListener(t,e){this.#e.get(e)?.(),this.#e.delete(e)}terminate(){for(let[,t]of this.#e)t?.();this.#e.clear()}},Ci=class r{static#e=0;static#t=!1;static#n;static{Ue&&(this.#t=!0,fr.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;let i=new URL(e,n);return n.origin===i.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:n=eI()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(r.#n?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(r.#n||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new hr("main","worker",t),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(r.#t||r.#s){this._setupFakeWorker();return}let{workerSrc:t}=r;try{r._isSameOrigin(window.location,t)||(t=r._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),n=new hr("main","worker",e),i=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),n.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,this.#r()}),n.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});let o=()=>{let a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{Yl("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){r.#t||(Y("Setting up fake worker."),r.#t=!0),r._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new ff;this._port=e;let n=`fake${r.#e++}`,i=new hr(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new hr(n,n+"_worker",e),this.#r()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,r.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#n?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new r(t)}static get workerSrc(){if(fr.workerSrc)return fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return ee(this,"_setupFakeWorkerGlobal",I(this,null,function*(){return this.#s?this.#s:(yield import(this.workerSrc)).WorkerMessageHandler}))}},pf=class{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#s=null;constructor(t,e,n,i,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Ml,this.fontLoader=new kh({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#i(t,e=null){let n=this.#e.get(t);if(n)return n;let i=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,i),i}get annotationStorage(){return ee(this,"annotationStorage",new $s)}getRenderingIntent(t,e=Bn.ENABLE,n=null,i=!1,s=!1){let o=gt.DISPLAY,a=Nh;switch(t){case"any":o=gt.ANY;break;case"display":break;case"print":o=gt.PRINT;break;default:Y(`getRenderingIntent - invalid intent: ${t}`)}let l=o&gt.PRINT&&n instanceof yl?n:this.annotationStorage;switch(e){case Bn.DISABLE:o+=gt.ANNOTATIONS_DISABLE;break;case Bn.ENABLE:break;case Bn.ENABLE_FORMS:o+=gt.ANNOTATIONS_FORMS;break;case Bn.ENABLE_STORAGE:o+=gt.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Y(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=gt.IS_EDITING),s&&(o+=gt.OPLIST);let{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let n of this.#t.values())t.push(n._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),zs.cleanup(),this._networkStream?.cancelAllRequests(new nn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}Re(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",n=>I(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}})),t.on("GetRangeReader",(n,i)=>{Re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}Re(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new df(n,this))}),t.on("DocException",n=>{e._capability.reject(it(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw it(n);let i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};e.onPassword(i,n.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,s])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){let c=s.error;Y(`Error during font loading: ${c}`),this.commonObjs.resolve(n,c);break}let o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(c,u)=>globalThis.FontInspector.fontAdded(c,u):null,a=new Ph(s,o);this.fontLoader.bind(a).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(n,a)});break;case"CopyLocalImage":let{imageRef:l}=s;Re(l,"The imageRef must be defined.");for(let c of this.#t.values())for(let[,u]of c.objs)if(u?.ref===l)return u.dataLen?(this.commonObjs.resolve(n,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,s,o])=>{if(this.destroyed)return;let a=this.#t.get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",n=>I(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Y("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,n=this.#n.get(e);if(n)return n;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#r.set(s.refStr,t);let o=new hf(e,s,this,this._params.pdfBug);return this.#t.set(e,o),o});return this.#n.set(e,i),i}getPageIndex(t){return cf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new Xh(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#e.get(t);if(e)return e;let n=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new qh(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return I(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#t.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),zs.cleanup()}})}cachedPageNumber(t){if(!cf(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#r.get(e)??null}},ks=Symbol("INITIAL_DATA"),Ml=class{#e=Object.create(null);#t(t){return this.#e[t]||=ae(A({},Promise.withResolvers()),{data:ks})}get(t,e=null){if(e){let i=this.#t(t);return i.promise.then(()=>e(i.data)),null}let n=this.#e[t];if(!n||n.data===ks)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){let e=this.#e[t];return!!e&&e.data!==ks}delete(t){let e=this.#e[t];return!e||e.data===ks?!1:(delete this.#e[t],!0)}resolve(t,e=null){let n=this.#t(t);n.data=e,n.resolve()}clear(){for(let t in this.#e){let{data:e}=this.#e[t];e?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let t in this.#e){let{data:e}=this.#e[t];e!==ks&&(yield[t,e])}}},gf=class{#e=null;onContinue=null;onError=null;constructor(t){this.#e=t}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#e;return t.form||t.canvas&&e?.size>0}},mf=class r{#e=null;static#t=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gf(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(r.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:n,viewport:i,transform:s,background:o}=this.params;this.gfx=new Di(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),r.#t.delete(this._canvas),t||=new Vs(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return I(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r.#t.delete(this._canvas),this.callback())))})}},LI="5.0.375",FI="23972e194";function Ob(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Ps(r){return Math.max(0,Math.min(255,255*r))}var Rl=class{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ps(t),[t,t,t]}static G_HTML([t]){let e=Ob(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ps)}static RGB_HTML(t){return`#${t.map(Ob).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Ps(1-Math.min(1,t+i)),Ps(1-Math.min(1,n+i)),Ps(1-Math.min(1,e+i))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){let i=1-t,s=1-e,o=1-n,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}},vf=class{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){pe("Abstract method `_createSVG` called.")}},Ai=class extends vf{_createSVG(t){return document.createElementNS(wn,t)}},Nl=class{static setupStorage(t,e,n,i,s){let o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),s==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),s==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(let a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{let l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:s}){let{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(let[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&s.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){let e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:n});let a=s!=="richText",l=t.div;if(l.append(o),t.viewport){let d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let d=document.createTextNode(i.value);o.append(d),a&&Gs.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}let u=[[i,-1,o]];for(;u.length>0;){let[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}let p=d.children[++u.at(-1)[1]];if(p===null)continue;let{name:g}=p;if(g==="#text"){let m=document.createTextNode(p.value);c.push(m),f.append(m);continue}let v=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(v),p.attributes&&this.setAttributes({html:v,element:p,storage:e,intent:s,linkService:n}),p.children?.length>0)u.push([p,-1,v]);else if(p.value){let m=document.createTextNode(p.value);a&&Gs.shouldBuildText(g)&&c.push(m),v.append(m)}}for(let d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},eo=1e3,jI=9,mr=new WeakSet,kl=class{static create(t){switch(t.data.annotationType){case Te.LINK:return new Pl(t);case Te.TEXT:return new yf(t);case Te.WIDGET:switch(t.data.fieldType){case"Tx":return new bf(t);case"Btn":return t.data.radioButton?new Ol(t):t.data.checkBox?new _f(t):new Ef(t);case"Ch":return new Df(t);case"Sig":return new wf(t)}return new En(t);case Te.POPUP:return new Ws(t);case Te.FREETEXT:return new Ll(t);case Te.LINE:return new Sf(t);case Te.SQUARE:return new Af(t);case Te.CIRCLE:return new If(t);case Te.POLYLINE:return new Fl(t);case Te.CARET:return new Tf(t);case Te.INK:return new qs(t);case Te.POLYGON:return new xf(t);case Te.HIGHLIGHT:return new jl(t);case Te.UNDERLINE:return new Mf(t);case Te.SQUIGGLY:return new Rf(t);case Te.STRIKEOUT:return new Nf(t);case Te.STAMP:return new Bl(t);case Te.FILEATTACHMENT:return new kf(t);default:return new De(t)}}},De=class r{#e=null;#t=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t?.str||e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return r._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};let{rect:e}=t;e&&this.#r(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#e&&(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#r(t){let{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-a)/s}%`,e.top=`${100*(o-t[3]+l)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){let{data:e,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof En||(s.tabIndex=eo);let{style:o}=s;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Ws){let{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}let{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;let g=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(g>0||v>0){let b=`calc(${g}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof Ol){let b=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=b}switch(e.borderStyle.style){case wi.SOLID:o.borderStyle="solid";break;case wi.DASHED:o.borderStyle="dashed";break;case wi.BEVELED:Y("Unimplemented border style: beveled");break;case wi.INSET:Y("Unimplemented border style: inset");break;case wi.UNDERLINE:o.borderBottomStyle="solid";break;default:break}let m=e.borderColor||null;m?(this.#t=!0,o.borderColor=k.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}let c=k.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=i.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-f)/d}%`;let{rotation:p}=e;return e.hasOwnCanvas||p===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(p,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=this;t%180!==0&&([s,o]=[o,s]),e.style.width=`${100*s/n}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,n,i)=>{let s=i.detail[e],o=s[0],a=s.slice(1);i.target.style[n]=Rl[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Rl[`${o}_rgb`](a)})};return ee(this,"_commonActions",{display:e=>{let{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){let n=this._commonActions;for(let i of Object.keys(e.detail))(t[i]||n[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let n=this._commonActions;for(let[i,s]of Object.entries(e)){let o=n[i];if(o){let a={detail:{[i]:s},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){let[g,v,m,b]=t.subarray(2,6);if(i===g&&s===v&&e===m&&n===b)return}let{style:o}=this.container,a;if(this.#t){let{borderColor:g,borderWidth:v}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}let l=i-e,c=s-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);let h=u.createElement("defs");d.append(h);let f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,v=t.length;g<v;g+=8){let m=t[g],b=t[g+1],y=t[g+2],w=t[g+3],_=u.createElement("rect"),D=(y-e)/l,E=(s-b)/c,S=(m-y)/l,x=(b-w)/c;_.setAttribute("x",D),_.setAttribute("y",E),_.setAttribute("width",S),_.setAttribute("height",x),f.append(_),a?.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${E}" width="${S}" height="${x}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){let{data:t}=this,e=this.#n=new Ws({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){pe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let n=[];if(this._fieldObjects){let i=this._fieldObjects[t];if(i)for(let{page:s,id:o,exportValues:a}of i){if(s===-1||o===e)continue;let l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!mr.has(c)){Y(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:l,domElement:c})}return n}for(let i of document.getElementsByName(t)){let{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==e&&mr.has(i)&&n.push({id:o,exportValue:s,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},Pl=class extends De{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(this.#t(n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(this.#n(n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#e()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#e()}#t(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#e()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#e()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let i of Object.keys(e.actions)){let s=n.get(i);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}t.onclick||(t.onclick=()=>!1),this.#e()}_bindResetFormAction(t,e){let n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Y('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();let{fields:i,refs:s,include:o}=e,a=[];if(i.length!==0||s.length!==0){let u=new Set(s);for(let d of i){let h=this._fieldObjects[d]||[];for(let{id:f}of h)u.add(f)}for(let d of Object.values(this._fieldObjects))for(let h of d)u.has(h.id)===o&&a.push(h)}else for(let u of Object.values(this._fieldObjects))a.push(...u);let l=this.annotationStorage,c=[];for(let u of a){let{id:d}=u;switch(c.push(d),u.type){case"text":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;l.setValue(d,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}default:continue}let h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!mr.has(h)){Y(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},yf=class extends De{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},En=class extends De{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Oe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,s){n.includes("mouse")?t.addEventListener(n,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(t,e,n,i){for(let[s,o]of n)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":k.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||jI,s=t.style,o,a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(dl*i))||1,d=c/u;o=Math.min(i,l(d/dl))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/dl))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=k.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},bf=class extends En{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){let s=this.annotationStorage;for(let o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),s.setValue(o.id,{[i]:n})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let i=t.getValue(e,{value:this.data.fieldValue}),s=i.value||"",o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),mr.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=eo,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(n,"value",u.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue??"";n.value=l.userValue=d,l.formattedValue=null});let c=u=>{let{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",d=>{if(l.focused)return;let{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);let h={value(f){l.userValue=f.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){let{formattedValue:p}=f.detail;l.formattedValue=p,p!=null&&f.target!==document.activeElement&&(f.target.value=p),t.setValue(e,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{let{charLimit:p}=f.detail,{target:g}=f;if(p===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",p);let v=l.userValue;!v||v.length<=p||(v=v.slice(0,p),g.value=l.userValue=v,t.setValue(e,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(h,d)}),n.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if(d.key==="Escape"?h=0:d.key==="Enter"&&!this.data.multiLine?h=2:d.key==="Tab"&&(l.commitKey=3),h===-1)return;let{value:f}=d.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});let u=c;c=null,n.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;let{data:h,target:f}=d,{value:p,selectionStart:g,selectionEnd:v}=f,m=g,b=v;switch(d.inputType){case"deleteWordBackward":{let y=p.substring(0,g).match(/\w*[^\w]*$/);y&&(m-=y[0].length);break}case"deleteWordForward":{let y=p.substring(g).match(/^[^\w]*\w*/);y&&(b+=y[0].length);break}case"deleteContentBackward":g===v&&(m-=1);break;case"deleteContentForward":g===v&&(b+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:h||"",willCommit:!1,selStart:m,selEnd:b}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){let d=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${d}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},wf=class extends En{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},_f=class extends En{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,n=e.id,i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return mr.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=eo,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,n)){let u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(n,{value:l})}),s.addEventListener("resetform",o=>{let a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{let a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Ol=class extends En{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,n=e.id,i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(let o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});let s=document.createElement("input");if(mr.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=eo,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,n))t.setValue(c.id,{value:!1});t.setValue(n,{value:l})}),s.addEventListener("resetform",o=>{let a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){let o=e.buttonValue;s.addEventListener("updatefromsandbox",a=>{let l={value:c=>{let u=o===c.detail.value;for(let d of this._getElementsByName(c.target.name)){let h=u&&d.id===n;d.domElement&&(d.domElement.checked=h),t.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Ef=class extends Pl{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}},Df=class extends En{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");mr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=eo;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue;for(let h of i.options)h.selected=h.value===d});for(let u of this.data.options){let d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let o=null;if(s){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}let a=u=>{let d=u?"value":"textContent",{options:h,multiple:f}=i;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]},l=a(!1),c=u=>{let d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{let d={value(h){o?.();let f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(let g of i.options)g.selected=p.has(g.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){let f=i.options,p=h.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,v=>v.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(h){let{index:f,displayValue:p,exportValue:g}=h.detail.insert,v=i.children[f],m=document.createElement("option");m.textContent=p,m.value=g,v?v.before(m):i.append(m),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},items(h){let{items:f}=h.detail;for(;i.length!==0;)i.remove(0);for(let p of f){let{displayValue:g,exportValue:v}=p,m=document.createElement("option");m.textContent=g,m.value=v,i.append(m)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){let f=new Set(h.detail.indices);for(let p of h.target.options)p.selected=f.has(p.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{let d=a(!0),h=a(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Ws=class extends De{constructor(t){let{data:e,elements:n}=t;super(t,{isRenderable:De._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let t=this.popup=new Cf({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(let n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Wf}${n}`).join(",")),this.container}},Cf=class{#e=this.#I.bind(this);#t=this.#A.bind(this);#n=this.#x.bind(this);#r=this.#E.bind(this);#s=null;#i=null;#l=null;#a=null;#d=null;#c=null;#h=null;#u=!1;#f=null;#o=null;#p=null;#m=null;#g=null;#v=null;#y=!1;constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){this.#i=t,this.#g=i,this.#l=o,this.#m=a,this.#c=l,this.#s=e,this.#p=c,this.#h=u,this.#d=n,this.#a=gl.toDateObject(s),this.trigger=n.flatMap(h=>h.getElementsToTriggerPopup());for(let h of this.trigger)h.addEventListener("click",this.#r),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#t),h.classList.add("popupTriggerArea");for(let h of n)h.container?.addEventListener("keydown",this.#e);this.#i.hidden=!0,d&&this.#E()}render(){if(this.#f)return;let t=this.#f=document.createElement("div");if(t.className="popup",this.#s){let s=t.style.outlineColor=k.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}let e=document.createElement("span");e.className="header";let n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=this.#g,t.append(e),this.#a){let s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),e.append(s)}let i=this.#b;if(i)Nl.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{let s=this._formatContents(this.#l);t.append(s)}this.#i.append(t)}get#b(){let t=this.#m,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#m.html||null}get#_(){return this.#b?.attributes?.style?.fontSize||0}get#D(){return this.#b?.attributes?.style?.color||null}#S(t){let e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#D,fontSize:this.#_?`calc(${this.#_}px * var(--total-scale-factor))`:""}};for(let s of t.split(`
`))e.push({name:"span",value:s,attributes:i});return n}_formatContents({str:t,dir:e}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;let i=t.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){let a=i[s];n.append(document.createTextNode(a)),s<o-1&&n.append(document.createElement("br"))}return n}#I(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#l,richText:this.#m},t&&(this.#o=null),e&&(this.#m=this.#S(e),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#l,richText:this.#m}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#o=null)}#T(){if(this.#o!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:s}}}=this.#c,o=!!this.#h,a=o?this.#h:this.#p;for(let p of this.#d)if(!a||k.intersect(p.data.rect,a)!==null){a=p.data.rect,o=!0;break}let l=k.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];this.#o=[100*(d-i)/e,100*(h-s)/n];let{style:f}=this.#i;f.left=`${this.#o[0]}%`,f.top=`${this.#o[1]}%`}#E(){this.#u=!this.#u,this.#u?(this.#x(),this.#i.addEventListener("click",this.#r),this.#i.addEventListener("keydown",this.#e)):(this.#A(),this.#i.removeEventListener("click",this.#r),this.#i.removeEventListener("keydown",this.#e))}#x(){this.#f||this.render(),this.isVisible?this.#u&&this.#i.classList.add("focused"):(this.#T(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#A(){this.#i.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#i.hidden=!0)}maybeShow(){this.#y&&(this.#f||this.#x(),this.#y=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}},Ll=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=G.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Sf=class extends De{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Af=class extends De{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",e-s),o.setAttribute("height",n-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},If=class extends De{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",n/2),o.setAttribute("rx",e/2-s/2),o.setAttribute("ry",n/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Fl=class extends De{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:s,height:o}=this;if(!e)return this.container;let a=this.svgFactory.create(s,o,!0),l=[];for(let u=0,d=e.length;u<d;u+=2){let h=e[u]-t[0],f=t[3]-e[u+1];l.push(`${h},${f}`)}l=l.join(" ");let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},xf=class extends Fl{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Tf=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},qs=class extends De{#e=null;#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?G.HIGHLIGHT:G.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:o,width:a,height:l}=this.#n(e,t),c=this.svgFactory.create(a,l,!0),u=this.#e=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let d=0,h=n.length;d<h;d++){let f=this.svgFactory.createElement(this.svgElementName);this.#t.push(f),f.setAttribute("points",n[d].join(",")),u.append(f)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:e,points:n,rect:i}=t,s=this.#e;if(e>=0&&s.setAttribute("stroke-width",e||1),n)for(let o=0,a=this.#t.length;o<a;o++)this.#t[o].setAttribute("points",n[o].join(","));if(i){let{transform:o,width:a,height:l}=this.#n(this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},jl=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=G.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Mf=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Rf=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},Nf=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},Bl=class extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=G.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},kf=class extends De{#e=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",A({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;let{isMac:i}=Oe.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Pf=class r{#e=null;#t=null;#n=new Map;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a}){this.div=t,this.#e=e,this.#t=n,this.#r=a||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}#s(t,e){return I(this,null,function*(){let n=t.firstChild||t,i=n.id=`${Wf}${e}`,s=yield this.#r?.getAriaAttributes(i);if(s)for(let[o,a]of s)n.setAttribute(o,a);this.div.append(t),this.#e?.moveElementInDOM(this.div,t,n,!1)})}render(t){return I(this,null,function*(){let{annotations:e}=t,n=this.div;pr(n,this.viewport);let i=new Map,s={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ai,annotationStorage:t.annotationStorage||new $s,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let o of e){if(o.noHTML)continue;let a=o.annotationType===Te.POPUP;if(a){let u=i.get(o.id);if(!u)continue;s.elements=u}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;let l=kl.create(s);if(!l.isRenderable)continue;if(!a&&o.popupRef){let u=i.get(o.popupRef);u?u.push(l):i.set(o.popupRef,[l])}let c=l.render();o.hidden&&(c.style.visibility="hidden"),yield this.#s(c,o.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#i()})}addLinkAnnotations(t,e){return I(this,null,function*(){let n={data:null,layer:this.div,linkService:e,svgFactory:new Ai,parent:this};for(let i of t){i.borderStyle||=r._defaultBorderStyle,n.data=i;let s=kl.create(n);if(!s.isRenderable)continue;let o=s.render();yield this.#s(o,i.id)}})}update({viewport:t}){let e=this.div;this.viewport=t,pr(e,{rotation:t.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#t)return;let t=this.div;for(let[e,n]of this.#t){let i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";let{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):i.append(n);let o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),o._hasNoCanvas=!1):o.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return ee(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:wi.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},cl=/\r\n?|\n/g,Of=class r extends ye{#e;#t="";#n=`${this.id}-editor`;#r=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=r.prototype,e=s=>s.isEmpty(),n=Hs.TRANSLATE_SMALL,i=Hs.TRANSLATE_BIG;return ee(this,"_keyboardManager",new gr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=G.FREETEXT;constructor(t){super(ae(A({},t),{name:"freeTextEditor"})),this.#e=t.color||r._defaultColor||ye._defaultLineColor,this.#s=t.fontSize||r._defaultFontSize}static initialize(t,e){ye.initialize(t,e);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case te.FREETEXT_SIZE:r._defaultFontSize=e;break;case te.FREETEXT_COLOR:r._defaultColor=e;break}}updateParams(t,e){switch(t){case te.FREETEXT_SIZE:this.#i(e);break;case te.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[te.FREETEXT_SIZE,r._defaultFontSize],[te.FREETEXT_COLOR,r._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[te.FREETEXT_SIZE,this.#s],[te.FREETEXT_COLOR,this.#e]]}#i(t){let e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#d()},n=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){let e=i=>{this.#e=this.editorDiv.style.color=i},n=this.#e;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-r._internalPadding*t,-(r._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(G.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;let t=this._uiManager.combinedSignal(this.#r);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){let t=[];this.editorDiv.normalize();let e=null;for(let n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(r.#c(n)),e=n);return t.join(`
`)}#d(){let[t,e]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:i,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),n=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;let n=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){r._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Xf(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){let[i,s]=this.parentDimensions;if(this.annotationElementId){let{position:o}=this._initialData,[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);let[c,u]=this.pageDimensions,[d,h]=this.pageTranslation,f,p;switch(this.rotation){case 0:f=t+(o[0]-d)/c,p=e+this.height-(o[1]-h)/u;break;case 90:f=t+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=t-this.width+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=t+(o[0]-d-this.height*u)/c,p=e+(o[1]-h-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(f*i,p*s,a,l)}else this._moveAfterPaste(t,e);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cl,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();let i=r.#f(e.getData("text")||"").replaceAll(cl,`
`);if(!i)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let o=s.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){let f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(cl,"")),f!==this.editorDiv){let p=c;for(let g of this.editorDiv.childNodes){if(g===f){p=u;continue}p.push(r.#c(g))}}c.push(a.nodeValue.slice(0,l).replaceAll(cl,""))}else if(a===this.editorDiv){let f=c,p=0;for(let g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(r.#c(g))}this.#t=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#h();let d=new Range,h=c.reduce((f,p)=>f+p.length,0);for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}s.removeAllRanges(),s.addRange(d)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let t of this.#t.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#t.replaceAll("\xA0"," ")}static#f(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(t,e,n){return I(this,null,function*(){let i=null;if(t instanceof Ll){let{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d},textContent:h,textPosition:f,parent:{page:{pageNumber:p}}}=t;if(!h||h.length===0)return null;i=t={annotationType:G.FREETEXT,color:Array.from(a),fontSize:o,value:h.join(`
`),position:f,pageIndex:p-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:d}}let s=yield on(r,this,"deserialize").call(this,t,e,n);return s.#s=t.fontSize,s.#e=k.makeHexColor(...t.color),s.#t=r.#f(t.value),s.annotationElementId=t.id||null,s._initialData=i,s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=r._internalPadding*this.parentScale,n=this.getRect(e,e),i=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:G.FREETEXT,color:i,fontSize:this.#s,value:this.#u(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.isCopy=!0,s):this.annotationElementId&&!this.#o(s)?null:(s.id=this.annotationElementId,s)}#o(t){let{value:e,fontSize:n,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((o,a)=>o!==i[a])||t.pageIndex!==s}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(this.deleted)return e;let{style:n}=e;n.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,n.color=this.#e,e.replaceChildren();for(let s of this.#t.split(`
`)){let o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),e.append(o)}let i=r._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},R=(()=>{class r{static PRECISION=1e-4;toSVGPath(){pe("Abstract method `toSVGPath` must be implemented.")}get box(){pe("Abstract getter `box` must be implemented.")}serialize(e,n){pe("Abstract method `serialize` must be implemented.")}static _rescale(e,n,i,s,o,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l]*s,a[l+1]=i+e[l+1]*o;return a}static _rescaleAndSwap(e,n,i,s,o,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l+1]*s,a[l+1]=i+e[l]*o;return a}static _translate(e,n,i,s){s||=new Float32Array(e.length);for(let o=0,a=e.length;o<a;o+=2)s[o]=n+e[o],s[o+1]=i+e[o+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,i,s,o){switch(o){case 90:return[1-n/i,e/s];case 180:return[1-e/i,1-n/s];case 270:return[n/i,1-e/s];default:return[e/i,n/s]}}static _normalizePagePoint(e,n,i){switch(i){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,i,s,o,a){return[(e+5*i)/6,(n+5*s)/6,(5*i+o)/6,(5*s+a)/6,(i+o)/2,(s+a)/2]}}return r})(),Vl=class r{#e;#t=[];#n;#r;#s=[];#i=new Float32Array(18);#l;#a;#d;#c;#h;#u;#f=[];static#o=8;static#p=2;static#m=r.#o+r.#p;constructor({x:t,y:e},n,i,s,o,a=0){this.#e=n,this.#u=s*i,this.#r=o,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=a,this.#c=r.#o*i,this.#d=r.#m*i,this.#h=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#g(){let t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[n,i,s,o]=this.#e;return[(this.#l+(t[0]-e[0])/2-n)/s,(this.#a+(t[1]-e[1])/2-i)/o,(this.#l+(e[0]-t[0])/2-n)/s,(this.#a+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#l=t,this.#a=e;let[n,i,s,o]=this.#e,[a,l,c,u]=this.#i.subarray(8,12),d=t-c,h=e-u,f=Math.hypot(d,h);if(f<this.#d)return!1;let p=f-this.#c,g=p/f,v=g*d,m=g*h,b=a,y=l;a=c,l=u,c+=v,u+=m,this.#f?.push(t,e);let w=-m/p,_=v/p,D=w*this.#u,E=_*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([c+D,u+E],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([c-D,u-E],16),isNaN(this.#i[6])?(this.#s.length===0&&(this.#i.set([a+D,l+E],2),this.#s.push(NaN,NaN,NaN,NaN,(a+D-n)/s,(l+E-i)/o),this.#i.set([a-D,l-E],14),this.#t.push(NaN,NaN,NaN,NaN,(a-D-n)/s,(l-E-i)/o)),this.#i.set([b,y,a,l,c,u],6),!this.isEmpty()):(this.#i.set([b,y,a,l,c,u],6),Math.abs(Math.atan2(y-l,b-a)-Math.atan2(m,v))<Math.PI/2?([a,l,c,u]=this.#i.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((a+c)/2-n)/s,((l+u)/2-i)/o),[a,l,b,y]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((b+a)/2-n)/s,((y+l)/2-i)/o),!0):([b,y,a,l,c,u]=this.#i.subarray(0,6),this.#s.push(((b+5*a)/6-n)/s,((y+5*l)/6-i)/o,((5*a+c)/6-n)/s,((5*l+u)/6-i)/o,((a+c)/2-n)/s,((l+u)/2-i)/o),[c,u,a,l,b,y]=this.#i.subarray(12,18),this.#t.push(((b+5*a)/6-n)/s,((y+5*l)/6-i)/o,((5*a+c)/6-n)/s,((5*l+u)/6-i)/o,((a+c)/2-n)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#s,e=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();let n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#b(n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#y(n),n.join(" ")}#v(){let[t,e,n,i]=this.#e,[s,o,a,l]=this.#g();return`M${(this.#i[2]-t)/n} ${(this.#i[3]-e)/i} L${(this.#i[4]-t)/n} ${(this.#i[5]-e)/i} L${s} ${o} L${a} ${l} L${(this.#i[16]-t)/n} ${(this.#i[17]-e)/i} L${(this.#i[14]-t)/n} ${(this.#i[15]-e)/i} Z`}#y(t){let e=this.#t;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){let[e,n,i,s]=this.#e,o=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[l,c,u,d]=this.#g();t.push(`L${(o[0]-e)/i} ${(o[1]-n)/s} L${l} ${c} L${u} ${d} L${(a[0]-e)/i} ${(a[1]-n)/s}`)}newFreeDrawOutline(t,e,n,i,s,o){return new Hl(t,e,n,i,s,o)}getOutlines(){let t=this.#s,e=this.#t,n=this.#i,[i,s,o,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#f[d]-i)/o,l[d+1]=(this.#f[d+1]-s)/a;if(l[l.length-2]=(this.#l-i)/o,l[l.length-1]=(this.#a-s)/a,isNaN(n[6])&&!this.isEmpty())return this.#_(l);let c=new Float32Array(this.#s.length+24+this.#t.length),u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#S(c,u);for(let d=e.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(e[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+h],c[u+1]=e[d+h+1],u+=2}return this.#D(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#n,this.#r)}#_(t){let e=this.#i,[n,i,s,o]=this.#e,[a,l,c,u]=this.#g(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,this.#e,this.#h,this.#n,this.#r)}#D(t,e){let n=this.#t;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#S(t,e){let n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#g();return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],e),e+=24}},Hl=class extends R{#e;#t=new Float32Array(4);#n;#r;#s;#i;#l;constructor(t,e,n,i,s,o){super(),this.#l=t,this.#s=e,this.#e=n,this.#i=i,this.#n=s,this.#r=o,this.lastPoint=[NaN,NaN],this.#a(o);let[a,l,c,u]=this.#t;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){let t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,n=this.#l.length;e<n;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],s){let o=n-t,a=i-e,l,c;switch(s){case 0:l=R._rescale(this.#l,t,i,o,-a),c=R._rescale(this.#s,t,i,o,-a);break;case 90:l=R._rescaleAndSwap(this.#l,t,e,o,a),c=R._rescaleAndSwap(this.#s,t,e,o,a);break;case 180:l=R._rescale(this.#l,n,e,-o,a),c=R._rescale(this.#s,n,e,-o,a);break;case 270:l=R._rescaleAndSwap(this.#l,n,i,-o,-a),c=R._rescaleAndSwap(this.#s,n,i,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#a(t){let e=this.#l,n=e[4],i=e[5],s=n,o=i,a=n,l=i,c=n,u=i,d=t?Math.max:Math.min;for(let f=6,p=e.length;f<p;f+=6){if(isNaN(e[f]))s=Math.min(s,e[f+4]),o=Math.min(o,e[f+5]),a=Math.max(a,e[f+4]),l=Math.max(l,e[f+5]),u<e[f+5]?(c=e[f+4],u=e[f+5]):u===e[f+5]&&(c=d(c,e[f+4]));else{let g=k.bezierBoundingBox(n,i,...e.slice(f,f+6));s=Math.min(s,g[0]),o=Math.min(o,g[1]),a=Math.max(a,g[2]),l=Math.max(l,g[3]),u<g[3]?(c=g[2],u=g[3]):u===g[3]&&(c=d(c,g[2]))}n=e[f+4],i=e[f+5]}let h=this.#t;h[0]=s-this.#n,h[1]=o-this.#n,h[2]=a-s+2*this.#n,h[3]=l-o+2*this.#n,this.lastPoint=[c,u]}get box(){return this.#t}newOutliner(t,e,n,i,s,o=0){return new Vl(t,e,n,i,s,o)}getNewOutline(t,e){let[n,i,s,o]=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=n*c+a,p=i*u+l,g=this.newOutliner({x:this.#s[0]*d+f,y:this.#s[1]*h+p},this.#e,this.#i,t,this.#r,e??this.#n);for(let v=2;v<this.#s.length;v+=2)g.add({x:this.#s[v]*d+f,y:this.#s[v+1]*h+p});return g.getOutlines()}},Ys=class{#e;#t;#n=[];#r=[];constructor(t,e=0,n=0,i=!0){let s=1/0,o=-1/0,a=1/0,l=-1/0,u=10**-4;for(let{x:m,y:b,width:y,height:w}of t){let _=Math.floor((m-e)/u)*u,D=Math.ceil((m+y+e)/u)*u,E=Math.floor((b-e)/u)*u,S=Math.ceil((b+w+e)/u)*u,x=[_,E,S,!0],P=[D,E,S,!1];this.#n.push(x,P),s=Math.min(s,_),o=Math.max(o,D),a=Math.min(a,E),l=Math.max(l,S)}let d=o-s+2*n,h=l-a+2*n,f=s-n,p=a-n,g=this.#n.at(i?-1:-2),v=[g[0],g[2]];for(let m of this.#n){let[b,y,w]=m;m[0]=(b-f)/d,m[1]=(y-p)/h,m[2]=(w-p)/h}this.#e=new Float32Array([f,p,d,h]),this.#t=v}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);let t=[];for(let e of this.#n)e[3]?(t.push(...this.#d(e)),this.#l(e)):(this.#a(e),t.push(...this.#d(e)));return this.#s(t)}#s(t){let e=[],n=new Set;for(let o of t){let[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){let l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}let i=[],s;for(;n.size>0;){let o=n.values().next().value,[a,l,c,u,d]=o;n.delete(o);let h=a,f=l;for(s=[a,c],i.push(s);;){let p;if(n.has(u))p=u;else if(n.has(d))p=d;else break;n.delete(p),[a,l,c,u,d]=p,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new Lf(i,this.#e,this.#t)}#i(t){let e=this.#r,n=0,i=e.length-1;for(;n<=i;){let s=n+i>>1,o=e[s][0];if(o===t)return s;o<t?n=s+1:i=s-1}return i+1}#l([,t,e]){let n=this.#i(t);this.#r.splice(n,0,[t,e])}#a([,t,e]){let n=this.#i(t);for(let i=n;i<this.#r.length;i++){let[s,o]=this.#r[i];if(s!==t)break;if(s===t&&o===e){this.#r.splice(i,1);return}}for(let i=n-1;i>=0;i--){let[s,o]=this.#r[i];if(s!==t)break;if(s===t&&o===e){this.#r.splice(i,1);return}}}#d(t){let[e,n,i]=t,s=[[e,n,i]],o=this.#i(i);for(let a=0;a<o;a++){let[l,c]=this.#r[a];for(let u=0,d=s.length;u<d;u++){let[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([e,c,f])}}}return s}},Lf=class extends R{#e;#t;constructor(t,e,n){super(),this.#t=t,this.#e=e,this.lastPoint=n}toSVGPath(){let t=[];for(let e of this.#t){let[n,i]=e;t.push(`M${n} ${i}`);for(let s=2;s<e.length;s+=2){let o=e[s],a=e[s+1];o===n?(t.push(`V${a}`),i=a):a===i&&(t.push(`H${o}`),n=o)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],s){let o=[],a=n-t,l=i-e;for(let c of this.#t){let u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}},Xs=class extends Vl{newFreeDrawOutline(t,e,n,i,s,o){return new Ff(t,e,n,i,s,o)}},Ff=class extends Hl{newOutliner(t,e,n,i,s,o=0){return new Xs(t,e,n,i,s,o)}},$l=class r{#e=null;#t=null;#n;#r=null;#s=!1;#i=!1;#l=null;#a;#d=null;#c=null;#h;static#u=null;static get _keyboardManager(){return ee(this,"_keyboardManager",new gr([[["Escape","mac+Escape"],r.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],r.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],r.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],r.prototype._moveToPrevious],[["Home","mac+Home"],r.prototype._moveToBeginning],[["End","mac+End"],r.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#h=te.HIGHLIGHT_COLOR,this.#l=t):(this.#i=!0,this.#h=te.HIGHLIGHT_DEFAULT_COLOR),this.#c=t?._uiManager||e,this.#a=this.#c._eventBus,this.#n=t?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",r.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#e=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);let e=this.#c._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#p.bind(this),{signal:e});let n=this.#t=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){let t=this.#r=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){let t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",Lt,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[n,i]of this.#c.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",r.#u[n]);let o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#o.bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#p.bind(this),{signal:e}),t}#o(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#e){this.#m(t);return}let e=t.target.getAttribute("data-color");e&&this.#o(e,t)}_moveToNext(t){if(!this.#v){this.#m(t);return}if(t.target===this.#e){this.#r.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#r?.firstChild||t.target===this.#e){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#m(t);return}this.#r.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#m(t);return}this.#r.lastChild?.focus()}#p(t){r._keyboardManager.exec(this,t)}#m(t){if(this.#v){this.hideDropdown();return}if(this.#s=t.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#c.combinedSignal(this.#d)})),this.#r){this.#r.classList.remove("hidden");return}let e=this.#r=this.#f();this.#e.append(e)}#g(t){this.#r?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#v(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#v){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#t&&(this.#t.style.backgroundColor=t),!this.#r)return;let e=this.#c.highlightColors.values();for(let n of this.#r.children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}},Ul=class r extends ye{#e=null;#t=0;#n;#r=null;#s=null;#i=null;#l=null;#a=0;#d=null;#c=null;#h=null;#u=!1;#f=null;#o;#p=null;#m="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=G.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=r.prototype;return ee(this,"_keyboardManager",new gr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(ae(A({},t),{name:"highlightEditor"})),this.color=t.color||r._defaultColor,this.#g=t.thickness||r._defaultThickness,this.#o=t.opacity||r._defaultOpacity,this.#n=t.boxes||null,this.#v=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#b(t),this.#T()):this.#n&&(this.#e=t.anchorNode,this.#t=t.anchorOffset,this.#l=t.focusNode,this.#a=t.focusOffset,this.#y(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){let t=new Ys(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;let e=new Ys(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();let{lastPoint:n}=this.#i;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#c=t;let i=1.5;if(this.#i=t.getNewOutline(this.#g/2+i,.0025),e>=0)this.#h=e,this.#r=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:r.#E(this.#c.box,(u-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:r.#E(this.#i.box,u),path:{d:this.#i.toSVGPath()}})}let[s,o,a,l]=t.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{let[u,d]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{let[u,d]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*d/u,this.height=l*u/d;break}}let{lastPoint:c}=this.#i;this.#f=[(c[0]-s)/a,(c[1]-o)/l]}static initialize(t,e){ye.initialize(t,e),r._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case te.HIGHLIGHT_DEFAULT_COLOR:r._defaultColor=e;break;case te.HIGHLIGHT_THICKNESS:r._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case te.HIGHLIGHT_COLOR:this.#_(e);break;case te.HIGHLIGHT_THICKNESS:this.#D(e);break}}static get defaultPropertiesToUpdate(){return[[te.HIGHLIGHT_DEFAULT_COLOR,r._defaultColor],[te.HIGHLIGHT_THICKNESS,r._defaultThickness]]}get propertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,this.color||r._defaultColor],[te.HIGHLIGHT_THICKNESS,this.#g||r._defaultThickness],[te.HIGHLIGHT_FREE,this.#u]]}#_(t){let e=(s,o)=>{this.color=s,this.#o=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:s,"fill-opacity":o}}),this.#s?.updateColor(s)},n=this.color,i=this.#o;this.addCommands({cmd:e.bind(this,t,r._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#D(t){let e=this.#g,n=i=>{this.#g=i,this.#S(i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}addEditToolbar(){return I(this,null,function*(){let t=yield on(r.prototype,this,"addEditToolbar").call(this);return t?(this._uiManager.highlightColors&&(this.#s=new $l({editor:this}),t.addColorPicker(this.#s)),t):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#I(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#I():t&&(this.#T(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#S(t){if(!this.#u)return;this.#b({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();let[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#I(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#r}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#o},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#d&&(this.#d.style.clipPath=this.#r))}static#E([t,e,n,i],s){switch(s){case 90:return[1-e-i,t,i,n];case 180:return[1-t-n,1-e-i,n,i];case 270:return[e,1-t-n,i,n]}return[t,e,n,i]}rotate(t){let{drawLayer:e}=this.parent,n;this.#u?(t=(t-this.rotation+360)%360,n=r.#E(this.#c.box,t)):n=r.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:r.#E(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#x.bind(this),{signal:this._uiManager._signal});let e=this.#d=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#r;let[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Xf(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#x(t){r._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(t){if(!this.#e)return;let e=window.getSelection();t?e.setPosition(this.#e,this.#t):e.setPosition(this.#l,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#A(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#R(){return this.#u?this.rotation:0}#N(){if(this.#u)return null;let[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8),a=0;for(let{x:l,y:c,width:u,height:d}of s){let h=l*t+n,f=(1-c)*e+i;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*t,o[a+5]=o[a+7]=f-d*e,a+=8}return o}#k(t){return this.#c.serialize(t,this.#R())}static startHighlighting(t,e,{target:n,x:i,y:s}){let{x:o,y:a,width:l,height:c}=n.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),h=f=>{u.abort(),this.#C(t,f)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",Me,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Lt,{signal:d}),n.addEventListener("pointermove",this.#V.bind(this,t),{signal:d}),this._freeHighlight=new Xs({x:i,y:s},[o,a,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#V(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#C(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,n){return I(this,null,function*(){let i=null;if(t instanceof jl){let{data:{quadPoints:p,rect:g,rotation:v,id:m,color:b,opacity:y,popupRef:w},parent:{page:{pageNumber:_}}}=t;i=t={annotationType:G.HIGHLIGHT,color:Array.from(b),opacity:y,quadPoints:p,boxes:null,pageIndex:_-1,rect:g.slice(0),rotation:v,id:m,deleted:!1,popupRef:w}}else if(t instanceof qs){let{data:{inkLists:p,rect:g,rotation:v,id:m,color:b,borderStyle:{rawWidth:y},popupRef:w},parent:{page:{pageNumber:_}}}=t;i=t={annotationType:G.HIGHLIGHT,color:Array.from(b),thickness:y,inkLists:p,boxes:null,pageIndex:_-1,rect:g.slice(0),rotation:v,id:m,deleted:!1,popupRef:w}}let{color:s,quadPoints:o,inkLists:a,opacity:l}=t,c=yield on(r,this,"deserialize").call(this,t,e,n);c.color=k.makeHexColor(...s),c.#o=l||1,a&&(c.#g=t.thickness),c.annotationElementId=t.id||null,c._initialData=i;let[u,d]=c.pageDimensions,[h,f]=c.pageTranslation;if(o){let p=c.#n=[];for(let g=0;g<o.length;g+=8)p.push({x:(o[g]-h)/u,y:1-(o[g+1]-f)/d,width:(o[g+2]-o[g])/u,height:(o[g+1]-o[g+5])/d});c.#y(),c.#T(),c.rotate(c.rotation)}else if(a){c.#u=!0;let p=a[0],g={x:p[0]-h,y:d-(p[1]-f)},v=new Xs(g,[0,0,u,d],1,c.#g/2,!0,.001);for(let y=0,w=p.length;y<w;y+=2)g.x=p[y]-h,g.y=d-(p[y+1]-f),v.add(g);let{id:m,clipPathId:b}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:v.toSVGPath()}},!0,!0);c.#b({highlightOutlines:v.getOutlines(),highlightId:m,clipPathId:b}),c.#T()}return c})}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=this.getRect(0,0),n=ye._colorManager.convert(this.color),i={annotationType:G.HIGHLIGHT,color:n,opacity:this.#o,thickness:this.#g,quadPoints:this.#N(),outlines:this.#k(e),pageIndex:this.pageIndex,rect:e,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#w(i)?null:(i.id=this.annotationElementId,i)}#w(t){let{color:e}=this._initialData;return t.color.some((n,i)=>n!==e[i])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},zl=class{#e=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#e[t]=e}toSVGProperties(){let t=this.#e;return this.#e=Object.create(null),{root:t}}reset(){this.#e=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){pe("Not implemented")}},Wb=(()=>{class r extends ye{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#s=null;static#i=NaN;static#l=null;static#a=null;static#d=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:n,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#m(e.box)}#h(e,n){let{id:i}=n.drawLayer.draw(r._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,n){let i=new Set(Object.keys(e));for(let[s,o]of Object.entries(n))i.has(s)?Object.assign(e[s],o):e[s]=o;return e}static getDefaultDrawingOptions(e){pe("Not implemented")}static get typesMap(){pe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(r.#n.updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){let e=[],n=this._defaultDrawingOptions;for(let[i,s]of this.typesMap)e.push([i,n[s]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:n}=this;for(let[i,s]of this.constructor.typesMap)e.push([i,n[s]]);return e}_updateProperty(e,n,i){let s=this._drawingOptions,o=s[n],a=l=>{s.updateProperty(n,l);let c=this.#e.updateProperty(n,l);c&&this.#m(c),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#o([e,n,i,s]){let{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[n,1-e,i*(a/o),s*(o/a)];case 180:return[1-e,1-n,i,s];case 270:return[1-n,e,i*(a/o),s*(o/a)];default:return[e,n,i,s]}}#p(){let{x:e,y:n,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-n,e,i*(o/a),s*(a/o)];case 180:return[1-e,1-n,i,s];case 270:return[n,1-e,i*(o/a),s*(a/o)];default:return[e,n,i,s]}}#m(e){if([this.x,this.y,this.width,this.height]=this.#o(e),this.div){this.fixAndSetPosition();let[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()}#g(){let{x:e,y:n,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-n-s,e,s,i];case 2:return[1-e-i,1-n-s,i,s];case 3:return[n,1-e-i,s,i];case 4:return[e,n-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-n,e,i*(l/c),s*(c/l)];case 6:return[1-e-s*(c/l),1-n,s*(c/l),i*(l/c)];case 7:return[n-i*(l/c),1-e-s*(c/l),i*(l/c),s*(c/l)];case 8:return[e-i,n-s,i,s];case 9:return[1-n,e-i,s,i];case 10:return[1-e,1-n,i,s];case 11:return[n-s,1-e,s,i];case 12:return[e-s*(c/l),n,s*(c/l),i*(l/c)];case 13:return[1-n-i*(l/c),e-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-e,1-n-i*(l/c),s*(c/l),i*(l/c)];case 15:return[n,1-e,i*(l/c),s*(c/l)];default:return[e,n,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);let i=super.render();i.classList.add("draw");let s=document.createElement("div");i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";let[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,s,o){pe("Not implemented")}static startDrawing(e,n,i,s){let{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=s;if(r.#l&&r.#l!==u)return;let{viewport:{rotation:d}}=e,{width:h,height:f}=o.getBoundingClientRect(),p=r.#r=new AbortController,g=e.combinedSignal(p);if(r.#i||=c,r.#l??=u,window.addEventListener("pointerup",v=>{r.#i===v.pointerId?this._endDraw(v):r.#a?.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{r.#i===v.pointerId?this._currentParent.endDrawingSession():r.#a?.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{r.#l===v.pointerType&&((r.#a||=new Set).add(v.pointerId),r.#n.isCancellable()&&(r.#n.removeLastElement(),r.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Lt,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===r.#d&&Me(v)},{signal:g}),e.toggleDrawing(),n._editorUndoBar?.hide(),r.#n){e.drawLayer.updateProperties(this._currentDrawId,r.#n.startNew(a,l,h,f,d));return}n.updateUIForDefaultProperties(this),r.#n=this.createDrawerInstance(a,l,h,f,d),r.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(r.#s.toSVGProperties(),r.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(r.#d=-1,!r.#n)return;let{offsetX:n,offsetY:i,pointerId:s}=e;if(r.#i===s){if(r.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,r.#n.add(n,i)),r.#d=e.timeStamp,Me(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,r.#n=null,r.#s=null,r.#l=null,r.#d=NaN),r.#r&&(r.#r.abort(),r.#r=null,r.#i=NaN,r.#a=null)}static _endDraw(e){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,r.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let i=r.#n,s=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:te.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(te.DRAW_STEP),!r.#n.isEmpty()){let{pageDimensions:[i,s],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:r.#n.getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:r.#s,mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,s,o,a){pe("Not implemented")}static deserialize(e,n,i){return I(this,null,function*(){let{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=n.viewport,c=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,e),u=yield on(r,this,"deserialize").call(this,e,n,i);return u.createDrawingOptions(e),u.#c({drawOutlines:c}),u.#f(),u.onScaleChanging(),u.rotate(),u})}serializeDraw(e){let[n,i]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#e.serialize([n,i,s,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return r})(),jf=class{#e=new Float64Array(6);#t;#n;#r;#s;#i;#l="";#a=0;#d=new vr;#c;#h;constructor(t,e,n,i,s,o){this.#c=n,this.#h=i,this.#r=s,this.#s=o,[t,e]=this.#u(t,e);let a=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#n=[{line:a,points:this.#i}],this.#e.set(a,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#u(t,e){return R._normalizePoint(t,e,this.#c,this.#h,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#u(t,e);let[n,i,s,o]=this.#e.subarray(2,6),a=t-s,l=e-o;return Math.hypot(this.#c*a,this.#h*l)<=2?null:(this.#i.push(t,e),isNaN(n)?(this.#e.set([s,o,t,e],2),this.#t.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,s,o,t,e],0),this.#t.push(...R.createBezierPoints(n,i,s,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let n=this.add(t,e);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,s){this.#c=n,this.#h=i,this.#r=s,[t,e]=this.#u(t,e);let o=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];let a=this.#n.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#n.push({line:o,points:this.#i}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#t=t.line,this.#i=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#d.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#d.removeLastElement();this.#n.pop(),this.#l="";for(let t=0,e=this.#n.length;t<e;t++){let{line:n,points:i}=this.#n[t];this.#t=n,this.#i=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){let t=R.svgRound(this.#t[4]),e=R.svgRound(this.#t[5]);if(this.#i.length===2)return this.#l=`${this.#l} M ${t} ${e} Z`,this.#l;if(this.#i.length<=6){let i=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,i)} M ${t} ${e}`,this.#a=6}if(this.#i.length===4){let i=R.svgRound(this.#t[10]),s=R.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${i} ${s}`,this.#a=12,this.#l}let n=[];this.#a===0&&(n.push(`M ${t} ${e}`),this.#a=6);for(let i=this.#a,s=this.#t.length;i<s;i+=6){let[o,a,l,c,u,d]=this.#t.slice(i,i+6).map(R.svgRound);n.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return this.#l+=n.join(" "),this.#a=this.#t.length,this.#l}getOutlines(t,e,n,i){let s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#d.build(this.#n,t,e,n,this.#r,this.#s,i),this.#e=null,this.#t=null,this.#n=null,this.#l=null,this.#d}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},vr=class extends R{#e;#t=0;#n;#r;#s;#i;#l;#a;#d;build(t,e,n,i,s,o,a){this.#s=e,this.#i=n,this.#l=i,this.#a=s,this.#d=o,this.#n=a??0,this.#r=t,this.#u()}get thickness(){return this.#d}setLastElement(t){return this.#r.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:e}of this.#r){if(t.push(`M${R.svgRound(e[4])} ${R.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${R.svgRound(e[10])} ${R.svgRound(e[11])}`);continue}for(let n=6,i=e.length;n<i;n+=6){let[s,o,a,l,c,u]=e.subarray(n,n+6).map(R.svgRound);t.push(`C${s} ${o} ${a} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,e,n,i],s){let o=[],a=[],[l,c,u,d]=this.#h(),h,f,p,g,v,m,b,y,w;switch(this.#a){case 0:w=R._rescale,h=t,f=e+i,p=n,g=-i,v=t+l*n,m=e+(1-c-d)*i,b=t+(l+u)*n,y=e+(1-c)*i;break;case 90:w=R._rescaleAndSwap,h=t,f=e,p=n,g=i,v=t+c*n,m=e+l*i,b=t+(c+d)*n,y=e+(l+u)*i;break;case 180:w=R._rescale,h=t+n,f=e,p=-n,g=i,v=t+(1-l-u)*n,m=e+c*i,b=t+(1-l)*n,y=e+(c+d)*i;break;case 270:w=R._rescaleAndSwap,h=t+n,f=e+i,p=-n,g=-i,v=t+(1-c-d)*n,m=e+(1-l-u)*i,b=t+(1-c)*n,y=e+(1-l)*i;break}for(let{line:_,points:D}of this.#r)o.push(w(_,h,f,p,g,s?new Array(_.length):null)),a.push(w(D,h,f,p,g,s?new Array(D.length):null));return{lines:o,points:a,rect:[v,m,b,y]}}static deserialize(t,e,n,i,s,{paths:{lines:o,points:a},rotation:l,thickness:c}){let u=[],d,h,f,p,g;switch(l){case 0:g=R._rescale,d=-t/n,h=e/i+1,f=1/n,p=-1/i;break;case 90:g=R._rescaleAndSwap,d=-e/i,h=-t/n,f=1/i,p=1/n;break;case 180:g=R._rescale,d=t/n+1,h=-e/i,f=-1/n,p=1/i;break;case 270:g=R._rescaleAndSwap,d=e/i+1,h=t/n+1,f=-1/i,p=-1/n;break}if(!o){o=[];for(let m of a){let b=m.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1],NaN,NaN,NaN,NaN,m[2],m[3]]));continue}let y=new Float32Array(3*(b-2));o.push(y);let[w,_,D,E]=m.subarray(0,4);y.set([NaN,NaN,NaN,NaN,w,_],0);for(let S=4;S<b;S+=2){let x=m[S],P=m[S+1];y.set(R.createBezierPoints(w,_,D,E,x,P),(S-2)*3),[w,_,D,E]=[D,E,x,P]}}}for(let m=0,b=o.length;m<b;m++)u.push({line:g(o[m].map(y=>y??NaN),d,h,f,p),points:g(a[m].map(y=>y??NaN),d,h,f,p)});let v=new this.prototype.constructor;return v.build(u,n,i,1,l,c,s),v}#c(t=this.#d){let e=this.#n+t/2*this.#l;return this.#a%180===0?[e/this.#s,e/this.#i]:[e/this.#i,e/this.#s]}#h(){let[t,e,n,i]=this.#e,[s,o]=this.#c(0);return[t+s,e+o,n-2*s,i-2*o]}#u(){let t=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:i}of this.#r){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6){let[c,u]=i.subarray(a,a+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],u),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],u)}continue}let s=i[4],o=i[5];for(let a=6,l=i.length;a<l;a+=6){let[c,u,d,h,f,p]=i.subarray(a,a+6);k.bezierBoundingBox(s,o,c,u,d,h,f,p,t),s=f,o=p}}let[e,n]=this.#c();t[0]=mt(t[0]-e,0,1),t[1]=mt(t[1]-n,0,1),t[2]=mt(t[2]+e,0,1),t[3]=mt(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#e}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){let[e,n]=this.#c();this.#d=t;let[i,s]=this.#c(),[o,a]=[i-e,s-n],l=this.#e;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([t,e],n){let[i,s]=this.#c();this.#s=t,this.#i=e,this.#l=n;let[o,a]=this.#c(),l=o-i,c=a-s,u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#t=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(R.svgRound).join(" ")}get defaultProperties(){let[t,e]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${R.svgRound(t)} ${R.svgRound(e)}`}}}get rotationTransform(){let[,,t,e]=this.#e,n=0,i=0,s=0,o=0,a=0,l=0;switch(this.#t){case 90:i=e/t,s=-t/e,a=t;break;case 180:n=-1,o=-1,a=t,l=e;break;case 270:i=-e/t,s=t/e,l=e;break;default:return""}return`matrix(${n} ${i} ${s} ${o} ${R.svgRound(a)} ${R.svgRound(l)})`}getPathResizingSVGProperties([t,e,n,i]){let[s,o]=this.#c(),[a,l,c,u]=this.#e;if(Math.abs(c-s)<=R.PRECISION||Math.abs(u-o)<=R.PRECISION){let g=t+n/2-(a+c/2),v=e+i/2-(l+u/2);return{path:{"transform-origin":`${R.svgRound(t)} ${R.svgRound(e)}`,transform:`${this.rotationTransform} translate(${g} ${v})`}}}let d=(n-2*s)/(c-2*s),h=(i-2*o)/(u-2*o),f=c/n,p=u/i;return{path:{"transform-origin":`${R.svgRound(a)} ${R.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${p}) translate(${R.svgRound(s)} ${R.svgRound(o)}) scale(${d} ${h}) translate(${R.svgRound(-s)} ${R.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,n,i]){let[s,o]=this.#c(),a=this.#e,[l,c,u,d]=a;if(a[0]=t,a[1]=e,a[2]=n,a[3]=i,Math.abs(u-s)<=R.PRECISION||Math.abs(d-o)<=R.PRECISION){let v=t+n/2-(l+u/2),m=e+i/2-(c+d/2);for(let{line:b,points:y}of this.#r)R._translate(b,v,m,b),R._translate(y,v,m,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${R.svgRound(t)} ${R.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let h=(n-2*s)/(u-2*s),f=(i-2*o)/(d-2*o),p=-h*(l+s)+t+s,g=-f*(c+o)+e+o;if(h!==1||f!==1||p!==0||g!==0)for(let{line:v,points:m}of this.#r)R._rescale(v,p,g,h,f,v),R._rescale(m,p,g,h,f,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${R.svgRound(t)} ${R.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){let[i,s]=n,o=this.#e,a=t-o[0],l=e-o[1];if(this.#s===i&&this.#i===s)for(let{line:c,points:u}of this.#r)R._translate(c,a,l,c),R._translate(u,a,l,u);else{let c=this.#s/i,u=this.#i/s;this.#s=i,this.#i=s;for(let{line:d,points:h}of this.#r)R._rescale(d,a,l,c,u,d),R._rescale(h,a,l,c,u,h);o[2]*=c,o[3]*=u}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${R.svgRound(t)} ${R.svgRound(e)}`}}}get defaultSVGProperties(){let t=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${R.svgRound(t[0])} ${R.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},Gl=class r extends zl{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){let t=new r(this._viewParameters);return t.updateAll(this),t}},Bf=class r extends Wb{static _type="ink";static _editorType=G.INK;static _defaultDrawingOptions=null;constructor(t){super(ae(A({},t),{name:"inkEditor"})),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ye.initialize(t,e),this._defaultDrawingOptions=new Gl(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ee(this,"typesMap",new Map([[te.INK_THICKNESS,"stroke-width"],[te.INK_COLOR,"stroke"],[te.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,s){return new jf(t,e,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,s,o){return vr.deserialize(t,e,n,i,s,o)}static deserialize(t,e,n){return I(this,null,function*(){let i=null;if(t instanceof qs){let{data:{inkLists:o,rect:a,rotation:l,id:c,color:u,opacity:d,borderStyle:{rawWidth:h},popupRef:f},parent:{page:{pageNumber:p}}}=t;i=t={annotationType:G.INK,color:Array.from(u),thickness:h,opacity:d,paths:{points:o},boxes:null,pageIndex:p-1,rect:a.slice(0),rotation:l,id:c,deleted:!1,popupRef:f}}let s=yield on(r,this,"deserialize").call(this,t,e,n);return s.annotationElementId=t.id||null,s._initialData=i,s})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=r.getDefaultDrawingOptions({stroke:k.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:e,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":a}}=this,l={annotationType:G.INK,color:ye._colorManager.convert(s),opacity:o,thickness:a,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(t){let{color:e,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,a)=>o!==e[a])||t.thickness!==n||t.opacity!==i||t.pageIndex!==s}renderAnnotationElement(t){let{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e}),null}},Ks=class extends vr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}},ul=8,Os=3,Vn=class{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#r(t,e,n,i,s,o,a){let l=this.#t(n,i,s,o);for(let c=0;c<8;c++){let u=(-c+l-a+16)%8,d=this.#n[2*u],h=this.#n[2*u+1];if(t[(n+d)*e+(i+h)]!==0)return u}return-1}static#s(t,e,n,i,s,o,a){let l=this.#t(n,i,s,o);for(let c=0;c<8;c++){let u=(c+l+a+16)%8,d=this.#n[2*u],h=this.#n[2*u+1];if(t[(n+d)*e+(i+h)]!==0)return u}return-1}static#i(t,e,n,i){let s=t.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=t[u]<=i?1:0;for(let u=1;u<n-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*n-1-u]=0;let a=1,l,c=[];for(let u=1;u<n-1;u++){l=1;for(let d=1;d<e-1;d++){let h=u*e+d,f=o[h];if(f===0)continue;let p=u,g=d;if(f===1&&o[h-1]===0)a+=1,g-=1;else if(f>=1&&o[h+1]===0)a+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}let v=[d,u],m=g===d+1,b={isHole:m,points:v,id:a,parent:0};c.push(b);let y;for(let j of c)if(j.id===l){y=j;break}y?y.isHole?b.parent=m?y.parent:l:b.parent=m?l:y.parent:b.parent=m?l:0;let w=this.#r(o,e,u,d,p,g,0);if(w===-1){o[h]=-a,o[h]!==1&&(l=Math.abs(o[h]));continue}let _=this.#n[2*w],D=this.#n[2*w+1],E=u+_,S=d+D;p=E,g=S;let x=u,P=d;for(;;){let j=this.#s(o,e,x,P,p,g,1);_=this.#n[2*j],D=this.#n[2*j+1];let de=x+_,me=P+D;v.push(me,de);let ie=x*e+P;if(o[ie+1]===0?o[ie]=-a:o[ie]===1&&(o[ie]=a),de===u&&me===d&&x===E&&P===S){o[h]!==1&&(l=Math.abs(o[h]));break}else p=x,g=P,x=de,P=me}}}return c}static#l(t,e,n,i){if(n-e<=4){for(let E=e;E<n-2;E+=2)i.push(t[E],t[E+1]);return}let s=t[e],o=t[e+1],a=t[n-4]-s,l=t[n-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,h=u*o-d*s,f=l/a,p=1/c,g=Math.atan(f),v=Math.cos(g),m=Math.sin(g),b=p*(Math.abs(v)+Math.abs(m)),y=p*(1-b+b**2),w=Math.max(Math.atan(Math.abs(m+v)*y),Math.atan(Math.abs(m-v)*y)),_=0,D=e;for(let E=e+2;E<n-2;E+=2){let S=Math.abs(h-u*t[E+1]+d*t[E]);S>_&&(D=E,_=S)}_>(c*w)**2?(this.#l(t,e,D+2,i),this.#l(t,D,n,i)):i.push(s,o)}static#a(t){let e=[],n=t.length;return this.#l(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#d(t,e,n,i,s,o){let a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){let v=(g-c)**2;for(let m=0;m<o;m++)a[g*o+m]=Math.exp((v+(m-c)**2)/l)}let u=new Float32Array(256),d=-2*s**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);let h=t.length,f=new Uint8Array(h),p=new Uint32Array(256);for(let g=0;g<n;g++)for(let v=0;v<e;v++){let m=g*e+v,b=t[m],y=0,w=0;for(let D=0;D<o;D++){let E=g+D-c;if(!(E<0||E>=n))for(let S=0;S<o;S++){let x=v+S-c;if(x<0||x>=e)continue;let P=t[E*e+x],j=a[D*o+S]*u[Math.abs(P-b)];y+=P*j,w+=j}}let _=f[m]=Math.round(y/w);p[_]++}return[f,p]}static#c(t){let e=new Uint32Array(256);for(let n of t)e[n]++;return e}static#h(t){let e=t.length,n=new Uint8ClampedArray(e>>2),i=-1/0,s=1/0;for(let a=0,l=n.length;a<l;a++){if(t[(a<<2)+3]===0){i=n[a]=255;continue}let u=n[a]=t[a<<2];u>i&&(i=u),u<s&&(s=u)}let o=255/(i-s);for(let a=0;a<e;a++)n[a]=(n[a]-s)*o;return n}static#u(t){let e,n=-1/0,i=-1/0,s=t.findIndex(l=>l!==0),o=s,a=s;for(e=s;e<256;e++){let l=t[e];l>n&&(e-o>i&&(i=e-o,a=e-1),n=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){let e=t,{width:n,height:i}=t,{maxDim:s}=this.#e,o=n,a=i;if(n>s||i>s){let h=n,f=i,p=Math.log2(Math.max(n,i)/s),g=Math.floor(p);p=p===g?g-1:g;for(let m=0;m<p;m++){o=h,a=f,o>s&&(o=Math.ceil(o/2)),a>s&&(a=Math.ceil(a/2));let b=new OffscreenCanvas(o,a);b.getContext("2d").drawImage(t,0,0,h,f,0,0,o,a),h=o,f=a,t!==e&&t.close(),t=b.transferToImageBitmap()}let v=Math.min(s/o,s/a);o=Math.round(o*v),a=Math.round(a*v)}let c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(t,0,0,t.width,t.height,0,0,o,a);let u=c.getImageData(0,0,o,a).data;return[this.#h(u),o,a]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1}),d=200,h=u.font=`${n} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:v,fontBoundingBoxAscent:m,fontBoundingBoxDescent:b,width:y}=u.measureText(t),w=1.5,_=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,y)*w),D=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||d,Math.abs(m)+Math.abs(b)||d)*w);c=new OffscreenCanvas(_,D),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,_,D),u.fillStyle="black",u.fillText(t,_*(w-1)/2,D*(3-w)/2);let E=this.#h(u.getImageData(0,0,_,D).data),S=this.#c(E),x=this.#u(S),P=this.#i(E,_,D,x);return this.processDrawnLines({lines:{curves:P,width:_,height:D},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,s){let[o,a,l]=this.#f(t),[c,u]=this.#d(o,a,l,Math.hypot(a,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),d=this.#u(u),h=this.#i(c,a,l,d);return this.processDrawnLines({lines:{curves:h,width:a,height:l},pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([e,n]=[n,e]);let{curves:l,width:c,height:u}=t,d=t.thickness??0,h=[],f=Math.min(e/c,n/u),p=f/e,g=f/n,v=[];for(let{points:b}of l){let y=o?this.#a(b):b;if(!y)continue;v.push(y);let w=y.length,_=new Float32Array(w),D=new Float32Array(3*(w===2?2:w-2));if(h.push({line:D,points:_}),w===2){_[0]=y[0]*p,_[1]=y[1]*g,D.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[E,S,x,P]=y;E*=p,S*=g,x*=p,P*=g,_.set([E,S,x,P],0),D.set([NaN,NaN,NaN,NaN,E,S],0);for(let j=4;j<w;j+=2){let de=_[j]=y[j]*p,me=_[j+1]=y[j+1]*g;D.set(R.createBezierPoints(E,S,x,P,de,me),(j-2)*3),[E,S,x,P]=[x,P,de,me]}}if(h.length===0)return null;let m=a?new Ks:new vr;return m.build(h,e,n,1,i,a?0:d,s),{outline:m,newCurves:v,areContours:a,thickness:d,width:c,height:u}}static compressSignature(o){return I(this,arguments,function*({outlines:t,areContours:e,thickness:n,width:i,height:s}){let a=1/0,l=-1/0,c=0;for(let w of t){c+=w.length;for(let _=2,D=w.length;_<D;_++){let E=w[_]-w[_-2];a=Math.min(a,E),l=Math.max(l,E)}}let u;a>=-128&&l<=127?u=Int8Array:a>=-32768&&l<=32767?u=Int16Array:u=Int32Array;let d=t.length,h=ul+Os*d,f=new Uint32Array(h),p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(n??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(let w of t)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];let g=new CompressionStream("deflate-raw"),v=g.writable.getWriter();yield v.ready,v.write(f);let m=u.prototype.constructor;for(let w of t){let _=new m(w.length-2);for(let D=2,E=w.length;D<E;D++)_[D-2]=w[D]-w[D-2];v.write(_)}v.close();let b=yield new Response(g.readable).arrayBuffer(),y=new Uint8Array(b);return Bb(y)})}static decompressSignature(t){return I(this,null,function*(){try{let o=cI(t),{readable:a,writable:l}=new DecompressionStream("deflate-raw"),c=l.getWriter();yield c.ready,c.write(o).then(()=>I(this,null,function*(){yield c.ready,yield c.close()})).catch(()=>{});let u=null,d=0;try{for(var e=tp(a),n,i,s;n=!(i=yield e.next()).done;n=!1){let E=i.value;u||=new Uint8Array(new Uint32Array(E.buffer,0,4)[0]),u.set(E,d),d+=E.length}}catch{s=[i]}finally{try{n&&(i=e.return)&&(yield i.call(e))}finally{if(s)throw s[0]}}let h=new Uint32Array(u.buffer,0,u.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);let p=h[2],g=h[3],v=h[4]===0,m=h[5],b=h[6],y=h[7],w=[],_=(ul+Os*b)*Uint32Array.BYTES_PER_ELEMENT,D;switch(y){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(u.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(u.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(u.buffer,_);break}d=0;for(let E=0;E<b;E++){let S=h[Os*E+ul],x=new Float32Array(S+2);w.push(x);for(let P=0;P<Os-1;P++)x[P]=h[Os*E+ul+P+1];for(let P=0;P<S;P++)x[P+2]=x[P]+D[d++]}return{areContours:v,thickness:m,outlines:w,width:p,height:g}}catch(o){return Y(`decompressSignature: ${o}`),null}})}},Vf=class r extends zl{constructor(){super(),super.updateProperties({fill:"CanvasText","stroke-width":0})}clone(){let t=new r;return t.updateAll(this),t}},Hf=class r extends Gl{constructor(t){super(t),super.updateProperties({stroke:"CanvasText","stroke-width":1})}clone(){let t=new r(this._viewParameters);return t.updateAll(this),t}},$f=class r extends Wb{#e=!1;#t=null;#n=null;#r=null;static _type="signature";static _editorType=G.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super(ae(A({},t),{mustBeCommitted:!0,name:"signatureEditor"})),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor"}static initialize(t,e){ye.initialize(t,e),this._defaultDrawingOptions=new Vf,this._defaultDrawnSignatureOptions=new Hf(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ee(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(t){let e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e,{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){let{lines:i,mustSmooth:s,areContours:o,description:a,uuid:l,heightInPage:c}=this.#n,{rawDims:{pageWidth:u,pageHeight:d},rotation:h}=this.parent.viewport,f=Vn.processDrawnLines({lines:i,pageWidth:u,pageHeight:d,rotation:h,innerMargin:r._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(f,c,a,l)}else this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#r=t,this.addEditToolbar()}getUuid(){return this.#r}get description(){return this.#t}set description(t){this.#t=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){let{newCurves:t,areContours:e,thickness:n,width:i,height:s}=this.#n,o=Math.max(i,s),a=Vn.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:n,width:i,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:a.outline}}addEditToolbar(){return I(this,null,function*(){let t=yield on(r.prototype,this,"addEditToolbar").call(this);return t?(this._uiManager.signatureManager&&this.#t!==null&&(yield t.addEditSignatureButton(this._uiManager.signatureManager,this.#r,this.#t),t.show()),t):null})}addSignature(t,e,n,i){let{x:s,y:o}=this,{outline:a}=this.#n=t;this.#e=a instanceof Ks,this.#t=n,this.div.setAttribute("aria-description",n);let l;this.#e?l=r.getDefaultDrawingOptions():(l=r._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});let[c,u]=this.parentDimensions,[,d]=this.pageDimensions,h=e/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(c*this.width,u*this.height),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Vn.process(t,e,n,i,r._INNER_MARGIN)}getFromText(t,e){let{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Vn.extractContoursFromText(t,e,n,i,s,r._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Vn.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:r._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=r.getDefaultDrawingOptions():(this._drawingOptions=r._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:e,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o={annotationType:G.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:s,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:e,points:n},o.uuid=this.#r,o.isCopy=!0):o.lines=e,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(t,e,n,i,s,o){return o.areContours?Ks.deserialize(t,e,n,i,s,o):vr.deserialize(t,e,n,i,s,o)}static deserialize(t,e,n){return I(this,null,function*(){let i=yield on(r,this,"deserialize").call(this,t,e,n);return i.#e=t.areContours,i.#t=t.accessibilityData?.alt||"",i.#r=t.uuid,i})}},Uf=class r extends ye{#e=null;#t=null;#n=null;#r=null;#s=null;#i="";#l=null;#a=!1;#d=null;#c=!1;#h=!1;static _type="stamp";static _editorType=G.STAMP;constructor(t){super(ae(A({},t),{name:"stampEditor"})),this.#r=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ye.initialize(t,e)}static isHandlingMimeForPasting(t){return Ch.includes(t)}static paste(t,e){e.pasteEditor(G.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#e=t.bitmap,e||(this.#t=t.id,this.#c=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(t=null,e=!0){return I(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(yield n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:i,width:s,height:o}=t||this.copyCanvas(null,null,!0).imageData,a=yield n.guess({name:"altText",request:{data:i,width:s,height:o,channels:i.length/(s*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");let l=a.output;return yield this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#o(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#u(n,!0)).finally(()=>this.#f());return}if(this.#r){let n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#s){let n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(i=>this.#u(i)).finally(()=>this.#f());return}let t=document.createElement("input");t.type="file",t.accept=Ch.join(",");let e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",()=>I(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let i=yield this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}n()}),{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#o();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#o(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#s||this.#t||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#a||(this.#e?this.#p():this.#o()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){let{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#d!==null&&clearTimeout(this.#d);let t=200;this.#d=setTimeout(()=>{this.#d=null,this.#g()},t)}#p(){let{div:t}=this,{width:e,height:n}=this.#e,[i,s]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,n=this.height*s;else if(e>o*i||n>o*s){let u=Math.min(o*i/e,o*s/n);e*=u,n*=u}let[a,l]=this.parentDimensions;this.setDims(e*a/i,n*l/s),this._uiManager.enableWaiting(!1);let c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/i,this.height=n/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i)}copyCanvas(t,e,n=!1){t||(t=224);let{width:i,height:s}=this.#e,o=new _n,a=this.#e,l=i,c=s,u=null;if(e){if(i>e||s>e){let D=Math.min(e/i,e/s);l=Math.floor(i*D),c=Math.floor(s*D)}u=document.createElement("canvas");let h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#c||(a=this.#m(h,f));let p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");let m=15,b=m*o.sx,y=m*o.sy,w=new OffscreenCanvas(b*2,y*2),_=w.getContext("2d");_.fillStyle=g,_.fillRect(0,0,b*2,y*2),_.fillStyle=v,_.fillRect(0,0,b,y),_.fillRect(b,y,b,y),p.fillStyle=p.createPattern(w,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(n){let h,f;if(o.symmetric&&a.width<t&&a.height<t)h=a.width,f=a.height;else if(a=this.#e,i>t||s>t){let v=Math.min(t/i,t/s);h=Math.floor(i*v),f=Math.floor(s*v),this.#c||(a=this.#m(h,f))}let g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#m(t,e){let{width:n,height:i}=this.#e,s=n,o=i,a=this.#e;for(;s>2*t||o>2*e;){let l=s,c=o;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#g(){let[t,e]=this.parentDimensions,{width:n,height:i}=this,s=new _n,o=Math.ceil(n*t*s.sx),a=Math.ceil(i*e*s.sy),l=this.#l;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;let c=this.#c?this.#e:this.#m(o,a),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,a)}#v(t){if(t){if(this.#c){let i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#e,e.getContext("2d").drawImage(this.#e,0,0),e.toDataURL()}if(this.#c){let[e,n]=this.pageDimensions,i=Math.round(this.width*e*Hn.PDF_TO_CSS_UNITS),s=Math.round(this.height*n*Hn.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}static deserialize(t,e,n){return I(this,null,function*(){let i=null,s=!1;if(t instanceof Bl){let{data:{rect:g,rotation:v,id:m,structParent:b,popupRef:y},container:w,parent:{page:{pageNumber:_}},canvas:D}=t,E,S;D?(delete t.canvas,{id:E,bitmap:S}=n.imageManager.getFromCanvas(w.id,D),D.remove()):(s=!0,t._hasNoCanvas=!0);let x=(yield e._structTree.getAriaAttributes(`${Wf}${m}`))?.get("aria-label")||"";i=t={annotationType:G.STAMP,bitmapId:E,bitmap:S,pageIndex:_-1,rect:g.slice(0),rotation:v,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:x},isSvg:!1,structParent:b,popupRef:y}}let o=yield on(r,this,"deserialize").call(this,t,e,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:h}=t;s?(n.addMissingCanvas(t.id,o),o.#a=!0):u&&n.imageManager.isValidId(u)?(o.#t=u,l&&(o.#e=l)):o.#r=c,o.#c=d;let[f,p]=o.pageDimensions;return o.width=(a[2]-a[0])/f,o.height=(a[3]-a[1])/p,o.annotationElementId=t.id||null,h&&(o.altTextData=h),o._initialData=i,o.#h=!!i,o})}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:G.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;let{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let a=this.#y(n);if(a.isSame)return null;a.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;let o=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#t))e.stamps.set(this.#t,{area:o,serialized:n}),n.bitmap=this.#v(!1);else if(this.#c){let a=e.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#v(!1))}return n}#y(t){let{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}},BI=(()=>{class r{#e;#t=!1;#n=null;#r=null;#s=null;#i=new Map;#l=!1;#a=!1;#d=!1;#c=null;#h=null;#u=null;#f=null;#o;static _initialized=!1;static#p=new Map([Of,Bf,Uf,Ul,$f].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){let h=[...r.#p.values()];if(!r._initialized){r._initialized=!0;for(let f of h)f.initialize(d,e)}e.registerEditorTypes(h),this.#o=e,this.pageIndex=n,this.div=i,this.#e=o,this.#n=a,this.viewport=u,this.#u=c,this.drawLayer=l,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===G.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#b(),e){case G.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case G.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case G.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;for(let i of r.#p.values())n.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}cleanUndoStack(e){this.#o.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}enable(){return I(this,null,function*(){this.#d=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let i of this.#i.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#o.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!this.#n){this.#d=!1;return}let n=this.#n.getEditableAnnotations();for(let i of n){if(i.hide(),this.#o.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;let s=yield this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#d=!1})}disable(){this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,n=new Map;for(let s of this.#i.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else n.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){let s=this.#n.getEditableAnnotations();for(let o of s){let{id:a}=o.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=n.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);let{classList:i}=this.div;for(let s of r.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;let e=this.#o.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#m.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#m(e){this.#o.unselectAll();let{target:n}=e;if(n===this.#u.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#u.div.contains(n)){let{isMac:i}=Oe.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#o.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Ul.startHighlighting(this,this.#o.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;let e=this.#o.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#i.set(e.id,e);let{annotationElementId:n}=e;n&&this.#o.isDeletedAnnotationElement(n)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){let n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#d),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:n}=document;e.div.contains(n)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),n.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let n=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getNextId(){return this.#o.getId()}get#g(){return r.#p.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){let n=this.#g;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(e,n){return I(this,null,function*(){this.#o.updateToolbar(e),yield this.#o.updateMode(e);let{offsetX:i,offsetY:s}=this.#y(),o=this.getNextId(),a=this.#v(A({parent:this,id:o,x:i,y:s,uiManager:this.#o,isCentered:!0},n));a&&this.add(a)})}deserialize(e){return I(this,null,function*(){return(yield r.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o))||null})}createAndAddNewEditor(e,n,i={}){let s=this.getNextId(),o=this.#v(A({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:n},i));return o&&this.add(o),o}#y(){let{x:e,y:n,width:i,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,e),a=Math.max(0,n),l=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,n+s),u=(o+l)/2-e,d=(a+c)/2-n,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(e={}){this.createAndAddNewEditor(this.#y(),!0,e)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){let{isMac:n}=Oe.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#l||(this.#l=!1,this.#g?.isDrawer&&this.#g.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}let i=this.#o.getMode();if(i===G.STAMP||i===G.SIGNATURE){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#o.getMode()===G.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}let{isMac:n}=Oe.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#l=!0,this.#g?.isDrawer){this.startDrawingSession(e);return}let i=this.#o.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#c){this.#g.startDrawing(this,this.#o,!1,e);return}this.#o.setCurrentDrawingSession(this),this.#c=new AbortController;let n=this.#o.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:n}),this.#g.startDrawing(this,this.#o,!1,e)}pause(e){if(e){let{activeElement:n}=document;this.div.contains(n)&&(this.#h=n);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#o.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#g.endDrawing(e)):null}findNewParent(e,n,i){let s=this.#o.findParent(n,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#o.removeLayer(this)}#b(){for(let e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,pr(this.div,e);for(let n of this.#o.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#b();let n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,pr(this.div,{rotation:i}),n!==i)for(let s of this.#i.values())s.rotate(i)}get pageDimensions(){let{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#o.viewParameters.realScale}}return r})(),zf=class r{#e=null;#t=new Map;#n=new Map;static#r=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#e){this.#e=t;return}if(this.#e!==t){if(this.#t.size>0)for(let e of this.#t.values())e.remove(),t.append(e);this.#e=t}}static get _svgFactory(){return ee(this,"_svgFactory",new Ai)}static#s(t,[e,n,i,s]){let{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*s}%`}#i(){let t=r._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,e){let n=r._svgFactory.createElement("clipPath");t.append(n);let i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");let s=r._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),i}#a(t,e){for(let[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)}draw(t,e=!1,n=!1){let i=r.#r++,s=this.#i(),o=r._svgFactory.createElement("defs");s.append(o);let a=r._svgFactory.createElement("path");o.append(a);let l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(i,a);let c=n?this.#l(o,l):null,u=r._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,t),this.#t.set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){let n=r.#r++,i=this.#i(),s=r._svgFactory.createElement("defs");i.append(s);let o=r._svgFactory.createElement("path");s.append(o);let a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){let d=r._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");let h=r._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");let f=r._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}let c=r._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);let u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#t.set(n,i),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;let{root:n,bbox:i,rootClass:s,path:o}=e,a=typeof t=="number"?this.#t.get(t):t;if(a){if(n&&this.#a(a,n),i&&r.#s(a,i),s){let{classList:l}=a;for(let[c,u]of Object.entries(s))l.toggle(c,u)}if(o){let c=a.firstChild.firstChild;this.#a(c,o)}}}updateParent(t,e){if(e===this)return;let n=this.#t.get(t);n&&(e.#e.append(n),this.#t.delete(t),e.#t.set(t,n))}remove(t){this.#n.delete(t),this.#e!==null&&(this.#t.get(t).remove(),this.#t.delete(t))}destroy(){this.#e=null;for(let t of this.#t.values())t.remove();this.#t.clear(),this.#n.clear()}};globalThis.pdfjsTestingUtils={HighlightOutliner:Ys};var DL=B.AbortException,CL=B.AnnotationEditorLayer,SL=B.AnnotationEditorParamsType,AL=B.AnnotationEditorType,IL=B.AnnotationEditorUIManager,xL=B.AnnotationLayer,TL=B.AnnotationMode,ML=B.AnnotationType,RL=B.ColorPicker,NL=B.DOMSVGFactory,kL=B.DrawLayer,PL=B.FeatureTest,qb=B.GlobalWorkerOptions,OL=B.ImageKind,LL=B.InvalidPDFException,FL=B.MathClamp,jL=B.OPS,BL=B.OutputScale,VL=B.PDFDataRangeTransport,HL=B.PDFDateString,$L=B.PDFWorker,UL=B.PasswordResponses,zL=B.PermissionFlag,GL=B.PixelsPerInch,WL=B.RenderingCancelledException,qL=B.ResponseException,YL=B.SignatureExtractor,XL=B.SupportedImageMimeTypes,KL=B.TextLayer,ZL=B.TouchManager,QL=B.Util,JL=B.VerbosityLevel,eF=B.XfaLayer,tF=B.build,nF=B.createValidAbsoluteUrl,rF=B.fetchData,Yb=B.getDocument,iF=B.getFilenameFromUrl,sF=B.getPdfFilenameFromUrl,oF=B.getUuid,aF=B.getXfaPageViewport,lF=B.isDataScheme,cF=B.isPdfFile,uF=B.isValidExplicitDest,dF=B.noContextMenu,hF=B.normalizeUnicode,fF=B.setLayerDimensions,pF=B.shadow,gF=B.stopEvent,mF=B.version;var HI=["pdfContainer"],Zl=class r{_resumeLink=wb;currentScale=1.3;pdfContainer;ngAfterViewInit(){this.renderPDF(this._resumeLink)}renderPDF(t){return I(this,null,function*(){qb.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/5.0.375/pdf.worker.min.mjs";try{let e=yield Yb(t).promise;this.pdfContainer.nativeElement.innerHTML="";for(let n=1;n<=e.numPages;n++){let i=yield e.getPage(n),s=i.getViewport({scale:this.currentScale}),o=document.createElement("canvas"),a=o.getContext("2d");o.height=s.height,o.width=s.width,yield i.render({canvasContext:a,viewport:s}).promise,this.pdfContainer.nativeElement.appendChild(o)}}catch(e){console.error("Error rendering PDF:",e)}})}zoomIn(){this.currentScale=Math.min(this.currentScale+.1,2.5),this.renderPDF(this._resumeLink)}zoomOut(){this.currentScale=Math.max(this.currentScale-.1,.8),this.renderPDF(this._resumeLink)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-resume"]],viewQuery:function(e,n){if(e&1&&Xv(HI,5),e&2){let i;pa(i=ga())&&(n.pdfContainer=i.first)}},decls:8,vars:0,consts:[["pdfContainer",""],[1,"pdf-container"],[1,"pdf-controls"],[1,"transparent-btn",3,"click"]],template:function(e,n){if(e&1){let i=ts();T(0,"div",1)(1,"div",2)(2,"button",3),yn("click",function(){return Kr(i),Zr(n.zoomOut())}),K(3,"\u2212"),M(),T(4,"button",3),yn("click",function(){return Kr(i),Zr(n.zoomIn())}),K(5,"+"),M()(),H(6,"div",null,0),M()}},styles:[".pdf-container[_ngcontent-%COMP%]{position:relative;width:100%;height:85vh;overflow-y:auto}canvas[_ngcontent-%COMP%]{position:relative;z-index:1;margin:10px auto;box-shadow:0 2px 8px #0000001a}.transparent-btn[_ngcontent-%COMP%]:hover{background:#000c;transform:scale(1.15)}.transparent-btn[_ngcontent-%COMP%]{background:#0009;border:none;color:#fff;width:36px;height:36px;border-radius:50%;cursor:pointer;font-size:1.3rem;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);transition:all .2s ease;display:flex;align-items:center;justify-content:center}.pdf-controls[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;display:flex;gap:8px}"]})};var Ql=class r{_userAddress;_userPhone;_userEmail;constructor(){this._userAddress=rt.userAddress,this._userPhone=rt.userPhone,this._userEmail=rt.userEmail}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-Contact"]],decls:38,vars:0,consts:[[1,"row","ml-1"],[1,"col"],[1,"testimonial-card"],["src","../assets/images/Contact.svg",1,"img-fluid","contact-image"],[1,"row"],[1,"col-md-2"],[1,"contact-card"],[1,"form-group"],[1,"mb-3"],[1,"input-group","mb-4"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user","text-info"],["type","text","id","FullName","placeholder","Full Name",1,"form-control"],[1,"fa","fa-envelope","text-info"],["type","email","id","Email","placeholder","YourMail@domain.com",1,"form-control"],["type","email","id","LinkToSocialMedia","placeholder","Your Social Media Link",1,"form-control"],[1,"fa","fa-comment","text-info"],["placeholder","Your Message",1,"form-control"],[1,"text-center"],["type","submit","value","Send",1,"btn","btn-info","btn-block","rounded-0","py-2"]],template:function(e,n){e&1&&(T(0,"div",0)(1,"div",1)(2,"div",2),H(3,"img",3),M()(),T(4,"div",4),H(5,"div",5),T(6,"div",1)(7,"div",6)(8,"form",7)(9,"h4",8),K(10,"Get in Touch"),M(),T(11,"div",7)(12,"div",9)(13,"div",10)(14,"div",11),H(15,"i",12),M()(),H(16,"input",13),M()(),T(17,"div",7)(18,"div",9)(19,"div",10)(20,"div",11),H(21,"i",14),M()(),H(22,"input",15),M()(),T(23,"div",7)(24,"div",9)(25,"div",10)(26,"div",11),H(27,"i",14),M()(),H(28,"input",16),M()(),T(29,"div",7)(30,"div",9)(31,"div",10)(32,"div",11),H(33,"i",17),M()(),H(34,"textarea",18),M()(),T(35,"div",19),H(36,"input",20),M()()()(),H(37,"div",5),M()())},dependencies:[We],styles:[".contact-card[_ngcontent-%COMP%]{width:100%;text-align:center;height:250px;font-family:Inter,sans-serif}.contact-image[_ngcontent-%COMP%]{width:240px;height:260px;display:block;margin:auto;padding-bottom:40px}.contact-card[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{font-family:Inter,sans-serif}"]})};function $I(r,t){if(r&1&&(T(0,"div",15)(1,"span",16),K(2,"\u2714"),M(),T(3,"span",17),K(4),M()()),r&2){let e=t.$implicit;z(4),$e(e)}}var to=class r{aboutMe;skills;constructor(){this.aboutMe=rt.aboutMe,this.skills=mb}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-about"]],decls:19,vars:2,consts:[[1,"about-top"],[1,"row",2,"height","20%"],[1,"about-title","mx-auto"],[2,"height","70%"],[1,"about-desc"],[1,"about-content","position-relative"],[1,"row"],[1,"col-md-6"],[1,"skills-section",2,"margin-left","15%"],[2,"color","blue","margin-top","15%"],[2,"height","80%","width","100%","overflow-wrap","break-word","overflow","hidden"],[1,"skills-grid"],["class","skill-item",4,"ngFor","ngForOf"],[1,"image-section"],["src","../assets/images/Skill.svg","alt","About Image",1,"img-fluid","about-svg"],[1,"skill-item"],[1,"skill-icon",2,"margin-right","7px"],[1,"skill-name",2,"color","rgb(58, 57, 57)"]],template:function(e,n){e&1&&(T(0,"div",0)(1,"div",1)(2,"h4",2),K(3,"Hello, I am"),M()(),T(4,"div",3)(5,"p",4),K(6),M()()(),T(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h4",9),K(12,"My Skills"),M(),T(13,"div",10),H(14,"div",11),Ze(15,$I,5,1,"div",12),M()()(),T(16,"div",7)(17,"div",13),H(18,"img",14),M()()()()),e&2&&(z(6),$e(n.aboutMe),z(9),le("ngForOf",n.skills))},dependencies:[We,Yt],styles:[".about-top[_ngcontent-%COMP%]{width:100%;height:35%;background:#c4c4c44d;border-radius:0 0 45% 15%}.about-title[_ngcontent-%COMP%]{font-family:Inter,sans-serif;margin-top:18px;line-height:30px;text-align:center;color:#000}.about-desc[_ngcontent-%COMP%]{margin:0 50px;font-family:Inter,sans-serif;text-justify:auto;font-size:1vw;line-height:35px;text-indent:5%;color:#000}.about-content[_ngcontent-%COMP%]{width:100%;height:55%}.about-svg[_ngcontent-%COMP%]{width:300px;height:550px}.skill-box[_ngcontent-%COMP%]{width:100px;height:30px;background:#c4c4c44d;box-shadow:0 4px 4px 1px #00000040;font-family:Inter,sans-serif;text-align:center;padding:2px 4px;margin:10px;color:#000;float:left}"]})};function UI(r,t){if(r&1&&(T(0,"div",5)(1,"p",6),K(2),M()()),r&2){let e=t.$implicit;z(2),$e(e)}}var Jl=class r{_achievements;constructor(){this._achievements=bb}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-achievements"]],decls:5,vars:1,consts:[[1,"achievements-container",2,"margin","5%","max-height","580px","height","100%","overflow-y","auto"],["class","achievement-card",4,"ngFor","ngForOf"],[1,"col-md-7",2,"display","flex","align-items","flex-end","justify-content","flex-start"],[1,"image-section"],["src","../assets/images/Design_Thinking.svg","alt","About Image",1,"img-fluid","about-svg",2,"width","80%"],[1,"achievement-card"],[2,"font-size","1.3em","color","#333","text-decoration","none"]],template:function(e,n){e&1&&(T(0,"div",0),Ze(1,UI,3,1,"div",1),T(2,"div",2)(3,"div",3),H(4,"img",4),M()()()),e&2&&(z(),le("ngForOf",n._achievements))},dependencies:[We,Yt],styles:[".achievements-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.achievement-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:15px}.achievement-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 12px #0003}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#fff;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}"]})};function zI(r,t){if(r&1&&(T(0,"li"),K(1),M()),r&2){let e=t.$implicit;z(),$e(e)}}function GI(r,t){if(r&1&&(T(0,"div",4)(1,"div",5)(2,"strong",6),H(3,"i",7),K(4),M(),H(5,"hr",8),T(6,"small"),K(7),M(),T(8,"ul"),Ze(9,zI,2,1,"li",9),M()()()),r&2){let e=t.$implicit,n=dt();z(3),le("ngClass",e.company==="DBS Tech India"?"fa-university":"fa-building"),z(),_d(" ",e.company," ( ",e.Start_Date,"-",e.End_Date," ) - ",n.calculateYearsofExperience(e.Start_Date,e.End_Date)," "),z(3),$e(e.rank),z(2),le("ngForOf",e.description)}}var ec=class r{_jobs;constructor(){this._jobs=vb}calculateYearsofExperience(t,e){let n=new Date(t.split("/").reverse().join("-"));if(e==="Present"){let c=new Date;e=`${c.getDate()}/${c.getMonth()+1}/${c.getFullYear()}`}let o=(new Date(e.split("/").reverse().join("-")).getTime()-n.getTime())/(1e3*60*60*24*30.4375),a=Math.floor(o/12),l=Math.round(o%12);return a===0?`${l} Months`:l===0?`${a} Years`:`${a} Years ${l} Months`}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-experience"]],decls:4,vars:1,consts:[[1,"row","middle-line"],[1,"col","ml-3"],[2,"margin","5%","height","68%","overflow-y","auto"],["style","color: rgb(58, 57, 57);",4,"ngFor","ngForOf"],[2,"color","rgb(58, 57, 57)"],[1,"resume-card"],[1,"resume-card-title"],["aria-hidden","true",1,"fa",3,"ngClass"],[2,"margin","1px !important"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(T(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,GI,10,7,"div",3),M()()()),e&2&&(z(3),le("ngForOf",n._jobs))},dependencies:[We,Td,Yt],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d3d3d3;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}.resume-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:-4px 0 6px #0000001a,0 4px 6px #0000001a;padding:15px 20px;margin:20px 0;transition:transform .3s ease,box-shadow .3s ease;position:relative;z-index:1}.resume-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:-4px 0 12px #0003,0 12px 20px #0003;z-index:10}"]})};function WI(r,t){if(r&1&&(T(0,"li"),K(1),M()),r&2){let e=t.$implicit;z(),rr(" ",e," ")}}function qI(r,t){if(r&1&&(T(0,"a",13),H(1,"i",14),K(2," Code "),M()),r&2){let e=dt().$implicit;le("href",e.githubLink,Ct)}}function YI(r,t){if(r&1){let e=ts();T(0,"button",15),yn("click",function(){Kr(e);let i=dt().$implicit,s=dt();return Zr(s.openVideoPopup(i.videoLink))}),H(1,"i",16),K(2," Video "),M()}}function XI(r,t){if(r&1&&(T(0,"div",5)(1,"div",6)(2,"strong",7),K(3),M(),H(4,"hr",8),T(5,"p"),K(6),M(),T(7,"ul"),Ze(8,WI,2,1,"li",9),M(),T(9,"p"),K(10),M(),T(11,"div",10),Ze(12,qI,3,1,"a",11)(13,YI,3,0,"button",12),M()()()),r&2){let e=t.$implicit;z(3),wd(" ",e.name," - ",e.type," "),z(3),$e(e.description),z(2),le("ngForOf",e.achievements),z(2),rr("Skills: ",e.technologies.join(" , "),""),z(2),le("ngIf",e.githubLink),z(),le("ngIf",e.videoLink)}}function KI(r,t){if(r&1){let e=ts();T(0,"div",17)(1,"div",18),H(2,"video",19),T(3,"button",20),yn("click",function(){Kr(e);let i=dt();return Zr(i.closeVideoPopup())}),K(4,"Close"),M()()()}}var tc=class r{_projects;isVideoPopupVisible=!1;constructor(){this._projects=yb}openVideoPopup(t){this.isVideoPopupVisible=!0;let e=document.getElementById("videoElement");e&&(e.pause(),e.src=this.getDriveDirectLink(t),e.load(),e.play())}closeVideoPopup(){this.isVideoPopupVisible=!1;let t=document.getElementById("videoElement");t&&(t.pause(),t.src="")}getDriveDirectLink(t){let e=t.match(/\/file\/d\/([^\/]+)\//);return e?`https://drive.google.com/uc?id=${e[1]}&export=download`:t}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Ie({type:r,selectors:[["app-projects"]],decls:5,vars:2,consts:[[1,"row","middle-line"],[1,"col","ml-3"],[2,"margin","5%","max-height","580px","height","100%","overflow-y","auto"],["style","color: rgb(58, 57, 57);",4,"ngFor","ngForOf"],["style","position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); z-index: 1000;",4,"ngIf"],[2,"color","rgb(58, 57, 57)"],[1,"resume-card"],[1,"resume-card-title"],[2,"margin","1px !important"],[4,"ngFor","ngForOf"],[1,"button-container",2,"display","flex","justify-content","flex-end","gap","10px","margin-top","10px"],["target","_blank","class","btn btn-primary",3,"href",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"href"],[1,"fa","fa-code"],[1,"btn","btn-secondary",3,"click"],[1,"fa","fa-video-camera"],[2,"position","fixed","top","0","left","0","width","100%","height","100%","background-color","rgba(0, 0, 0, 0.8)","z-index","1000"],[2,"position","relative","max-width","800px","margin","5% auto","background","#fff","padding","20px","border-radius","8px","overflow","hidden"],["id","videoElement","controls","",2,"width","100%","height","auto"],[2,"position","absolute","top","10px","right","10px","background","red","color","white","border","none","padding","5px 10px","cursor","pointer",3,"click"]],template:function(e,n){e&1&&(T(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,XI,14,7,"div",3)(4,KI,5,0,"div",4),M()()()),e&2&&(z(3),le("ngForOf",n._projects),z(),le("ngIf",n.isVideoPopupVisible))},dependencies:[We,Yt,ss],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d3d3d3;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1}.resume-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:-4px 0 6px #0000001a,0 4px 6px #0000001a;padding:15px 20px;margin:20px 0;transition:transform .3s ease,box-shadow .3s ease;position:relative;z-index:1}.resume-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:-4px 0 12px #0003,0 12px 20px #0003;z-index:10}.resume-card-title[_ngcontent-%COMP%]{font-size:1.2rem;color:#4f4e4e;margin-bottom:10px}"]})};var Xb=[{path:"about",component:to},{path:"contact",component:Ql},{path:"projects",component:tc},{path:"experience",component:ec},{path:"achievements",component:Jl},{path:"resume",component:Zl},{path:"**",component:to,pathMatch:"full"}];var Kb={production:!1};Kb.production&&void 0;Vd(il,{providers:[gh(Xb)]}).catch(r=>console.error(r));
